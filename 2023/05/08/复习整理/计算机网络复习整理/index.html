<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>计算机网络复习整理 | WinkySpeed's Blog</title><meta name="author" content="WinkySpeed"><meta name="copyright" content="WinkySpeed"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="计算机网络复习整理 概述 计算机网络在信息时代的作用 互联网（Internet） \(\ne\) 互连网（internet） 互连网的两个重要基本特点 连通性：使上网用户之间可以非常便捷、非常经济地交换各种信息，好像这些用户终端都彼此直接连通一样 资源共享：信息共享、软件共享、硬件共享，由于网络的存在，这些资源好像就在用户身边一样地方便使用 这两个特点是 Internet 提供许多">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络复习整理">
<meta property="og:url" content="http://example.com/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="WinkySpeed&#39;s Blog">
<meta property="og:description" content="计算机网络复习整理 概述 计算机网络在信息时代的作用 互联网（Internet） \(\ne\) 互连网（internet） 互连网的两个重要基本特点 连通性：使上网用户之间可以非常便捷、非常经济地交换各种信息，好像这些用户终端都彼此直接连通一样 资源共享：信息共享、软件共享、硬件共享，由于网络的存在，这些资源好像就在用户身边一样地方便使用 这两个特点是 Internet 提供许多">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/WinkySpeed%20SP%20-%20Repaired.jpg">
<meta property="article:published_time" content="2023-05-08T04:25:05.000Z">
<meta property="article:modified_time" content="2023-12-20T10:48:19.457Z">
<meta property="article:author" content="WinkySpeed">
<meta property="article:tag" content="复习">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/WinkySpeed%20SP%20-%20Repaired.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络复习整理',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-20 18:48:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/WinkySpeed%20SP%20-%20Repaired.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/33703665_p0.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="WinkySpeed's Blog"><span class="site-name">WinkySpeed's Blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络复习整理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-08T04:25:05.000Z" title="发表于 2023-05-08 12:25:05">2023-05-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-20T10:48:19.457Z" title="更新于 2023-12-20 18:48:19">2023-12-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络复习整理"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="计算机网络复习整理">计算机网络复习整理</h1>
<h1 id="概述">概述</h1>
<h2 id="计算机网络在信息时代的作用">计算机网络在信息时代的作用</h2>
<p>互联网（Internet） <span class="math inline">\(\ne\)</span>
互连网（internet）</p>
<h3 id="互连网的两个重要基本特点">互连网的两个重要基本特点</h3>
<p><strong>连通性</strong>：使上网用户之间可以非常便捷、非常经济地交换各种信息，好像这些用户终端都彼此直接连通一样</p>
<p><strong>资源共享</strong>：信息共享、软件共享、硬件共享，由于网络的存在，这些资源好像就在用户身边一样地方便使用</p>
<p>这两个特点是 Internet 提供许多服务的基础</p>
<h2 id="互联网概述">互联网概述</h2>
<h3 id="网络的网络">网络的网络</h3>
<p>计算机网络：由若干<strong>节点</strong>和连接这些节点的<strong>链路</strong>组成。节点可以是计算器、集线器、交换机或路由器等</p>
<p>互连网：多个网络通过一些路由器互相连接起来，构成了一个覆盖范围更大的计算机网络，“网络的网络”</p>
<p>网络把许多计算机连接在一起</p>
<p>互连网把许多网络通过一些路由器连接在一起</p>
<h3 id="互连网基础结构发展三个阶段">互连网基础结构发展三个阶段</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508204110460.png" class title="image-20230508204110460">
<p>ARPANET：最初只是一个单个的分组交换网，不是一个互连网</p>
<p>1983 年，TCP/IP 协议成为 ARPANET 上的标准协议，使得所有使用 TCP/IP
协议的计算机都能利用互连网相互通信</p>
<p>人们把 1983 年作为互联网的诞生时间</p>
<p><br></p>
<p>国家科学基金网
NSFNET的三级结构：主干网、地区网和校园网（或企业网）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508204510513.png" class title="image-20230508204510513">
<p><br></p>
<p>第三阶段出现了互联网服务提供者 ISP (Internet Service
Provider)，可以提供接入到互联网的服务</p>
<p>互联网交换点 IXP (Internet eXchange
Point)：允许两个网络直接相连并快速交换分组，常采用工作在数据链路层的网络交换机</p>
<p>内容提供者 (Content
Provider)：在互联网上向所有用户提供视频等内容的公司。不向用户提供互联网的转接服务</p>
<h3 id="互联网的标准化工作">互联网的标准化工作</h3>
<p>所有因特网标准都是以RFC的形式在因特网上发布</p>
<p>RFC：Request For Comments （请求评论）</p>
<p>但并非所有的 RFC 文档都是互联网标准。只有很少部分的 RFC
文档最后才能变成互联网标准</p>
<h2 id="互联网组成">互联网组成</h2>
<p>互联网边缘部分：
由所有连接在互联网上的主机组成，由用户直接使用，用来进行通信（传送数据、音频或视频）和资源共享</p>
<p>互联网核心部分：由大量网络和连接这些网络的路由器组成，为边缘部分提供服务（提供连通性和交换）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508210239090-16835509601611.png" class title="image-20230508210239090">
<h3 id="互联网边缘部分">互联网边缘部分</h3>
<p>处在互联网边缘部分的就是连接在互联网上的所有的主机，这些主机又称为端系统
(end system)</p>
<h4 id="端系统之间两种通信方式">端系统之间两种通信方式</h4>
<h5 id="客户服务器方式">客户/服务器方式</h5>
<p>Client / Server 方式，简称为 C/S 方式</p>
<p>客户/服务器方式所描述的是<strong>进程之间</strong>服务和被服务的关系</p>
<p>客户是服务的请求方，服务器是服务的提供方</p>
<p>客户与服务器的通信关系建立后，通信可以是<strong>双向</strong>的，客户和服务器都可发送和接收数据</p>
<p>客户程序：被用户调用后运行，需主动向远地服务器发起通信（请求服务）。必须知道服务器程序的地址，不需要特殊的硬件和很复杂的操作系统</p>
<p>服务器程序：一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。不需要知道客户程序的地址，一般需要强大的硬件和高级的操作系统支持，可同时处理多个客户请求</p>
<h5 id="对等方式">对等方式</h5>
<p>Peer to Peer 方式，简称为 P2P 方式</p>
<p>两台主机在通信时<strong>不区分</strong>服务请求方和服务提供方</p>
<p>只要都运行了 P2P 软件，就可以进行平等的、对等连接通信</p>
<p>对等方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机<strong>既是客户又是服务器</strong></p>
<h3 id="互连网核心部分">互连网核心部分</h3>
<p>是互联网中最复杂的部分</p>
<p>向网络边缘中的主机提供<strong>连通性</strong>，使任何一台主机都能够向其他主机通信</p>
<p>在网络核心部分起特殊作用的是<strong>路由器</strong> (router)</p>
<p>路由器是实现<strong>分组交换</strong> (packet switching)
的关键构件，其任务是转发收到的分组</p>
<p>互联网的核心部分采用<strong>分组交换技术</strong>，<strong>分组转发</strong>是网络核心部分最重要的功能</p>
<h4 id="典型交换技术">典型交换技术</h4>
<h5 id="电路交换">电路交换</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508211620749.png" class title="image-20230508211620749">
<p><span class="math inline">\(N\)</span> 部电话机两两直接相连，需 <span class="math inline">\(N(N –1)/2\)</span> 对电线</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508211656167.png" class title="image-20230508211656167">
<p>每一部电话都直接连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信，这种交换方式就是电路交换
(circuit switching)</p>
<p><strong>转接</strong>：把一条电话线转接到另一条电话线，使它们连通起来</p>
<p>从通信资源的分配角度来看，就是按照某种方式<strong>动态地</strong>分配传输线路的资源</p>
<h6 id="电路交换的三个阶段">电路交换的三个阶段</h6>
<p><strong>建立连接</strong>：建立一条专用的物理通路（占用通信资源）</p>
<p><strong>通话</strong>：主叫和被叫双方互相通电话（一直占用通信资源）</p>
<p><strong>释放连接</strong>：释放刚才使用的专用的物理通路（归还通信资源）</p>
<p><br></p>
<p>这种必须经过“
建立连接（占用通信资源）、通话（一直占用通信资源）、释放连接（归还通信资源）”三个步骤的交换方式称为电路交换</p>
<h6 id="电路交换的特点">电路交换的特点</h6>
<p>通话的两个用户<strong>始终占用</strong>端到端的通信资源</p>
<h5 id="分组交换">分组交换</h5>
<p>互联网的核心部分采用<strong>分组交换技术</strong></p>
<p>分组交换以“<strong>分组</strong>”作为数据传输单元</p>
<h6 id="分组交换的主要特点">分组交换的主要特点</h6>
<p>分组交换的主要特点：采用<strong>存储转发</strong>技术</p>
<p>在发送端，先把较长的报文划分成更小的等长数据段</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508213951854.png" class title="image-20230508213951854">
<p><strong>数据段前面添加首部就构成了分组</strong> (packet)</p>
<p>分组又称为“包”，而分组的首部也可称为“包头”</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508214046746.png" class title="image-20230508214046746">
<p>分组交换以“分组”作为数据传输单元</p>
<p>互联网采用分组交换技术，分组是在互联网中传送的数据单元</p>
<p>发送端<strong>依次</strong>把各分组发送到接收端</p>
<p>接收端收到分组后剥去首部，还原成原来的报文</p>
<h6 id="分组的存储转发过程">分组的存储转发过程</h6>
<p>根据<strong>首部</strong>中包含的目的地址、源地址等重要控制信息进行转发</p>
<p>每一个分组在互联网中<strong>独立选择</strong>传输路径</p>
<p>位于网络核心部分的路由器负责转发分组，即进行分组交换</p>
<p>路由器要创建和动态维护<strong>转发表</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508214426093.png" class title="image-20230508214426093">
<h6 id="分组交换优点">分组交换优点</h6>
<p>高效：<strong>动态分配</strong>传输带宽，对通信链路是逐段占用</p>
<p>灵活：为每一个分组<strong>独立</strong>地选择最合适的转发路由</p>
<p>迅速：以分组作为传送单位，可以<strong>不先建立连接</strong>就能向其他主机发送分组</p>
<p>可靠：保证可靠性的网络协议</p>
<h6 id="分组交换缺点">分组交换缺点</h6>
<p>排队延迟：分组在各路由器存储转发时需要排队</p>
<p>不保证带宽：动态分配</p>
<p>增加开销：各分组必须携带控制信息；路由器要暂存分组，维护转发表等</p>
<h5 id="报文交换">报文交换</h5>
<p>电报通信就采用了基于存储转发原理的报文交换</p>
<p>以<strong>报文</strong>为单位</p>
<h5 id="三种交换技术的比较">三种交换技术的比较</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508215004847.png" class title="image-20230508215004847">
<p>若要连续传送大量的数据，且其传送时间<strong>远大于</strong>连接建立时间，则<strong>电路交换</strong>的传输速率较快</p>
<p>报文交换和分组交换不需要预先分配传输带宽，在传送<strong>突发数据</strong>时可提高整个网络的信道利用率</p>
<p>由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的<strong>时延小</strong>，同时也具有更好的灵活性</p>
<h2 id="计算机网络类别">计算机网络类别</h2>
<h3 id="分类方法">分类方法</h3>
<h4 id="按照网络的作用范围进行分类">按照网络的作用范围进行分类</h4>
<p>WAN (Wide Area Network)：广域网（远程网）</p>
<p>MAN (Metropolitan Area Network)：城域网</p>
<p>LAN (Local Area Network) ：局域网</p>
<p>PAN (Personal Area Network) ：个人区域网</p>
<p>若中央处理机之间的距离非常近（如仅 1
米甚至更小些），则一般就称之为多处理机系统，而不称它为计算机网络</p>
<h4 id="按照网络的使用者进行分类">按照网络的使用者进行分类</h4>
<p>公用网 (public network)</p>
<p>专用网 (private network)</p>
<h4 id="用来把用户接入到互联网的网络">用来把用户接入到互联网的网络</h4>
<p>接入网 AN (Access Network)，又称为本地接入网或居民接入网</p>
<p>用于将用户接入互联网</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230508215942060.png" class title="image-20230508215942060">
<p>实际上就是本地 ISP
所拥有的网络，它<strong>既不是互联网的核心部分，也不是互联网的边缘部分</strong></p>
<p>是从某个用户端系统到本地 ISP
的<strong>第一个</strong>路由器（也称为边缘路由器）之间的一种网络</p>
<h2 id="计算机网络的性能">计算机网络的性能</h2>
<h3 id="计算机网络的性能指标">计算机网络的性能指标</h3>
<h4 id="速率">速率</h4>
<p>最重要的一个性能指标</p>
<p>指的是<strong>数据的传送速率</strong>，也称为<strong>数据率</strong>
(data rate) 或<strong>比特率</strong> (bit rate)</p>
<p>单位：bit/s，或 kbit/s、Mbit/s、 Gbit/s 等</p>
<p>速率往往是指<strong>额定速率或标称速率</strong>，非实际运行速率</p>
<h4 id="带宽">带宽</h4>
<p>频域解释：某信道允许通过的信号频带范围称为该信道的带宽（或<strong>通频带</strong>）</p>
<p>频域单位是赫（或千赫、兆赫、吉赫等）</p>
<p>时域解释：网络中某通道传送数据的能力，表示在单位时间内网络中的某信道所能通过的“最高数据率”</p>
<p>时域单位是数据率的单位 bit/s</p>
<p>两者本质相同，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高</p>
<h4 id="吞吐量">吞吐量</h4>
<p>单位时间内通过某个网络（或信道、接口）的<strong>实际数据量</strong></p>
<p>受网络的带宽或网络的额定速率的限制</p>
<p>额定速率是绝对上限值，可能会远小于额定速率，甚至下降到零</p>
<p>有时可用<strong>每秒传送的字节数</strong>或<strong>帧数</strong>来表示</p>
<h4 id="时延">时延</h4>
<p>总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延</p>
<p>一般说来，小时延的网络要优于大时延的网络</p>
<p>在某些情况下，一个低速率、小时延的网络很可能要优于一个高速率但大时延的网络（必须指出，在总时延中，究竟是哪一种时延占<strong>主导地位</strong>，必须具体分析）</p>
<h5 id="发送时延">发送时延</h5>
<p>也称作传输时延，是主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的<strong>第一个比特</strong>算起，到该帧的<strong>最后一个比特</strong>发送完毕所需的时间
<span class="math display">\[
\begin{align*}
发送时延=\frac{数据帧长度(bit)}{发送速率(bit/s)}
\end{align*}
\]</span></p>
<h5 id="传播时延">传播时延</h5>
<p>是电磁波在信道中传播一定的距离需要花费的时间 <span class="math display">\[
\begin{align*}
传播时延&amp;=\frac{信道长度(m)}{信号在信道上的传播速率(m/s)}\\\\
电磁波传播速率:\\
自由空间的传播速率是光速 &amp;= 3.0 \times 10^5 km/s\\
在铜线电缆中的传播速率约 &amp;= 2.3 \times 10^5 km/s\\
在光纤中的传播速率约 &amp;= 2.0 \times 10^5 km/s\\
\end{align*}
\]</span></p>
<p>注意：发送时延与传播时延<strong>有本质上的不同</strong></p>
<p>发送时延发生在<strong>机器内部的发送器</strong>中，与传输信道的长度（或信号传送的距离）没有任何关系</p>
<p>传播时延则发生在机器外部的传输信道媒体上，而与信号的发送速率无关。信号传送的距离越远，传播时延就越大</p>
<h5 id="处理时延">处理时延</h5>
<p>主机或路由器在收到分组时，为<strong>处理</strong>分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间</p>
<h5 id="排队时延">排队时延</h5>
<p>分组在路由器输入输出队列中<strong>排队等待</strong>处理和转发所经历的时延</p>
<p>排队时延的长短往往取决于网络中当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大</p>
<h5 id="四种时延">四种时延</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509211112188.png" class title="image-20230509211112188">
<p>以下说法是<strong>错误</strong>的：“在高速链路（或高带宽链路）上，比特会传送得更快些”</p>
<p>对于高速网络链路，我们<strong>提高的仅仅是数据的发送速率</strong>，而不是比特在链路上的传播速率</p>
<p>提高数据的发送速率只是<strong>减小了数据的发送时延</strong></p>
<h4 id="时延带宽积">时延带宽积</h4>
<p><span class="math inline">\(时延带宽积 = 传播时延 \times
带宽\)</span></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509211522214.png" class title="image-20230509211522214">
<p>链路的时延带宽积又称为以比特为单位的<strong>链路长度</strong></p>
<p>管道中的比特数表示从发送端发出但尚未到达接收端的比特数，只有在代表链路的管道都充满比特时，链路才得到了充分利用</p>
<h4 id="往返时间-rtt-round-trip-time">往返时间 RTT (Round-Trip
Time)</h4>
<p>表示从发送方<strong>发送完数据</strong>，到发送方<strong>收到来自接收方的确认</strong>总共经历的时间</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509211557651.png" class title="image-20230509211557651">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509211609216.png" class title="image-20230509211609216">
<p>注意：<span class="math inline">\(t_{TA}\)</span>不算在内</p>
<h4 id="利用率">利用率</h4>
<p>信道利用率：某信道有百分之几的时间是被利用的（即有数据通过），完全空闲的信道的利用率是零</p>
<p>网络利用率：全网络的信道利用率的加权平均值</p>
<h2 id="计算机网络体系结构">计算机网络体系结构</h2>
<h3 id="计算机网络体系结构的形成">计算机网络体系结构的形成</h3>
<p>最初的 <strong>ARPANET</strong>
设计时提出了<strong>分层</strong>的设计方法</p>
<p>分层：将庞大而复杂的问题，转化为若干较小的局部问题</p>
<p>1974 年，IBM 按照分层的方法制定并提出了系统网络体系结构 SNA (System
Network Architecture)</p>
<p>此后，其他一些公司也相继推出了具有不同名称的体系结构</p>
<p><br></p>
<p>ISO (国际标准化组织) 提出的 <strong>OSI/RM</strong> (Open Systems
Interconnection Reference Model)
是使各种计算机在世界范围内互连成网的<strong>标准框架</strong></p>
<p>OSI/RM 是个抽象的概念</p>
<p>1983年，形成了著名的 ISO 7498
国际标准，即<strong>七层协议的体系结构</strong></p>
<p>OSI
试图达到一种理想境界：全球计算机网络都遵循这个统一标准，因而全球的计算机将能够很方便地进行互连和交换数据</p>
<p>OSI失败：没有商业驱动力，过分复杂，周期太长，层次划分也不太合理</p>
<p><br></p>
<p>TCP/IP获得广泛应用</p>
<h3 id="协议与划分层次">协议与划分层次</h3>
<p>网络协议 (network
protocol)：简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定</p>
<p>网络协议是计算机网络的不可缺少的组成部分</p>
<h4 id="协议三个组成要素">协议三个组成要素：</h4>
<p>串讲强调 <span class="math display">\[
\color{red}协议三要素：语法，语义，同步
\]</span></p>
<p><strong>语法</strong>：数据与控制信息的结构或格式</p>
<p><strong>语义</strong>：需要发出何种控制信息，完成何种动作以及做出何种响应</p>
<p><strong>同步</strong>：事件实现顺序的详细说明</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509212834781.png" class title="image-20230509212834781">
<h4 id="分层优缺点">分层优缺点</h4>
<p>优点：各层之间是独立的，灵活性好，结构上可分割开，易于实现和维护，能促进标准化工作</p>
<p>缺点：有些功能会重复出现，因而产生了额外开销</p>
<p>注意：每一层的功能应非常明确</p>
<h4 id="各层完成的主要功能">各层完成的主要功能</h4>
<p>差错控制：使相应层次对等方的通信更加可靠</p>
<p>流量控制：发送端的发送速率必须使接收端来得及接收，不要太快</p>
<p>分段和重装：发送端将要发送的数据块划分为更小的单位，在接收端将其还原</p>
<p>复用和分用：发送端几个高层会话复用一条低层的连接，在接收端再进行分用</p>
<p>连接建立和释放：交换数据前先建立一条逻辑连接，数据传送结束后释放连接</p>
<h4 id="体系结构与实现">体系结构与实现</h4>
<p>网络的体系结构 (Network Architecture)
是计算机网络的<strong>各层及其协议的集合</strong>，就是这个计算机网络及其构件所应完成的<strong>功能的精确定义</strong>（不涉及实现）</p>
<p>实现 (implementation)
是遵循这种体系结构的前提下，用何种硬件或软件完成这些功能的问题</p>
<p>体系结构是<strong>抽象</strong>的，而实现则是<strong>具体</strong>的，是真正在运行的计算机硬件和软件</p>
<h3 id="具有五层协议的体系结构">具有五层协议的体系结构</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509213245306.png" class title="image-20230509213245306">
<p>OSI/RM：七层</p>
<p>TCP/IP：四层</p>
<h4 id="五层体系结构各层">五层体系结构各层</h4>
<h5 id="应用层">应用层</h5>
<p>任务：通过<strong>应用进程间</strong>的交互来完成特定网络应用</p>
<p>协议：定义的是<strong>应用进程间</strong>通信和交互的规则</p>
<p>把应用层交互的数据单元称为<strong>报文</strong>(message)</p>
<p>例如：DNS，HTTP，SMTP</p>
<h5 id="运输层">运输层</h5>
<p>任务：负责向两台主机中<strong>进程之间</strong>的通信提供通用的数据传输服务</p>
<p>具有复用和分用的功能</p>
<p>主要使用两种协议： 传输控制协议 TCP 和 用户数据报协议 UDP</p>
<p>TCP:
提供<strong>面向连接</strong>的、<strong>可靠</strong>的数据传输服务，数据传输的单位是<strong>报文段</strong>
(segment)</p>
<p>UDP: 提供<strong>无连接</strong>的尽最大努力 (best-effort)
的数据传输服务（不保证数据传输的可靠性），数据传输的单位是<strong>用户数据报</strong></p>
<h5 id="网络层">网络层</h5>
<p>为分组交换网上的不同<strong>主机</strong>提供通信服务</p>
<p>两个具体任务：</p>
<p>路由选择：通过一定的算法，在互联网中的每一个路由器上，生成一个用来转发分组的<strong>转发表</strong></p>
<p>转发：每一个路由器在接收到一个分组时，要依据转发表中指明的路径把分组<strong>转发</strong>到下一个路由器</p>
<p>互联网使用的网络层协议是无连接的网际协议 IP (Internet Protocol)
和许多种路由选择协议，因此互联网的网络层也叫做网际层或 IP 层</p>
<p>IP 协议分组也叫做 <strong>IP 数据报</strong>，或简称为数据报</p>
<h5 id="数据链路层">数据链路层</h5>
<p>任务：实现两个相邻节点之间的可靠通信</p>
<p>在两个相邻节点间的链路上传送<strong>帧</strong>（frame）</p>
<p>如发现有差错，就简单地<strong>丢弃</strong>出错帧</p>
<p>如果需要改正出现的差错，就要采用可靠传输协议来纠正出现的差错。这种方法会使数据链路层协议复杂</p>
<h5 id="物理层">物理层</h5>
<p>任务：实现<strong>比特</strong>（0 或 1）的传输</p>
<p>确定连接电缆的插头应当有多少根引脚，以及各引脚应如何连接</p>
<p>注意：传递信息所利用的一些物理媒体，如双绞线、同轴电缆、光缆、无线信道等，并不在物理层协议之内，而是在物理层协议的下面</p>
<h5 id="各层数据单元总结">各层数据单元总结</h5>
<p>应用层：报文</p>
<p>运输层：报文段、用户数据报</p>
<p>网络层：分组</p>
<p>数据链路层：帧</p>
<p>物理层：01比特</p>
<h5 id="数据在各层之间传输">数据在各层之间传输</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509221018616.png" class title="image-20230509221018616">
<h5 id="对等层与协议数据单元">对等层与协议数据单元</h5>
<p>OSI
参考模型把对等层次之间传送的数据单位称为该层的<strong>协议数据单元</strong>
PDU (Protocol Data Unit)</p>
<p>任何两个同样的层次把 PDU
（即数据单元加上控制信息）通过<strong>水平虚线</strong>直接传递给对方，这就是所谓的“对等层”之间的通信</p>
<p>各层协议实际上就是在各个<strong>对等层</strong>之间传递数据时的各项规定</p>
<h3 id="实体协议服务和服务访问点">实体、协议、服务和服务访问点</h3>
<p>实体 (entity)
：表示任何可<strong>发送或接收</strong>信息的硬件或软件进程</p>
<p>协议：控制<strong>两个对等实体</strong>进行通信的规则的集合</p>
<p>在协议的控制下，两个对等实体间的通信使得本层能够向上一层<strong>提供</strong>服务</p>
<p>要实现本层协议，还需要<strong>使用</strong>下层所提供的服务</p>
<p>协议和服务在概念上是不一样的</p>
<p>协议水平，服务垂直</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509222952953.png" class title="image-20230509222952953">
<p>在同一系统中相邻两层的实体进行交互（即交换信息）
的地方，通常称为服务访问点 SAP (Service Access Point)</p>
<p>SAP 是一个抽象的概念，它实际上就是一个逻辑接口</p>
<p>OSI
把<strong>层与层之间</strong>交换的数据的单位称为<strong>服务数据单元
SDU</strong> (Service Data Unit)</p>
<p>（OSI
参考模型把<strong>对等层次之间</strong>传送的数据单位称为该层的<strong>协议数据单元</strong>
PDU (Protocol Data Unit)）</p>
<p>SDU 可以与 PDU 不一样</p>
<p>例如：可以是多个 SDU 合成为一个 PDU，也可以是一个 SDU 划分为几个
PDU</p>
<h4 id="相邻两层之间关系">相邻两层之间关系</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509223345257.png" class title="image-20230509223345257">
<h3 id="tcpip-的体系结构">TCP/IP 的体系结构</h3>
<p>TCP/IP 是四层体系结构</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230509223429039.png" class title="image-20230509223429039">
<p>路由器在转发分组时<strong>最高只用到网际层</strong>，没有使用运输层和应用层</p>
<p>沙漏计时器形状的TCP/IP协议族</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230527161627162.png" class title="image-20230527161627162">
<h1 id="物理层-1">物理层</h1>
<h2 id="基本概念">基本概念</h2>
<p>物理层考虑的是<strong>怎样</strong>才能在连接各种计算机的传输媒体上传输数据比特流，而<strong>不是指具体的传输媒体</strong></p>
<p>作用：尽可能<strong>屏蔽</strong>掉不同传输媒体和通信手段的差异</p>
<p>用于物理层的协议也常称为物理层规程 (procedure)</p>
<p>主要任务：确定与传输媒体的<strong>接口</strong>的一些特性</p>
<p><span class="math inline">\(\color{red}物理层四个特性\)</span>（串讲强调）</p>
<p>4 个特性：</p>
<p><strong>机械特性</strong>：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等</p>
<p><strong>电气特性</strong>：指明在接口电缆的各条线上出现的电压的范围</p>
<p><strong>功能特性</strong>：指明某条线上出现的某一电平的电压的意义</p>
<p><strong>过程特性</strong>：指明对于不同功能的各种可能事件的出现顺序</p>
<h2 id="数据通信的基础知识">数据通信的基础知识</h2>
<h3 id="数据通信系统的模型">数据通信系统的模型</h3>
<p>三大部分：<strong>源系统</strong>（或发送端、发送方）、<strong>传输系统</strong>（或传输网络）和<strong>目的系统</strong>（或接收端、接收方）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510101322111.png" class title="image-20230510101322111">
<p>消息(message)：如话音、文字、图像、视频等</p>
<p>数据 (data)： 运送消息的实体。有意义的符号序列</p>
<p>信号 (signal)：数据的电气的或电磁的表现</p>
<p>模拟信号 (analogous signal)：代表消息的参数的取值是连续的</p>
<p>数字信号 (digital signal)：代表消息的参数的取值是离散的</p>
<p>码元：在使用时间域（简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形</p>
<p>使用二进制编码时，只有两种不同的码元：0 状态，1 状态</p>
<h3 id="有关信道的概念">有关信道的概念</h3>
<p>信道：一般用来表示向某一个方向传送信息的媒体</p>
<p>基带信号（即基本频带信号）：来自<strong>信源</strong>的信号。包含有较多的低频成分，甚至有直流成分</p>
<p>调制：</p>
<p><strong>基带调制</strong>：仅对基带信号的波形进行变换，把<strong>数字信号转换为另一种形式的数字信号</strong>(数字转数字)。把这种过程称为<strong>编码</strong>
(coding)</p>
<p><strong>带通调制</strong>：使用载波
(carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并<strong>转换为模拟信号</strong>。经过载波调制后的信号称为<strong>带通信号</strong>（即仅在一段频率范围内能够通过信道）</p>
<h4 id="信道分类">信道分类</h4>
<p>单向通信（<strong>单工通信</strong>）：只能有一个方向的通信，没有反方向的交互</p>
<p>双向交替通信（<strong>半双工通信</strong>）：通信的双方都可以发送信息，但双方<strong>不能同时</strong>发送（当然也就不能同时接收）</p>
<p>双向同时通信（<strong>全双工通信</strong>）：通信的双方<strong>可以同时</strong>发送和接收信息</p>
<h4 id="常用编码方式">常用编码方式</h4>
<h5 id="编码方式">编码方式</h5>
<p><span class="math inline">\(\color{red}常用编码方式\)</span>(串讲强调)</p>
<p>不归零制：正电平代表 1，负电平代表 0</p>
<p>归零制：正脉冲代表 1，负脉冲代表 0</p>
<p>曼彻斯特编码：位周期中心的向上跳变代表 0，位周期中心的向下跳变代表
1。但也可反过来定义</p>
<p>差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表
0，而位开始边界没有跳变代表 1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510102041448.png" class title="image-20230510102041448">
<h5 id="编码方式对比">编码方式对比</h5>
<p>信号频率：</p>
<p>曼彻斯特编码和差分曼彻斯特编码产生的信号频率比不归零制高</p>
<p>自同步能力：</p>
<p>不归零制<strong>不能</strong>从信号波形本身中提取信号时钟频率（这叫做<strong>没有自同步能力</strong>）</p>
<p>曼彻斯特编码和差分曼彻斯特编码<strong>具有自同步能力</strong></p>
<h4 id="基本的带通调制方法">基本的带通调制方法</h4>
<p>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量，必须对基带信号进行调制
(modulation)</p>
<p>最基本的调制方法有以下几种：</p>
<p><strong>调幅(AM)</strong> ：载波的振幅随基带数字信号而变化</p>
<p><strong>调频(FM)</strong> ：载波的频率随基带数字信号而变化</p>
<p><strong>调相(PM)</strong> ：载波的初始相位随基带数字信号而变化</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510102355601.png" class title="image-20230510102355601">
<h3 id="信道的极限容量">信道的极限容量</h3>
<p>数字信号通过实际的信道，会导致失真</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510102444044.png" class title="image-20230510102444044">
<p>任何实际的信道都<strong>不是理想</strong>的，都<strong>不可能</strong>以任意高的速率进行传送</p>
<p>码元传输的速率越高，或信号传输的距离越远，或噪声干扰越大，或传输媒体质量越差，在接收端的波形的<strong>失真就越严重</strong></p>
<h4 id="限制码元在信道上的传输速率的两个因素">限制码元在信道上的传输速率的两个因素</h4>
<p>限制码元在信道上的传输速率的两个因素：信道能够通过的频率范围，信噪比</p>
<h5 id="信道能够通过的频率范围">信道能够通过的频率范围</h5>
<p>具体的信道所能通过的频率范围总是有限的，信号中的许多高频分量往往不能通过信道</p>
<p><strong>码间串扰</strong>：接收端收到的信号波形<strong>失去了</strong>码元之间的清晰界限</p>
<p>奈氏准则：码元传输的<strong>最高</strong>速率 = 2W （码元/秒）</p>
<p>超过奈氏准则会产生<strong>码间串扰</strong></p>
<p>在带宽为 W (Hz)
的低通信道中，若不考虑噪声影响，则码元传输的最高速率是 2W
(码元/秒)。传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的判决（即识别）成为不可能</p>
<h5 id="信噪比">信噪比</h5>
<p>信噪比就是<strong>信号的平均功率</strong>和<strong>噪声的平均功率</strong>之比。常记为
S/N，并用分贝 (dB) 作为度量单位 <span class="math display">\[
\begin{align*}
信噪比(dB) = 10 \log_{10}(\frac{S}{N}) \quad (dB)
\end{align*}
\]</span></p>
<p>例如：当 S/N =10 时，信噪比为10dB，而当 S/N =1000
时，信噪比为30dB</p>
<h4 id="香农公式">香农公式</h4>
<p>信道的极限信息传输速率 C 可表达为 <span class="math display">\[
\begin{align*}
C=W\log_2(1+\frac{S}{N}) \quad (bit/s)
\end{align*}
\]</span> W 信道的带宽 (Hz)</p>
<p>S 为信道内所传信号的平均功率</p>
<p>N 为信道内部的高斯噪声功率</p>
<p>信道的带宽或信道中的<strong>信噪比越大</strong>，则信息的<strong>极限传输速率就越高</strong></p>
<p>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输</p>
<h4 id="提高信息的传输速率的方法">提高信息的传输速率的方法</h4>
<p>方法：用编码的方法让每一个码元携带更多比特的信息量</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510103806517.png" class title="image-20230510103806517">
<h4 id="奈氏准则和香农公式对比">奈氏准则和香农公式对比</h4>
<p>奈氏准则：激励工程人员不断探索更加先进的编码技术，使每一个码元携带更多比特的信息量（超过上限2W会码间串扰）</p>
<p>香农公式：告诫工程人员，在实际有噪声的信道上，不论采用多么复杂的编码技术，都不可能突破信息传输速率的绝对极限</p>
<h2 id="物理层下面的传输媒体">物理层下面的传输媒体</h2>
<p>传输媒体是数据传输系统中在<strong>发送器和接收器之间</strong>的<strong>物理通路</strong></p>
<p>分为两大类：</p>
<p>导引型传输媒体：电磁波被导引沿着固体媒体（铜线或光纤）传播</p>
<p>非导引型传输媒体：指自由空间。非导引型传输媒体中电磁波的传输常称为<strong>无线传输</strong></p>
<h3 id="引导型传输媒体">引导型传输媒体</h3>
<h4 id="双绞线">双绞线</h4>
<p>最古老但又最常用的传输媒体</p>
<p>把两根互相绝缘的铜导线并排放在一起，然后用规则的方法<strong>绞合</strong>
(twist)
起来就构成了双绞线，<strong>绞合度越高，可用的数据传输率越高</strong></p>
<p>分为两大类：无屏蔽双绞线 UTP，屏蔽双绞线 STP</p>
<p>UTP：无屏蔽层，价格较便宜</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510104627760.png" class title="image-20230510104627760">
<p>STP：带屏蔽层，都必须有接地线</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510104638402.png" class title="image-20230510104638402">
<p>无论是哪种类别的双绞线，衰减都随频率的升高而增大</p>
<p>双绞线的最高速率还与数字信号的编码方法有很大的关系</p>
<p>双绞线标准 EIA/TIA-568</p>
<p>568-A，568-B标准</p>
<h4 id="同轴电缆">同轴电缆</h4>
<p>由内导体铜质芯线（单股实心线或多股绞合线）、绝缘层、网状编织的外导体屏蔽层（也可以是单股的）以及保护塑料外层所组成</p>
<p>具有很好的抗干扰特性，被广泛用于传输较高速率的数据</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510104729191.png" class title="image-20230510104729191">
<h4 id="光纤">光纤</h4>
<p>光纤是光纤通信的传输媒体。通过传递光脉冲来进行通信，其传输带宽远远大于目前其他各种传输媒体的带宽</p>
<p>发送端：要有光源（发光二极管，半导体激光器等），在电脉冲的作用下能产生出光脉冲</p>
<p>接收端：要有光检测器，利用光电二极管做成，在检测到光脉冲时还原出电脉冲</p>
<p>光线在纤芯中传输的方式是不断地全反射</p>
<h5 id="多模光纤">多模光纤</h5>
<p>可以存在多条不同角度入射的光线在一条光纤中传输</p>
<p>光脉冲在多模光纤中传输时会逐渐展宽，造成失真，只适合于近距离传输</p>
<h5 id="单模光纤">单模光纤</h5>
<p>其直径减小到只有一个光的波长（几个微米），可使光线一直向前传播，而不会产生多次反射</p>
<p>制造成本较高，但衰耗较小</p>
<p>光源要使用昂贵的半导体激光器，不能使用较便宜的发光二极管</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510105342807.png" class title="image-20230510105342807">
<h5 id="光缆">光缆</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510105444579.png" class title="image-20230510105444579">
<h5 id="优点">优点</h5>
<p>通信容量非常大</p>
<p>传输损耗小，中继距离长，对远距离传输特别经济</p>
<p>抗雷电和电磁干扰性能好</p>
<p>无串音干扰，保密性好，不易被窃听或截取数据</p>
<p>体积小，重量轻</p>
<h3 id="非导引型传输媒体">非导引型传输媒体</h3>
<p>利用无线电波在自由空间的传播可较快地实现多种通信，因此将自由空间称为“非导引型传输媒体”</p>
<p>无线电微波通信在空间主要是<strong>直线</strong>传播</p>
<h4 id="多径效应">多径效应</h4>
<p>基站发出的信号可以经过多个障碍物的数次反射，从多条路径、按不同时间等到达接收方。多条路径的信号<strong>叠加</strong>后一般都会产生很大的失真，这就是所谓的<strong>多径效应</strong></p>
<h4 id="微波接力">微波接力</h4>
<p><strong>微波接力</strong>：中继站把前一站送来的信号<strong>放大后</strong>再发送到下一站</p>
<p>特点：通信信道的容量很大，微波传输质量较高，建设投资少，见效快，易于实施</p>
<p>缺点：相邻站之间必须直视，没有障碍物，否则存在多径效应；受到恶劣气候的影响；微波通信的隐蔽性和保密性较差；使用和维护要耗费较多的人力和物力</p>
<h4 id="卫星通信">卫星通信</h4>
<p>通信容量大，通信距离远，通信比较稳定，通信费用与通信距离无关，但<strong>传播时延较大</strong>：在
250~300 ms之间</p>
<p>请注意：“卫星信道的传播时延较大”并不等于“用卫星信道传送数据的时延（传输时延）较大”</p>
<p>保密性相对较差，造价较高</p>
<h2 id="信道复用技术">信道复用技术</h2>
<p><strong>复用</strong> (multiplexing)
：允许用户使用一个共享信道进行通信</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510110419960.png" class title="image-20230510110419960">
<p>（串讲强调）</p>
<p><span class="math inline">\(\color{red}常用信道复用技术：频分复用，时分复用，波分复用，码分复用\)</span></p>
<h3 id="频分复用">频分复用</h3>
<p>频分复用 FDM (Frequency Division Multiplexing)</p>
<p><strong>最基本</strong></p>
<p>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中<strong>自始至终</strong>都占用这个频带</p>
<p>所有用户在同样的时间占用<strong>不同的</strong>带宽（即频带）资源</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510110723289.png" class title="image-20230510110723289">
<h3 id="时分复用">时分复用</h3>
<p>时分复用 TDM (Time Division Multiplexing)</p>
<p>将时间划分为一段段<strong>等长的</strong>时分复用帧（TDM帧）</p>
<p>每一个时分复用的用户在每一个 TDM
帧中占用固定序号的<strong>时隙</strong></p>
<p>每一个用户所占用的时隙是<strong>周期性</strong>地出现（其周期就是TDM帧的长度）的</p>
<p>TDM 信号也称为<strong>等时</strong> (isochronous) 信号</p>
<p>所有用户在不同的时间占用<strong>同样的</strong>频带宽度</p>
<p>时分复用会导致<strong>信道利用率不高</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510110846142.png" class title="image-20230510110846142">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510111019666.png" class title="image-20230510111019666">
<h3 id="频分多址与时分多址">频分多址与时分多址</h3>
<p>可让 N
个用户<strong>各使用</strong>一个频带，或让更多的用户<strong>轮流</strong>使用这
N 个频带。这种方式称为<strong>频分多址接入 FDMA</strong> (Frequency
Division Multiple Access)，简称为<strong>频分多址</strong></p>
<p>可让 N 个用户各使用一个时隙，或让更多的用户轮流使用这 N
个时隙。这种方式称为<strong>时分多址接入 TDMA</strong> (Time Division
Multiple Access)，简称为<strong>时分多址</strong></p>
<h3 id="波分复用">波分复用</h3>
<p>波分复用 WDM (Wavelength Division Multiplexing)
：光的频分复用。使用一根光纤来<strong>同时传输</strong>多个光载波信号</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510111126361.png" class title="image-20230510111126361">
<h3 id="码分复用">码分复用</h3>
<p>每一个用户可以在<strong>同样的时间使用同样的频带</strong>进行通信</p>
<p>各用户使用经过特殊挑选的<strong>不同码型</strong>，因此不会造成干扰</p>
<p>当<strong>码分复用 CDM</strong> (Code Division Multiplexing)
信道为多个不同地址的用户所共享时，就称为<strong>码分多址 CDMA</strong>
(Code Division Multiple Access)</p>
<h2 id="数字传输系统">数字传输系统</h2>
<p>早期，电话网长途干线采用<strong>频分复用 FDM</strong>
的模拟传输方式</p>
<p>目前，大都采用<strong>时分复用 PCM（Pulse Code Modulation）</strong>
的<strong>数字传输方式（脉冲编码调制）</strong></p>
<p>现代电信网业务括话音、视频、图像和各种数据业务。因此需要一种能承载来自其他<strong>各种业务网络数据</strong>的传输网络</p>
<p>在数字化的同时，<strong>光纤</strong>开始成为长途干线最主要的传输媒体</p>
<h3 id="早期数字传输系统的缺点">早期数字传输系统的缺点</h3>
<p><strong>速率标准不统一</strong></p>
<p><strong>不是同步传输</strong></p>
<h3 id="同步光纤网">同步光纤网</h3>
<p>同步光纤网 SONET (Synchronous Optical Network)</p>
<p>各级时钟都来自一个非常精确的主时钟</p>
<p>为光纤传输系统定义了<strong>同步传输</strong>的线路速率等级结构</p>
<p>传输速率以 <strong>51.84 Mbit/s</strong> 为基础</p>
<h3 id="同步数字系列">同步数字系列</h3>
<p>同步数字系列 SDH (Synchronous Digital Hierarchy)</p>
<p>与 SONET 的主要不同：SDH 的基本速率为 155.52 Mbit/s</p>
<h2 id="宽带接入技术">宽带接入技术</h2>
<p>从宽带接入的媒体来看，划分为 2 大类：</p>
<p>有线宽带接入</p>
<p>无线宽带接入</p>
<p>(串讲强调)</p>
<p><span class="math inline">\(\color{red}常用宽带接入技术：ADSL,
光纤同轴混合网，FTTx\)</span></p>
<h3 id="adsl技术">ADSL技术</h3>
<p>非对称数字用户线 ADSL (Asymmetric Digital Subscriber Line)
技术：用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务</p>
<p>ADSL 技术把 0~4 kHz
低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用</p>
<p><strong>非对称</strong>：下行（从 ISP
到用户）带宽<strong>远大于</strong>上行（从用户到 ISP）带宽</p>
<h4 id="adsl-调制解调器">ADSL 调制解调器</h4>
<p>采用<strong>离散多音调 DMT</strong>（Discrete
Multi-Tone）调制技术</p>
<p>DMT 调制技术采用<strong>频分复用 FDM</strong> 方法</p>
<p>相当于在一对用户线上使用许多小的调制解调器<strong>并行地</strong>传送数据</p>
<p>ADSL <strong>不能</strong>保证固定的数据率</p>
<h4 id="adsl组成">ADSL组成</h4>
<p><strong>3 大组成部分：</strong></p>
<p><strong>数字用户线接入复用器 DSLAM（DSL Access
Multiplexer），用户线，用户家中的一些设施</strong></p>
<h4 id="adsl好处">ADSL好处</h4>
<p>可以利用现有电话网中的用户线（铜线），而不需要重新布线</p>
<h3 id="光纤同轴混合网hfc-网">光纤同轴混合网（HFC 网）</h3>
<p>HFC (Hybrid Fiber Coax) 网基于有线电视网 CATV 网</p>
<p><strong>改造</strong>：把原有线电视网中的同轴电缆主干部分改换为光纤</p>
<p>HFC 网具有双向传输功能，扩展了传输频带</p>
<h4 id="机顶盒与电缆调制解调器set-top-box">机顶盒与电缆调制解调器（set-top
box）</h4>
<p>机顶盒（set-top box）：</p>
<p>连接在同轴电缆和用户的电视机之间</p>
<p>使现有的模拟电视机能够接收数字电视信号</p>
<p><br></p>
<p>电缆调制解调器（cable modem）：</p>
<p>将用户计算机接入互联网</p>
<p>在上行信道中传送交互数字电视所需的一些信息</p>
<p>不需要成对使用，而只需安装在用户端</p>
<p>复杂，必须解决共享信道中可能出现的冲突问题</p>
<h3 id="fttx技术">FTTx技术</h3>
<p>代表多种宽带光纤接入方式</p>
<p>FTTx 表示 Fiber To The…（光纤到…）</p>
<p>光纤到户 FTTH (Fiber To The
Home)：在光纤进入用户的家门后，才把光信号转换为电信号</p>
<p>光纤到小区 FTTZ (Fiber To The Zone)等</p>
<h4 id="光配线网-odn-optical-distribution-network">光配线网 ODN (Optical
Distribution Network)</h4>
<p>光配线网 ODN (Optical Distribution
Network)：位于光纤干线和广大用户之间</p>
<p>无源的光配线网常称为无源光网络 PON (Passive Optical Network)</p>
<p>采用<strong>波分复用
WDM</strong>，上行和下行分别使用<strong>不同的波长</strong></p>
<p>2 种最流行的无源光网络 PON (Passive Optical Network)</p>
<p>以太网无源光网络 EPON (Ethernet PON)</p>
<p>吉比特无源光网络 GPON (Gigabit PON)</p>
<h1 id="数据链路层-1">数据链路层</h1>
<h2 id="数据链路层信道类型">数据链路层信道类型</h2>
<p>点对点信道：使用一对一的<strong>点对点</strong>通信方式</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510171458119.png" class title="image-20230510171458119">
<p>广播信道：使用一对多的<strong>广播通信</strong>方式，必须使用专用的<strong>共享信道协议</strong>来协调这些主机的数据发送</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510171505033.png" class title="image-20230510171505033">
<h2 id="数据链路层地位">数据链路层地位</h2>
<p>网络中的主机、路由器等都必须实现数据链路层</p>
<p>局域网中的主机、交换机等都必须实现数据链路层</p>
<p>注意：不同的链路层可能采用不同的数据链路层协议</p>
<h2 id="使用点对点信道的数据链路层">使用点对点信道的数据链路层</h2>
<h3 id="数据链路和帧">数据链路和帧</h3>
<p>链路 (link)
：一条无源的点到点的物理线路段，中间<strong>没有任何其他的交换结点</strong>，一条链路只是一条通路的一个组成部分</p>
<p>或物理链路</p>
<p>数据链路 (data
link)：把实现控制数据传输的协议的硬件和软件加到链路上，就构成了数据链路</p>
<p>或逻辑链路</p>
<p>典型实现：适配器（即网卡）</p>
<p>数据链路层协议数据单元：帧</p>
<h3 id="三个基本问题">三个基本问题</h3>
<p>（串讲强调）</p>
<p><span class="math inline">\(\color{red}数据链路层三个基本问题：封装成帧，透明传输，差错控制\)</span></p>
<h4 id="封装成帧">封装成帧</h4>
<p>封装成帧
(framing)：在一段数据的前后分别添加<strong>首部和尾部</strong>，构成一个帧</p>
<p>首部和尾部的一个重要作用就是进行<strong>帧定界</strong>（即确定帧的界限）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510171946242.png" class title="image-20230510171946242">
<p><strong>最大传送单元 MTU</strong> (Maximum Transfer Unit)
：规定了所能传送的帧的<strong>数据部分</strong>长度上限</p>
<h5 id="用控制字符作为帧定界符">用控制字符作为帧定界符</h5>
<p>控制字符 SOH (Start Of Header) 放在一帧的最前面，表示帧的首部开始</p>
<p>控制字符 EOT (End Of Transmission) 放在一帧的末尾，表示帧的结束</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510172132854.png" class title="image-20230510172132854">
<h4 id="透明传输">透明传输</h4>
<p>问题：如果数据中的某个字节的二进制代码恰好和 SOH 或 EOT
一样，数据链路层就会<strong>错误</strong>地“找到帧的边界”，导致错误</p>
<p>即数据部分恰好出现与 EOT 一样的代码</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510172210994.png" class title="image-20230510172210994">
<p>透明的概念： 指某一个实际存在的事物看起来却好像不存在一样</p>
<p>“在数据链路层透明传送数据”表示：无论发送什么样的比特组合的数据，这些数据都能够<strong>按照原样没有差错</strong>地通过这个数据链路层。</p>
<p>用<strong>“字节填充”或“字符填充”</strong>法解决透明传输的问题</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510172354080.png" class title="image-20230510172354080">
<h4 id="差错控制">差错控制</h4>
<p>在传输过程中可能会产生比特差错：1 <span class="math inline">\(\rightarrow\)</span> 0， 0 <span class="math inline">\(\rightarrow\)</span> 1</p>
<p>在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率 BER (Bit
Error Rate)</p>
<h5 id="循环冗余检验-crc-cyclic-redundancy-check-原理">循环冗余检验 CRC
(Cyclic Redundancy Check) 原理</h5>
<p>在发送端，先把<strong>数据划分为组</strong>，假定每组 k 个比特</p>
<p>CRC 运算在每组 M <strong>后面</strong>再添加供差错检测用的 n
位<strong>冗余码</strong>，然后构成一个帧发送出去。一共发送 <strong>(k +
n)</strong> 位</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510173449476.png" class title="image-20230510173449476">
<h5 id="crc冗余码计算">CRC冗余码计算</h5>
<p>（串讲强调）</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1V4411Z7VA">CRC校验演示</a>，manim动画太牛逼了</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510174120495.png" class title="image-20230510174120495">
<h6 id="ppt上的讲法">PPT上的讲法</h6>
<p>原始数据和除数都是给定的</p>
<p>n=除数的位数-1</p>
<p>1，用二进制的模 2 运算进行 <span class="math inline">\(2^n\)</span>
乘 M 的运算，这<strong>相当于在 M 后面添加 n 个 0</strong></p>
<p>2，得到的 (k + n) 位的数<strong>除以</strong>事先选定好的长度为 (n +
1) 位的除数 P，得出商是 Q ，<strong>余数</strong>是 R，余数 R 比除数 P
少 1 位，即 R 是 n 位</p>
<p>3，将<strong>余数 R</strong> 作为冗余码拼接在数据 M
后面，一起发送出去。</p>
<h6 id="视频里的讲法">视频里的讲法</h6>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230510213213834.png" class title="image-20230510213213834">
<p>视频的讲法更易懂</p>
<p>先从多项式得到CRC除数，从最低位开始向右写系数即可</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511194728926.png" class title="image-20230511194728926">
<p>再在源数据末尾加0，多项式最高次为多少就加几个0</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511194850427.png" class title="image-20230511194850427">
<p>最后用加过0的数据串除除数即可，这里用异或作为每一位的运算</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195020471.png" class title="image-20230511195020471">
<p>最后保留多项式最高次项位数，这里保留6位</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195109616.png" class title="image-20230511195109616">
<p>将其作为FCS加在源数据后面</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195144094.png" class title="image-20230511195144094">
<p><strong>注意</strong>：最后的冗余码位数一定与多项式最高次项位数一致，如果位数不够，就在前面补上0</p>
<h6 id="一个示例">一个示例</h6>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195348154.png" class title="image-20230511195348154">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195337162.png" class title="image-20230511195337162">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511195400087.png" class title="image-20230511195400087">
<p>在数据后面添加上的冗余码称为<strong>帧检验序列 FCS</strong> (Frame
Check Sequence)</p>
<p>循环冗余检验 CRC 和帧检验序列 FCS <strong>并不等同</strong></p>
<p>CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码</p>
<p>FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法</p>
<h6 id="注意">注意</h6>
<p>最后的冗余码位数一定与多项式最高次项位数一致，如果位数不够，就在前面补上0</p>
<p>仅用循环冗余检验 CRC 差错检测技术只能做到<strong>无差错接受</strong>
(accept)</p>
<p>即：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1
的概率认为这些帧在传输过程中没有产生差错”</p>
<p>即：“凡是接收端数据链路层接受的帧均无差错”</p>
<p>“无比特差错”与“无传输差错”是不同的</p>
<p>可靠传输：数据链路层的发送端发送什么，在接收端就收到什么</p>
<p>传输差错可分为两大类：</p>
<p>比特差错</p>
<p>传输差错：帧丢失、帧重复或帧失序等</p>
<p>数据链路层使用 CRC
检验，能够实现无比特差错的传输，但这还不是可靠传输</p>
<p>要做到可靠传输，还必须再加上<strong>帧编号、确认和重传等机制</strong></p>
<h2 id="点对点协议-ppp">点对点协议 PPP</h2>
<h3 id="ppp协议的特点">PPP协议的特点</h3>
<p>对于点对点的链路，<strong>目前使用得最广泛</strong>的数据链路层协议是<strong>点对点协议
PPP</strong> (Point-to-Point Protocol）</p>
<p>用户到 ISP 的链路使用 PPP 协议</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511200101826.png" class title="image-20230511200101826">
<h4 id="ppp协议的需求">PPP协议的需求</h4>
<p>1，<strong>简单 ——首要要求</strong></p>
<p>2，封装成帧 —— 必须规定特殊的字符作为帧定界符</p>
<p>3，透明性 —— 必须保证数据传输的透明性</p>
<p>4，多种网络层协议 —— 能够在同一条物理链路上同时支持多种网络层协议</p>
<p>5，多种类型链路 —— 能够在多种类型的链路上运行</p>
<p>6，差错检测 —— 能够对接收端收到的帧进行检测，并立即丢弃有差错的帧</p>
<p>7，检测连接状态 —— 能够及时自动检测出链路是否处于正常工作状态</p>
<p>8，最大传送单元 —— 必须对每一种类型的点对点链路设置最大传送单元 MTU
的标准默认值，促进各种实现之间的互操作性</p>
<p>9，网络层地址协商 ——
必须提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址</p>
<p>10，数据压缩协商 —— 必须提供一种方法来协商使用数据压缩算法</p>
<h4 id="ppp-协议不需要的功能">PPP 协议不需要的功能</h4>
<p>纠错 :
PPP协议<strong>只进行检错</strong>，也就是说PPP协议是<strong>不可靠传输协议</strong></p>
<p>流量控制 :
<strong>端到端的流量控制由TCP负责</strong>，PPP协议不必重复</p>
<p>序号 : PPP不是可靠传输协议，因此不需要使用帧的序号</p>
<p>多点线路 :
PPP协议不支持多点线路，<strong>只支持点对点的链路通信</strong></p>
<p>半双工或单工链路 : PPP协议<strong>只支持全双工链路</strong></p>
<h4 id="ppp-协议的组成">PPP 协议的组成</h4>
<p>三个组成部分：</p>
<p>一个将 IP 数据报<strong>封装</strong>到串行链路的方法</p>
<p>一个<strong>链路控制协议 LCP</strong> (Link Control Protocol)</p>
<p>一套<strong>网络控制协议 NCP</strong> (Network Control Protocol)</p>
<h3 id="ppp协议的帧格式">PPP协议的帧格式</h3>
<p>PPP 是<strong>面向字节</strong>的，所有的 PPP
帧的长度都是<strong>整数字节</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511200459250.png" class title="image-20230511200459250">
<h4 id="各字段的意义">各字段的意义</h4>
<p><strong>首部：4 个字段</strong></p>
<p>标志字段 F： 0x7E
。连续两帧之间只需要用一个标志字段，长度为1个字节</p>
<p>地址字段 A：只置为 0xFF。实际上不起作用，长度为1个字节</p>
<p>控制字段 C：通常置为 0x03，长度为1个字节</p>
<p>协议字段，长度为2个字节</p>
<p>尾部：2 个字段</p>
<p>FCS使用CRC校验码，长度为2个字节</p>
<p>PPP 有一个 2 个字节的协议字段：其值</p>
<p>若为 0x0021，则信息字段就是 IP 数据报</p>
<p>若为 0x8021，则信息字段是网络控制数据</p>
<p>若为 0xC021，则信息字段是 PPP 链路控制数据</p>
<p>若为 0xC023，则信息字段是鉴别数据</p>
<h4 id="解决透明传输问题">解决透明传输问题</h4>
<p>当 PPP 用在异步传输时，使用<strong>字节填充法</strong>：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511201136693.png" class title="image-20230511201136693">
<p>当 PPP 用在同步传输链路时，采用<strong>零比特填充法</strong>：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511201145409.png" class title="image-20230511201145409">
<h3 id="ppp协议的工作状态">PPP协议的工作状态</h3>
<p>PPP 链路初始化过程：</p>
<p>用户拨号接入 ISP 后，就建立了一条从用户个人电脑到 ISP 的物理连接</p>
<p>用户个人电脑向 ISP 发送一系列的<strong>链路控制协议 LCP
分组</strong>（封装成多个 PPP 帧），以便建立LCP连接</p>
<p>之后进行网络层配置。<strong>网络控制协议 NCP</strong>
给新接入的用户个人电脑分配一个临时的 IP 地址</p>
<p>当用户通信完毕时，NCP
<strong>释放</strong>网络层连接，收回原来分配出去的IP地址。LCP
<strong>释放</strong>数据链路层连接。最后<strong>释放</strong>的是物理层的连接</p>
<p>PPP 协议的状态图：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511201259892.png" class title="image-20230511201259892">
<h2 id="使用广播信道的数据链路层">使用广播信道的数据链路层</h2>
<h3 id="局域网的数据链路层">局域网的数据链路层</h3>
<p>局域网最主要的特点：</p>
<p>网络为一个单位所拥有</p>
<p>地理范围和站点数目均有限</p>
<p>局域网具有如下主要优点：</p>
<p>具有广播功能，从一个站点可很方便地访问全网</p>
<p>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变</p>
<p>提高了系统的可靠性、可用性和生存性</p>
<p>局域网拓扑结构：</p>
<p>星星网</p>
<p>总线网</p>
<p>环形网</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511202224558.png" class title="image-20230511202224558">
<h4 id="共享信道带来的问题">共享信道带来的问题</h4>
<p>问题：若多个设备在共享的广播信道上<strong>同时发送</strong>数据，则会造成彼此干扰，导致发送失败</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511202300215.png" class title="image-20230511202300215">
<h4 id="媒体共享技术">媒体共享技术</h4>
<p>静态划分信道：</p>
<p>频分复用</p>
<p>时分复用</p>
<p>波分复用</p>
<p>码分复用</p>
<p>动态媒体接入控制（多点接入）：</p>
<p>随机接入：所有的用户可随机地发送信息</p>
<p>受控接入：用户必须服从一定的控制，如轮询(polling)</p>
<h4 id="以太网的两个标准">以太网的两个标准</h4>
<p>DIX Ethernet V2：世界上第一个局域网产品（以太网）的规约</p>
<p>IEEE 802.3：第一个 IEEE 的以太网标准</p>
<p>以太网：局域网的一种技术，最普遍的局域网技术</p>
<p>这两种标准的硬件实现可以在同一个局域网上互操作</p>
<p>这两个标准标准只有很小的差别，因此很多人也常把
802.3局域网简称为“以太网”</p>
<p>局域网数据链路层分为2个子层</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511202519679.png" class title="image-20230511202519679">
<p>逻辑链路控制 LLC (Logical Link Control) 子层：与传输媒体无关</p>
<p>媒体接入控制 MAC (Medium Access Control) 子层：与传输媒体有关</p>
<h4 id="适配器的作用">适配器的作用</h4>
<p>进行串行/并行转换</p>
<p>对数据进行缓存</p>
<p>在计算机的操作系统安装设备驱动程序</p>
<p>实现以太网协议</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511202630678.png" class title="image-20230511202630678">
<p>计算机通过适配器和局域网进行通信</p>
<h3 id="csmacd-协议">CSMA/CD 协议</h3>
<p>最早的以太网：将许多计算机都连接到<strong>一根总线</strong>上</p>
<p>总线<strong>特点</strong>：易于实现广播通信，简单，可靠</p>
<p>为了实现<strong>一对一</strong>通信，将接收站的硬件地址写入帧<strong>首部中的目的地址</strong>字段中</p>
<p>仅当数据帧中的目的地址与适配器硬件<strong>地址一致</strong>时，才能接收这个数据帧</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511202949969.png" class title="image-20230511202949969">
<p>总线<strong>缺点</strong>：多个站点同时发送时，会产生发送<strong>碰撞或冲突</strong>，导致发送失败</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203049744.png" class title="image-20230511203049744">
<h4 id="以太网采取的-2-种重要措施">以太网采取的 2 种重要措施</h4>
<ol type="1">
<li>采用较为灵活的<strong>无连接的工作方式</strong></li>
</ol>
<p>不必先建立连接就可以直接发送数据</p>
<p>对发送的数据帧<strong>不进行编号</strong>，也不要求对方发回确认</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203244887.png" class title="image-20230511203244887">
<ol start="2" type="1">
<li>发送的数据都使用<strong>曼彻斯特</strong> (Manchester) 编码</li>
</ol>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203254366.png" class title="image-20230511203254366">
<p>曼彻斯特编码<strong>缺点</strong>：所占的频带宽度比原始的基带信号<strong>增加了一倍</strong></p>
<h4 id="csmacd-协议的要点">CSMA/CD 协议的要点</h4>
<p>CSMA/CD (Carrier Sense Multiple Access with Collision Detection)
：<strong>载波监听多点接入 / 碰撞检测</strong></p>
<p><strong>多点接入</strong>：说明这是总线型网络。许多计算机以多点接入的方式连接在一根总线上</p>
<p><strong>载波监听</strong>：即“边发送边监听”。不管在想要发送数据之前，还是在发送数据之中，每个站都必须不停地检测信道</p>
<p><strong>碰撞检测</strong>：适配器边发送数据，边检测信道上的信号电压的变化情况。电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞（或冲突）</p>
<h4 id="检测到碰撞后">检测到碰撞后</h4>
<p>适配器<strong>立即停止</strong>发送，等待一段<strong>随机</strong>时间后再次发送</p>
<h4 id="csmacd-协议工作流程">CSMA/CD 协议工作流程</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203533432.png" class title="image-20230511203533432">
<h4 id="进行碰撞检测的原因">进行碰撞检测的原因</h4>
<p>因为信号<strong>传播时延</strong>对载波监听产生了影响</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203614327.png" class title="image-20230511203614327">
<p>A 需要<strong>单程传播时延的 2 倍</strong>的时间，才能检测到与 B
的发送产生了冲突</p>
<p>可见：每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性</p>
<h4 id="争用期">争用期</h4>
<p>以太网的端到端往返时延 <span class="math inline">\(2\tau\)</span>
称为<strong>争用期</strong>，或<strong>碰撞窗口</strong></p>
<p>具体的争用期时间 <span class="math inline">\(= 51.2 \mu
s\)</span></p>
<p>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送<strong>不会发生碰撞</strong></p>
<h4 id="碰撞后重传的时机">碰撞后重传的时机</h4>
<p>采用截断二进制指数退避 (truncated binary exponential backoff)
确定</p>
<p>发生碰撞的站停止发送数据后，要<strong>退避</strong>一个随机时间后再发送数据</p>
<p>基本退避时间 : <span class="math inline">\(2\tau\)</span></p>
<p>从整数集合 <span class="math inline">\([0, 1, … , (2^k - 1)]\)</span>
中<strong>随机</strong>地取出一个数，记为 <span class="math inline">\(r\)</span></p>
<p><strong><span class="math inline">\(重传所需的时延 = r \times
基本退避时间\)</span></strong></p>
<p>参数 <span class="math inline">\(k = Min[重传次数, 10]\)</span></p>
<p>当重传达 16
次仍不能成功时即<strong>丢弃该帧</strong>，并向高层报告</p>
<p>重传时机举例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511204325857.png" class title="image-20230511204325857">
<p>若连续多次发生冲突，表明可能有<strong>较多</strong>的站参与争用信道</p>
<p>上述退避算法可使重传需要推迟的平均时间随重传次数而增大（称为<strong>动态退避</strong>），因而减小发生碰撞的概率，有利于整个系统的稳定</p>
<h3 id="使用集线器的星形拓扑">使用集线器的星形拓扑</h3>
<p>传统以太网传输媒体：粗同轴电缆 <span class="math inline">\(\rightarrow\)</span> 细同轴电缆 <span class="math inline">\(\rightarrow\)</span> 双绞线</p>
<p>采用双绞线的以太网采用<strong>星形拓扑</strong></p>
<p>在星形的中心则增加了一种可靠性非常高的设备，叫做<strong>集线器</strong>
(hub)</p>
<p>传统以太网使用同轴电缆，采用总线形拓扑结构</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511204938461.png" class title="image-20230511204938461">
<p>采用双绞线的以太网采用星形拓扑</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511204950401.png" class title="image-20230511204950401">
<p>每个站到集线器的距离不超过100 m</p>
<p>1990 年，IEEE 制定出采用双绞线的星形以太网 10BASE-T 的标准 802.3i</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511205017619.png" class title="image-20230511205017619">
<h4 id="集线器的一些特点">集线器的一些特点</h4>
<p>使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个<strong>传统的以太网</strong>那样运行</p>
<p>使用集线器的以太网在<strong>逻辑上仍是一个总线网</strong>，各工作站使用的还是
CSMA/CD 协议，并共享逻辑上的总线</p>
<p>很像一个多接口的转发器，<strong>工作在物理层</strong></p>
<p>采用了<strong>专门芯片</strong>，进行自适应串音回波抵消，减少了近端串音</p>
<h3 id="以太网的信道利用率">以太网的信道利用率</h3>
<p>多个站在以太网上同时工作就可能会发生碰撞，当发生碰撞时，信道资源实际上是被浪费了。因此，当扣除碰撞所造成的信道损失后，<strong>以太网总的信道利用率并不能达到
100%</strong></p>
<p>假设：单程端到端传播时延 <span class="math inline">\(= \tau\)</span>
，则争用期长度 <span class="math inline">\(= 2\tau\)</span>
。检测到碰撞后不发送干扰信号</p>
<p>设：帧长 <span class="math inline">\(= L (bit)\)</span>，数据发送速率
<span class="math inline">\(= C (bit/s)\)</span>，则帧的发送时间 <span class="math inline">\(T_0 = L/C (s)\)</span></p>
<h4 id="以太网信道被占用的情况">以太网信道被占用的情况</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511223947180.png" class title="image-20230511223947180">
<p>注意：成功发送一个帧需要占用信道的时间是 <span class="math inline">\(T_0 + \tau\)</span>
，比帧的发送时间要多一个单程端到端时延 <span class="math inline">\(\tau\)</span></p>
<h4 id="参数-a-与利用率">参数 a 与利用率</h4>
<p>要提高以太网的信道利用率，就必须减小 <span class="math inline">\(\tau\)</span> 与 <span class="math inline">\(T_0\)</span> 之比</p>
<p>在以太网中定义了参数 a = 以太网单程端到端时延 <span class="math inline">\(\tau\)</span> 与帧的发送时间 <span class="math inline">\(T_0\)</span> 之比： <span class="math display">\[
\begin{align*}
a=\frac{\tau}{T_0}
\end{align*}
\]</span> <span class="math inline">\(a \rightarrow
0\)</span>，表示一发生碰撞就立即可以检测出来，
并立即停止发送，因而信道利用率很高</p>
<p><strong><span class="math inline">\(a\)</span>
越大</strong>，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低</p>
<h4 id="对以太网参数-a-的要求">对以太网参数 a 的要求</h4>
<p>为提高利用率，以太网的参数 a 的值应当<strong>尽可能小</strong>些</p>
<p>当数据率一定时，以太网的连线的<strong>长度受到限制</strong>，否则
<span class="math inline">\(tau\)</span> 的数值会太大</p>
<p>以太网的<strong>帧长不能太短</strong>，否则 <span class="math inline">\(T_0\)</span> 的值会太小，使 a 值太大</p>
<h4 id="信道利用率的最大值-smax">信道利用率的最大值 Smax</h4>
<p><span class="math display">\[
\begin{align*}
S_{max}&amp;=\frac{T_0}{T_0+\tau}\\\\
&amp;=\frac{1}{1+a}
\end{align*}
\]</span></p>
<p>只有当参数 <strong>a 远小于 1</strong>
才能得到尽可能高的极限信道利用率</p>
<p>据统计，当以太网的利用率达到 30%
时就已经处于<strong>重载</strong>的情况</p>
<h3 id="以太网的-mac-层">以太网的 MAC 层</h3>
<h4 id="mac层的硬件地址">MAC层的硬件地址</h4>
<p><strong>硬件地址</strong>又称为<strong>物理地址</strong>，或
<strong>MAC 地址</strong></p>
<p>IEEE 802 标准为局域网规定了一种 48
位的全球地址（简称为地址）是指局域网上的每一台计算机中<strong>固化在适配器的
ROM 中的地址</strong></p>
<p><strong>注意</strong>：如果连接在局域网上的主机或路由器安装有多个适配器，这样的主机或路由器就有多个“地址”。更准确些说，这种
48 位“地址”应当是某个<strong>接口的标识符</strong></p>
<h5 id="位的mac地址">48位的MAC地址</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511225443432.png" class title="image-20230511225443432">
<p>IEEE 注册管理机构 RA 负责向厂家分配<strong>前 3 个字节</strong> (即高
24 位)，称为<strong>组织唯一标识符 OUI</strong> (Organizationally Unique
Identifier)</p>
<p>厂家自行指派<strong>后 3 个字节</strong> (即低 24
位)，称为<strong>扩展标识符</strong> (extended identifier)</p>
<p>必须保证生产出的适配器<strong>没有重复地址</strong></p>
<p>地址被<strong>固化</strong>在适配器的 ROM 中</p>
<h5 id="单站地址组地址广播地址">单站地址，组地址，广播地址</h5>
<p>IEEE 规定地址字段的第 1 字节的最低位为 I/G (Individual / Group)
位</p>
<p><strong>单站地址</strong>：I/G 位 = 0</p>
<p><strong>组地址</strong>：I/G 位 =
1，组地址用来进行<strong>多播</strong></p>
<p><strong>广播地址</strong>：所有 48 位都为 1（全
1），<strong>只能作为目的地址使用</strong></p>
<h5 id="全球管理与本地管理">全球管理与本地管理</h5>
<p>IEEE 把地址字段第 1 字节的最低第 2 位规定为 G/L (Global / Local)
位</p>
<p><strong>全球管理</strong>：G/L 位 = 0。厂商向 IEEE 购买的 OUI
都属于全球管理</p>
<p><strong>本地管理</strong>：G/L 位 = 1。
这时用户可任意分配网络上的地址</p>
<h5 id="适配器具有过滤功能">适配器具有过滤功能</h5>
<p>每收到一个 MAC 帧，先用硬件检查帧中的 MAC 地址</p>
<p>如果是<strong>发往本站</strong>的帧则收下，然后再进行其他的处理</p>
<p>否则就将此帧丢弃，不再进行其他的处理</p>
<p>“发往本站的帧”包括以下三种：</p>
<p>单播 (unicast)帧（一对一）</p>
<p>广播 (broadcast)帧（一对全体）</p>
<p>多播 (multicast)帧（一对多）</p>
<p>以<strong>混杂方式</strong> (promiscuous mode)
工作的以太网适配器只要“听到”有帧在以太网上传输就<strong>都接收</strong>下来</p>
<h4 id="mac帧的格式">MAC帧的格式</h4>
<p>常用的以太网 MAC 帧格式有 2 种标准：</p>
<p>DIX Ethernet V2 标准</p>
<p>IEEE 的 802.3 标准</p>
<p><strong>最常用的 MAC 帧是以太网 V2 的格式</strong></p>
<h5 id="以太网-v2-的-mac-帧格式">以太网 V2 的 MAC 帧格式</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511230128229.png" class title="image-20230511230128229">
<p>有效MAC帧：数据字段46-1500字节</p>
<p>无效的 MAC 帧：</p>
<p>数据字段的长度与长度字段的值不一致、</p>
<p>帧的长度不是整数个字节</p>
<p>用收到的帧检验序列 FCS 查出有差错</p>
<p>数据字段的长度不在 46 ~ 1500 字节之间</p>
<p>有效的 MAC 帧长度为 64 ~ 1518 字节之间</p>
<p>对于检查出的无效 MAC 帧就简单地<strong>丢弃</strong></p>
<p>以太网<strong>不负责重传</strong>丢弃的帧</p>
<p>IEEE 802.3 MAC 与以太网 V2 MAC 帧格式的区别</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230512164124841.png" class title="image-20230512164124841">
<p>当“长度/类型”字段值大于 0x0600 时，表示“类型”；小于 0x0600
时，表示“长度”</p>
<p>当“长度/类型”字段值小于 0x0600 时，数据字段必须装入逻辑链路控制 LLC
子层的 LLC 帧</p>
<p>在 802.3 标准的文档中，MAC 帧格式包括了 8
字节的前同步码和帧开始定界符</p>
<p>现在市场上流行的都是以太网 V2 的 MAC 帧，但大家也常常把它称为 IEEE
802.3 标准的 MAC 帧</p>
<h2 id="扩展的以太网">扩展的以太网</h2>
<h3 id="在物理层扩展以太网">在物理层扩展以太网</h3>
<p>物理层扩展以太网方法：光纤，集线器</p>
<p>使用光纤扩展</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230512164954231.png" class title="image-20230512164954231">
<p>使用集线器扩展</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230512165003694.png" class title="image-20230512165003694">
<h4 id="用集线器扩展以太网优缺点">用集线器扩展以太网优缺点</h4>
<p>优点</p>
<p>使原来属于不同碰撞域（冲突域）的计算机能够跨碰撞域通信</p>
<p>扩大了以太网覆盖的地理范围</p>
<p>缺点</p>
<p>碰撞域增大了，总的吞吐量未提高</p>
<p>如果使用不同的以太网技术（如数据率不同），那么就不能用集线器将它们互连起来</p>
<h4 id="碰撞域">碰撞域</h4>
<p><strong>碰撞域</strong>（collision
domain）又称为<strong>冲突域</strong>，指网络中一个站点发出的帧会与其他站点发出的帧产生碰撞或冲突的那部分网络</p>
<p>碰撞域越大，发生碰撞的概率越高</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513163419480.png" class title="image-20230513163419480">
<h3 id="在数据链路层扩展以太网">在数据链路层扩展以太网</h3>
<p>（串讲强调）</p>
<p>数据链路层扩展以太网方法：以太网交换机</p>
<p>更为常用。早期使用网桥，现在使用<strong>以太网交换机</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513163448805.png" class title="image-20230513163448805">
<h4 id="网桥与以太网交换机">网桥与以太网交换机</h4>
<h5 id="网桥">网桥</h5>
<p>工作在数据链路层</p>
<p>根据MAC帧的目的地址对收到的帧进行转发和过滤，或者转发，或者丢弃</p>
<h5 id="交换机">交换机</h5>
<p>工作在数据链路层</p>
<p>多端口的网桥</p>
<p>明显提高以太网性能</p>
<h4 id="以太网交换机的特点">以太网交换机的特点</h4>
<p>实质上是一个<strong>多接口网桥</strong>，通常有十几个或更多的接口</p>
<p>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在<strong>全双工</strong>方式</p>
<p>以太网交换机具有<strong>并行性</strong></p>
<p>能同时连通多对接口，使多对主机能同时通信</p>
<p>相互通信的主机都独占传输媒体，无碰撞地传输数据</p>
<p>每一个端口和连接到端口的主机构成了一个碰撞域</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513163739284.png" class title="image-20230513163739284">
<p>接口有<strong>存储器</strong></p>
<p><strong>即插即用</strong>，其内部的<strong>帧交换表</strong>（又称为地址表）是通过<strong>自学习算法</strong>自动地逐渐建立起来的。这种交换表就是一个内容可寻址存储器CAM
(Content addressable Memory)</p>
<p>使用<strong>专用的交换结构芯片</strong>，用硬件转发，其转发速率要比使用软件转发的网桥快很多</p>
<p>以太网交换机的性能远远超过普通的集线器，而且价格并不贵</p>
<h4 id="以太网交换机的优点">以太网交换机的优点</h4>
<p>集线器：</p>
<p>N 个用户共享集线器提供的带宽 B</p>
<p>平均每个用户仅占有 B/N 的带宽</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513164108713.png" class title="image-20230513164108713">
<p>交换机：</p>
<p>交换机为每个端口提供带宽 B</p>
<p>N 个用户，每个用户独占带宽 B</p>
<p>交换机总容量达 B × N</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513164130139.png" class title="image-20230513164130139">
<h4 id="以太网交换机的交换方式">以太网交换机的交换方式</h4>
<p>存储转发方式：把整个数据帧<strong>先缓存</strong>，再进行处理</p>
<p>直通 (cut-through) 方式</p>
<p>接收数据帧的<strong>同时</strong>立即按数据帧的目的 MAC
地址决定该帧的转发接口</p>
<p>缺点：<strong>不检查差错</strong>就直接将帧转发出去，有可能转发无效帧</p>
<h4 id="以太网交换机的自学习功能">以太网交换机的自学习功能</h4>
<p>（串讲强调）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513164547955.png" class title="image-20230513164547955">
<p>开始时，交换表是空的</p>
<p>A 先向 B 发送一帧。该帧从接口 1 进入到交换机</p>
<p>交换机收到帧后，先查找交换表。没有查到应从哪个接口转发这个帧给 B</p>
<p>交换机把这个帧的源地址 A 和接口 1 写入交换表中</p>
<p>交换机向除接口 1 以外的所有的接口广播这个帧</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513164731161.png" class title="image-20230513164731161">
<p>由于与该帧的目的地址不相符，C 和 D 将丢弃该帧</p>
<p>B 向 A 发送一帧。该帧从接口 3 进入到交换机</p>
<p>交换机收到帧后，先查找交换表。发现交换表中的 MAC 地址有
A，表明要发送给 A 的帧应从接口 1 转发出去。于是就把这个帧传送到接口 1
转发给 A</p>
<p>交换机把这个帧的源地址 B 和接口 3 写入交换表中</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513164742932.png" class title="image-20230513164742932">
<p><br></p>
<p>考虑到可能有时要在交换机的接口更换主机，或者主机要更换其网络适配器，这就需要更改交换表中的项目。为此，在交换表中每个项目都设有一定的<strong>有效时间</strong>，过期的项目就自动被删除</p>
<p>这种<strong>自学习</strong>方法使得以太网交换机能够即插即用，<strong>不必人工进行配置</strong></p>
<p>2 台以太网交换机互连，可能存在“回路”问题，导致数据帧循环绕圈</p>
<p>消除回路：使用生成树协议（SPT）</p>
<p><strong>生成树协议 STP</strong> (Spanning Tree Protocol) 要点：</p>
<p><strong>不改变</strong>网络的实际拓扑，但在<strong>逻辑上</strong>则切断某些链路，使得从一台主机到所有其他主机的路径是<strong>无环路的树状结构</strong>，从而消除了兜圈子现象</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513165409283.png" class title="image-20230513165409283">
<h4 id="从总线以太网到星形以太网">从总线以太网到星形以太网</h4>
<p>早期：无源总线结构</p>
<p>使用CSMA/CD协议，半双工模式工作</p>
<p>现在：以太网交换机为中心的星形结构</p>
<p>不使用共享总线，没有碰撞问题，不使用CSMA/CD协议，全双工工作</p>
<p>仍采用以太网帧结构</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513165840905.png" class title="image-20230513165840905">
<h3 id="虚拟局域网">虚拟局域网</h3>
<p>针对交换机</p>
<h4 id="以太网存在问题">以太网存在问题</h4>
<p>广播风暴</p>
<p>安全问题</p>
<p>管理困难等</p>
<h5 id="广播风暴">广播风暴</h5>
<p>一个以太网是一个广播域</p>
<p>广播域（broadcast
domain）：指这样一部分网络，其中任何一台设备发出的广播通信都能被该部分网络中的所有其他设备所接收</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170111659.png" class title="image-20230513170111659">
<p>交换机之间的冗余链路形成广播风暴</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170154653.png" class title="image-20230513170154653">
<h5 id="安全问题">安全问题</h5>
<p>交换机每个接口都处于一个<strong>独立的碰撞域</strong>（或冲突域）中，但所有计算机都处于<strong>同一个广播域中</strong>，无法隔离不同部门的通信</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170255879.png" class title="image-20230513170255879">
<h4 id="虚拟局域网-vlan">虚拟局域网 VLAN</h4>
<p>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)</p>
<p>IEEE 802.1Q 对虚拟局域网 VLAN 的定义：</p>
<p><strong>虚拟局域网 VLAN</strong>
是由一些局域网网段构成的<strong>与物理位置无关的逻辑组</strong>，而这些网段具有某些共同的需求。每一个
VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个
VLAN</p>
<p>虚拟局域网其实只是局域网给用户提供的<strong>一种服务</strong>，并<strong>不是</strong>一种新型局域网</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170454835.png" class title="image-20230513170454835">
<p>B1 发送数据时，VLAN1 和 VLAN3 中的工作站 A1，A2 和 C1 等都不会收到 B1
发出的广播信息</p>
<p>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息
(即“广播风暴”) 而引起性能恶化</p>
<h4 id="虚拟局域网优点">虚拟局域网优点</h4>
<p>虚拟局域网（VLAN）技术具有以下主要优点：</p>
<p>改善了性能</p>
<p>简化了管理</p>
<p>降低了成本</p>
<p>改善了安全性</p>
<h4 id="划分虚拟局域网的方法">划分虚拟局域网的方法</h4>
<p>基于交换机端口</p>
<p>基于计算机网卡的 MAC 地址</p>
<p>基于协议类型</p>
<p>基于 IP 子网地址</p>
<p>基于高层应用或服务</p>
<h4 id="虚拟局域网使用的以太网帧格式">虚拟局域网使用的以太网帧格式</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170639992.png" class title="image-20230513170639992">
<p>标准以太网帧插入 <strong>4 字节的 VLAN 标记</strong>后变成了 802.1Q
帧（或<strong>带标记</strong>的以太网帧）</p>
<p>以太网 MAC 帧的最大帧长从原来的 1518 字节变为 1522 字节</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513170748079.png" class title="image-20230513170748079">
<h2 id="高速以太网">高速以太网</h2>
<h3 id="base-t-以太网">100BASE-T 以太网</h3>
<p>又称为<strong>快速以太网 (Fast Ethernet)</strong></p>
<p>在双绞线上传送 100 Mbit/s 基带信号的星形拓扑以太网</p>
<p>仍使用 IEEE 802.3 的 CSMA/CD 协议</p>
<p>1995 定为正式标准：IEEE 802.3u</p>
<p>特点：</p>
<p>可在<strong>全双工</strong>方式下工作而无冲突发生</p>
<p>在全双工方式下工作时，<strong>不使用 CSMA/CD 协议</strong></p>
<p>使用 <strong>IEEE 802.3 协议规定的 MAC 帧格式</strong></p>
<p>保持最短帧长不变，但将一个网段的最大电缆长度<strong>减小到 100
米</strong></p>
<p>帧间时间间隔从原来的 <span class="math inline">\(9.6 \mu s\)</span>
改为现在的 <span class="math inline">\(0.96\mu s\)</span></p>
<p>（串讲强调）</p>
<p><span class="math inline">\(\color{red}100 Mbit/s 以太网的 3
种不同的物理层标准\)</span></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516195132099.png" class title="image-20230516195132099">
<h3 id="吉比特以太网">吉比特以太网</h3>
<p>特点：</p>
<p>允许在 1 Gbit/s 下以全双工和半双工 <strong>2 种方式</strong>工作</p>
<p>使用 <strong>IEEE 802.3 协议规定的 MAC 帧格式</strong></p>
<p>在<strong>半双工</strong>方式下使用 CSMA/CD
协议，而在<strong>全双工</strong>方式不使用 CSMA/CD 协议</p>
<p>与 10BASE-T 和 100BASE-T 技术<strong>向后兼容</strong></p>
<p>将争用时间增大为 512 字节</p>
<h3 id="吉比特以太网-10ge-和更快的以太网">10 吉比特以太网 (10GE)
和更快的以太网</h3>
<p>特点：</p>
<p>万兆比特</p>
<p>与 10、100 Mbit/s 和 1 Gbit/s
以太网的<strong>帧格式完全相同</strong></p>
<p>保留了 IEEE 802.3 标准规定的以太网最小和最大帧长</p>
<p><strong>只使用光纤</strong>作为传输媒体</p>
<p><strong>只工作在全双工方式</strong>，没有争用问题，<strong>不使用
CSMA/CD 协议</strong></p>
<h3 id="使用以太网进行宽带接入">使用以太网进行宽带接入</h3>
<p>特点：</p>
<p>可以提供<strong>双向</strong>的宽带通信</p>
<p>可以根据用户对带宽的需求灵活地进行<strong>带宽升级</strong></p>
<p>可以实现端到端的以太网传输，中间<strong>不需要再进行帧格式的转换</strong></p>
<p>但<strong>不支持</strong>用户身份鉴别</p>
<h1 id="网络层-1">网络层</h1>
<h2 id="网络层提供的两种服务">网络层提供的两种服务</h2>
<p>网络层的主要任务是通过路由选择算法，为分组通过互联网络选择适当的路径</p>
<p>网络层要实现路由选择与网络互联等基本功能</p>
<p>网络层使用了数据链路层的服务，同时向运输层的端到端传输连接提供服务</p>
<p>争论：让网络负责可靠交付和网络提供数据报服务</p>
<h3 id="让网络负责可靠交付">让网络负责可靠交付</h3>
<p>计算机网络模仿电信网络，使用面向连接的通信方式</p>
<p>通信之前先建立<strong>虚电路</strong> VC (Virtual Circuit)
(即连接)，以保证双方通信所需的一切网络资源</p>
<h4 id="虚电路服务">虚电路服务</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513172441695.png" class title="image-20230513172441695">
<h3 id="网络提供数据报服务">网络提供数据报服务</h3>
<p>网络层要设计得尽量<strong>简单</strong>，向其上层只提供简单灵活的、<strong>无连接的</strong>、尽最大努力交付的数据报服务</p>
<p>由主机中的<strong>运输层</strong>负责可靠的通信</p>
<h4 id="数据报服务">数据报服务</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513172608749.png" class title="image-20230513172608749">
<h3 id="虚电路服务与数据报服务的对比">虚电路服务与数据报服务的对比</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513172709942.png" class title="image-20230513172709942">
<h3 id="网络层的两个层面">网络层的两个层面</h3>
<p>不同网络中的两个主机之间的通信，要经过若干个路由器转发分组来完成</p>
<p>在路由器之间传送的信息有以下 2 大类：</p>
<p>数据</p>
<p>路由信息（为数据传送服务）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513172858973.png" class title="image-20230513172858973">
<h4 id="数据层面">数据层面</h4>
<p>路由器根据本路由器生成的<strong>转发表</strong>，把收到的分组从查找到的对应接口<strong>转发</strong>出去</p>
<p><strong>独立</strong>工作</p>
<p>采用<strong>硬件</strong>进行转发，快</p>
<h4 id="控制层面">控制层面</h4>
<p>根据路由选择协议所用的路由算法<strong>计算路由</strong>，创建出本路由器的<strong>路由表</strong></p>
<p>许多路由器<strong>协同</strong>动作</p>
<p>采用<strong>软件</strong>计算，慢</p>
<p>软件定义网络 SDN 中远程控制器：</p>
<p><strong>计算</strong>出最佳的路由，在每一个路由器中<strong>生成</strong>其正确的转发表</p>
<h2 id="网际协议ip">网际协议IP</h2>
<p>网际协议IP是<strong>TCP/IP</strong>体系中两个最主要的协议之一，也是<strong>最重要的互联网标准协议之一</strong></p>
<p>(串讲强调)</p>
<p><span class="math inline">\(\color{red}与IP协议配套使用的还有三个协议: ARP,
ICMP, IGMP\)</span></p>
<p>地址解析协议ARP (Address Resolution Protocol)</p>
<p>网际控制报文协议ICMP (Internet Control Message Protocol)</p>
<p>网际组管理协议IGMP (Internet Group Management Protocol)</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230513173443894.png" class title="image-20230513173443894">
<h3 id="虚拟互连网络">虚拟互连网络</h3>
<p>网络互相连接起来要使用一些中间设备</p>
<p><strong>中间设备</strong>又称为<strong>中间系统</strong>或中继(relay)系统。根据中间设备所在的层次，可以有以下五种不同的中间设备：</p>
<p>物理层中继系统：转发器(repeater)</p>
<p>数据链路层中继系统：网桥或桥接器(bridge)</p>
<p>网络层中继系统：路由器(router)</p>
<p>网络层以上的中继系统：网关(gateway)</p>
<p>网桥和路由器的混合物：桥路器(brouter)</p>
<h4 id="网络互连是指使用路由器">网络互连是指使用路由器</h4>
<p>原因：</p>
<p>当中继系统是转发器或网桥时，一般并不称之为网络互连，因为这仅仅是把一个网络扩大了，而这仍然是一个网络</p>
<p>网关由于比较复杂，目前使用得较少</p>
<p>互联网都是指用<strong>路由器</strong>进行网络互连和路由选择</p>
<p>由于历史的原因，许多有关 TCP/IP
的文献将网络层使用的路由器称为网关</p>
<h4 id="互连网络与虚拟互连网络">互连网络与虚拟互连网络</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514103025865.png" class title="image-20230514103025865">
<h4 id="虚拟互连网络的意义">虚拟互连网络的意义</h4>
<p>所谓<strong>虚拟互连网络</strong>也就是<strong>逻辑互连网络</strong>，它的意思就是互连起来的各种物理网络的异构性本来是客观存在的，但是我们利用<strong>IP协议</strong>就可以使这些性能各异的网络从用户看起来好像是一个统一的网络</p>
<p>使用<strong>IP协议</strong>的虚拟互连网络可简称为<strong>IP网</strong></p>
<p><strong>使用虚拟互连网络的好处是</strong>：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节</p>
<p>如果在这种覆盖全球的IP网的上层使用<strong>TCP协议</strong>，那么就是现在的互联网
(Internet)</p>
<h4 id="分组在互联网中的传送">分组在互联网中的传送</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514103300327.png" class title="image-20230514103300327">
<p>互联网可以由多种异构网络互连组成</p>
<p>如果我们只从网络层考虑问题，那么IP数据报就可以想象是在网络层中传送</p>
<p>传输路径可以省略路由器之间的网络以及连接在这些网络上的许多无关主机，使问题的讨论更加简单</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514103450711.png" class title="image-20230514103450711">
<h3 id="ip地址">IP地址</h3>
<h4 id="ip层转发分组的过程">IP层转发分组的过程</h4>
<p>在 TCP/IP 体系中，IP 地址是一个<strong>最基本</strong>的概念</p>
<p>没有IP地址，就无法和网上的其他设备进行通信</p>
<h4 id="ip-地址及其表示方法">IP 地址及其表示方法</h4>
<p>IP 地址：<strong>32 位</strong>二进制代码</p>
<p>分为每 8 位为一组，将每 8
位的二进制数转换为十进制数，采用点分十进制记法</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514103935230.png" class title="image-20230514103935230">
<p>互联网上的每台主机（或路由器）的<strong>每个接口</strong>分配一个在<strong>全世界唯一</strong>的
IP 地址</p>
<p>由<strong>互联网名字和数字分配机构</strong> ICANN (Internet
Corporation for Assigned Names and Numbers) 进行分配</p>
<h5 id="ip地址采用两级结构">IP地址采用两级结构</h5>
<p>2 级结构，即2
个字段：<strong>网络号</strong>和<strong>主机号</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514104157791.png" class title="image-20230514104157791">
<p>IP地址在整个互联网范围内是<strong>唯一</strong>的</p>
<p>IP 地址指明了连接到某个网络上的一个主机</p>
<h4 id="分类的-ip-地址">分类的 IP 地址</h4>
<h5 id="标准分类">标准分类</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514105113117.png" class title="image-20230514105113117">
<p>D类E类用不到</p>
<p>规定A类前八位第一位是0</p>
<p>主机号和网络号都不能取全0或全1，这两个是特殊的，全0指网络号，全1是广播地址（出不了路由器）</p>
<p>即A类网络包含了<span class="math inline">\(2^7-2\)</span>个网络号，最大主机数为<span class="math inline">\(2^{24}-2\)</span></p>
<p>B类网络包含了<span class="math inline">\(2^{14}-1\)</span>个网络号，最大主机数为<span class="math inline">\(2^{16}-2\)</span></p>
<p>C类网络包含了<span class="math inline">\(2^{21}-1\)</span>个网络号，最大主机数为<span class="math inline">\(2^8-2\)</span></p>
<h5 id="各类-ip-地址的指派范围">各类 IP 地址的指派范围</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514111024043.png" class title="image-20230514111024043">
<p>注意：指派时要<strong>扣除</strong>全 0 和全 1 的主机号</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514112224342.png" class title="image-20230514112224342">
<h5 id="一般不使用的特殊-ip-地址">一般不使用的特殊 IP 地址</h5>
<p>(串讲强调)</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230514112253251.png" class title="image-20230514112253251">
<h5 id="分类的-ip-地址的优点和缺点">分类的 IP 地址的优点和缺点</h5>
<h6 id="优点-1">优点</h6>
<p>管理简单</p>
<p>使用方便</p>
<p>转发分组迅速</p>
<p>划分子网，灵活地使用</p>
<h6 id="缺点">缺点</h6>
<p>设计上不合理：</p>
<p>大地址块，<strong>浪费</strong>地址资源</p>
<p>即使采用划分子网的方法，也无法解决 IP
地址<strong>枯竭</strong>的问题</p>
<h4 id="无分类编址-cidr">无分类编址 CIDR</h4>
<p>CIDR (Classless Inter-Domain Routing) ：无分类域间路由选择</p>
<p>消除了传统的 A 类、B 类和 C
类地址以及划分子网的概念，可以更加有效地分配 IPv4
的地址空间，<strong>但无法解决 IP 地址枯竭的问题</strong></p>
<p>要点：</p>
<ol type="1">
<li><p>网络前缀</p></li>
<li><p>地址块</p></li>
<li><p>地址掩码</p></li>
</ol>
<h5 id="网络前缀">网络前缀</h5>
<p>CIDR 记法：<strong>斜线记法</strong> (slash notation)</p>
<p>a.b.c.d <strong>/ n</strong>：二进制 IP 地址的前 <strong>n</strong>
位是网络前缀</p>
<p>例如：128.14.35.7/20：前 20 位是网络前缀</p>
<p>2 级结构</p>
<p>2 个字段：网络前缀和主机号</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200155507.png" class title="image-20230516200155507">
<h5 id="地址块">地址块</h5>
<p>CIDR 把网络<strong>前缀都相同的所有</strong>连续的 IP 地址组成一个
CIDR 地址块</p>
<p>一个 CIDR 地址块包含的 IP 地址数目，取决于网络前缀的位数</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200251476.png" class title="image-20230516200251476">
<p>注意：</p>
<p>128.14.35.7/20：是 IP 地址，同时指明了网络前缀为 20 位，该地址是
128.14.32.0/20 地址块中的一个地址</p>
<p>128.14.32.0/20：是包含有多个 IP
地址的<strong>地址块</strong>，同时也是这个地址块中<strong>主机号为全 0
的 IP 地址</strong></p>
<p>128.14.35.7：是 IP 地址，但未指明网络前缀长度，不知道其网络地址</p>
<p>128.14.32.0：不能指明一个网络地址，因为无法知道网络前缀是多少</p>
<h5 id="地址掩码">地址掩码</h5>
<p>又称为子网掩码 (subnet mask)</p>
<p>位数：<strong>32 位</strong></p>
<p>目的：让机器从 IP 地址迅速算出网络地址</p>
<p>由一连串 1 和接着的一连串 0 组成，而 <strong>1
的个数就是网络前缀的长度</strong></p>
<p>/20 地址块的地址掩码：11111111 11111111 11110000 00000000</p>
<p>点分十进制记法：255.255.240.0</p>
<p>CIDR 记法：255.255.240.0/20</p>
<p>标准分类的地址掩码</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200528938.png" class title="image-20230516200528938">
<p>网络地址 = (二进制的 IP 地址) AND (地址掩码)</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200543488.png" class title="image-20230516200543488">
<p>例：已知 IP 地址是 128.14.35.7/20。求网络地址</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200620271.png" class title="image-20230516200620271">
<p>构造超网</p>
<p>每一个 CIDR 地址块中的地址数<strong>一定是 2 的整数次幂</strong></p>
<p>除最后几行外，CIDR 地址块都包含了多个 C 类地址（是一个 C 类地址的 2n
倍，n 是整数）</p>
<p>因此在文献中有时称 CIDR 编址为<strong>“构造超网”</strong></p>
<h5 id="三个特殊的cidr地址块">三个特殊的CIDR地址块</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200757757.png" class title="image-20230516200757757">
<h5 id="路由聚合">路由聚合</h5>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200839080.png" class title="image-20230516200839080">
<p>举例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516200907658.png" class title="image-20230516200907658">
<h4 id="ip-地址的特点">IP 地址的特点</h4>
<ol type="1">
<li>每个 IP 地址都由<strong>网络前缀和主机号</strong>两部分组成</li>
</ol>
<p>IP 地址是一种分等级的地址结构</p>
<p>方便了 IP 地址的分配和管理</p>
<p>实现路由聚合，减小了转发表所占的存储空间，以及查找转发表的时间</p>
<p><br></p>
<ol start="2" type="1">
<li>IP 地址是标志一台主机（或路由器）和一条链路的接口</li>
</ol>
<p>当一台主机同时连接到<strong>两个网络</strong>上时，该主机就必须同时具有两个相应的
IP
地址，<strong>其网络号必须是不同的</strong>。这种主机称为<strong>多归属主机</strong>
(multihomed host)</p>
<p>一个路由器<strong>至少应当连接到两个网络</strong>，因此一个路由器<strong>至少应当有两个不同的
IP 地址</strong></p>
<p><br></p>
<ol start="3" type="1">
<li>转发器或交换机连接起来的若干个<strong>局域网</strong>仍为一个网络</li>
</ol>
<p>按照互联网的观点，<strong>一个网络（或子网）是指具有相同网络前缀的主机的集合</strong></p>
<p>转发器或交换机连接起来的若干个局域网都具有同样的网络号，它们仍为一个网络</p>
<p>具有<strong>不同网络号</strong>的局域网必须使用<strong>路由器</strong>进行互连</p>
<p>交换机连的同一个网络，路由器连的不同网络</p>
<p><br></p>
<ol start="4" type="1">
<li>在 IP 地址中，所有分配到网络前缀的网络都是平等的</li>
</ol>
<p>互联网<strong>同等对待</strong>每一个 IP
地址，不管是范围很小的局域网，还是可能覆盖很大地理范围的广域网</p>
<p>注意：路由器的每个接口都有一个不同网络号的IP地址</p>
<h3 id="ip地址与mac地址">IP地址与MAC地址</h3>
<h4 id="ip地址-1">IP地址</h4>
<p>虚拟地址、软件地址、逻辑地址</p>
<p>网络层和以上各层使用</p>
<p>放在 IP 数据报的首部</p>
<p><br></p>
<h4 id="mac地址">MAC地址</h4>
<p>固化在网卡上的 ROM 中</p>
<p>硬件地址、物理地址</p>
<p>数据链路层使用</p>
<p>放在 MAC 帧的首部</p>
<p><br></p>
<h4 id="区别">区别</h4>
<p>IP 地址放在 IP 数据报的首部，MAC 地址则放在 MAC 帧的首部</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516201730214.png" class title="image-20230516201730214">
<p><br></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516201853856.png" class title="image-20230516201853856">
<p>如图，不同层次、不同区间使用的源地址和目的地址</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516201938656.png" class title="image-20230516201938656">
<p>传输过程中，IP始终不变，MAC一直在变</p>
<p>尽管互连在一起的网络的 MAC 地址体系各不相同，但 IP
层抽象的互联网却屏蔽了下层这些很复杂的细节</p>
<p>只要我们在网络层上讨论问题，就能够使用统一的、抽象的 IP
地址研究主机和主机或路由器之间的通信</p>
<h3 id="地址解析协议arp">地址解析协议ARP</h3>
<p>实现IP通信时使用了两个地址：</p>
<p>IP 地址（网络层地址）</p>
<p>MAC 地址（数据链路层地址）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516202548804.png" class title="image-20230516202548804">
<p>ARP作用：从 IP 地址解析出 MAC 地址</p>
<p>ARP 用于解决<strong>同一个局域网</strong>上的主机或路由器的 IP 地址和
MAC 地址的映射问题</p>
<h4 id="arp-高速缓存-arp-cache">ARP 高速缓存 (ARP cache)</h4>
<p>存放 IP 地址到 MAC 地址的映射表</p>
<p>映射表动态更新（新增或超时删除）</p>
<p>映射表：&lt; IP 地址；MAC 地址；生存时间 (Age)；类型等 &gt;</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516202751512.png" class title="image-20230516202751512">
<p><strong>超过生存时间的</strong>项目都从高速缓存中删除，以适应网络适配器变化</p>
<h4 id="arp工作">ARP工作</h4>
<p>当主机 A 欲向<strong>本局域网</strong>上的某个主机 B 发送 IP
数据报时：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516202827317.png" class title="image-20230516202827317">
<h4 id="arp-查找ip地址对应的mac地址">ARP 查找IP地址对应的MAC地址</h4>
<p><strong>本局域网上广播</strong>发送 ARP 请求（路由器不转发 ARP
请求）</p>
<p><strong>ARP 请求分组</strong>：包含发送方硬件地址 / 发送方 IP 地址 /
目标方硬件地址(未知时填 0) / 目标方 IP 地址</p>
<p><strong>单播</strong> ARP 响应分组：包含发送方硬件地址 / 发送方
IP地址 / 目标方硬件地址 / 目标方 IP 地址</p>
<p><strong>ARP 分组封装在以太网帧中传输</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203139634.png" class title="image-20230516203139634">
<p>注意广播和单播</p>
<h4 id="arp-高速缓存的作用">ARP 高速缓存的作用</h4>
<p>存放最近获得的 IP 地址到 MAC 地址的绑定</p>
<p>减少 ARP 广播的通信量</p>
<p>为进一步减少 ARP 通信量，主机 A 在发送其 ARP 请求分组时，就将自己的
IP 地址到 MAC 地址的映射写入 ARP 请求分组</p>
<p>当主机 B 收到 A 的 ARP 请求分组时，就将主机 A 的 IP 地址及其对应的
MAC 地址映射写入主机 B 自己的 ARP 高速缓存中，不必再发送 ARP 请求</p>
<p>ARP 用于解决<strong>同一个局域网</strong>上的主机或路由器的 IP 地址和
MAC 地址的映射问题</p>
<h4 id="若两台主机不在同一个局域网">若两台主机不在同一个局域网</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203517350.png" class title="image-20230516203517350">
<p>A先广播ARP，找路由器R1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203524218.png" class title="image-20230516203524218">
<p>路由器R1单播A</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203529645.png" class title="image-20230516203529645">
<p>路由器R1广播ARP，找B</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203537354.png" class title="image-20230516203537354">
<p>B单播路由器R1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516203542234.png" class title="image-20230516203542234">
<h4 id="使用-arp-的四种典型情况">使用 ARP 的四种典型情况</h4>
<p>1.发送方是<strong>主机</strong>，要把 IP
数据报发送到<strong>本网络上的另一个主机</strong>。这时用 ARP
找到目的主机的硬件地址</p>
<p>2.发送方是<strong>主机</strong>，要把 IP
数据报发送到<strong>另一个网络上的一个主机</strong>。这时用 ARP
找到<strong>本网络上的一个路由器</strong>的硬件地址。剩下的工作由这个路由器来完成</p>
<p>3.发送方是<strong>路由器</strong>，要把 IP
数据报转发到<strong>本网络上的一个主机</strong>。这时用 ARP
找到目的主机的硬件地址</p>
<p>4.发送方是<strong>路由器</strong>，要把 IP
数据报转发到<strong>另一个网络上的一个主机</strong>。这时用 ARP
找到本网络上另一个路由器的硬件地址。剩下的工作由这个路由器来完成</p>
<h4 id="为什么要使用两种地址">为什么要使用两种地址</h4>
<p>由于全世界存在着各式各样的网络，它们不同使用不同的 MAC 地址。MAC
地址之间的转换非常复杂</p>
<p>对以太网 MAC 地址进行寻址也是极其困难的</p>
<p><strong>IP 编址把这个复杂问题解决了</strong></p>
<p>连接到互联网的主机只需各自拥有一个唯一的 IP
地址，它们之间的通信就像连接在同一个网络上那样简单方便，即使必须多次调用
ARP 来找到 MAC
地址，但这个过程都是由计算机软件自动进行的，<strong>对用户来说是看不见的</strong></p>
<p>因此，在虚拟的 IP 网络上用 IP 地址进行通信非常方便</p>
<h3 id="ip数据报格式">IP数据报格式</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516204237576.png" class title="image-20230516204237576">
<p>版本：占 4 位，指 IP 协议的版本，目前的 IP 协议版本号为 4 (即
IPv4)</p>
<p>首部长度：占 4 位，可表示的最大数值是 15 个单位(一个单位为 4
字节)，因此 <strong>IP 的首部长度的最大值是 60 字节</strong></p>
<p>区分服务：占 8
位，用来获得更好的服务，在旧标准中叫做服务类型，但实际上一直未被使用过，1998
年这个字段改名为区分服务，只有在使用区分服务（DiffServ）时，这个字段才起作用，在一般的情况下都不使用这个字段</p>
<p>总长度：占 16
位，指<strong>首部和数据之和</strong>的长度，单位为字节，因此数据报的最大长度为
65535 字节，总长度必须不超过最大传送单元 MTU</p>
<p>标识(identification)：占 16
位，它是一个计数器，用来产生数据报的标识</p>
<p><br></p>
<p>标志(flag)：占 3 位，目前只有前两位有意义，分别是MF和DF</p>
<p>标志字段的最低位是 MF (More Fragment)，MF = 1 表示后面“还有分片”；MF
= 0 表示最后一个分片</p>
<p>标志字段中间的一位是 DF (Don't Fragment) ，只有当 DF = 0
时才允许分片</p>
<p><br></p>
<p>片偏移：12
位，指出：较长的分组在分片后某片在原分组中的相对位置，片偏移以 <strong>8
个字节为偏移单位</strong></p>
<p>片偏移例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516204946169.png" class title="image-20230516204946169">
<p><br></p>
<p>生存时间：8 位，记为 TTL (Time To
Live)，数据报在网络中<strong>可通过的路由器数</strong>的最大值</p>
<p><br></p>
<p>协议：8 位，指出此数据报携带的数据使用何种协议，以便目的主机的 IP
层将数据部分上交给哪个处理过程</p>
<p>协议字段例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516205318120.png" class title="image-20230516205318120">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516205324414.png" class title="image-20230516205324414">
<p><br></p>
<p>首部检验和：16
位，<strong>只检验数据报的首部</strong>，不检验数据部分，这里<strong>不采用</strong>
CRC 检验码而采用简单的计算方法</p>
<p>计算方法：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516210039661.png" class title="image-20230516210039661">
<p>数据报每经过一个路由器，路由器都要<strong>重新</strong>计算一下首部检验和</p>
<p><br></p>
<p>源地址和目的地址都各占 4 字节</p>
<h4 id="可变部分">可变部分</h4>
<p>IP
首部的可变部分就是一个选项字段，用来支持排错、测量以及安全等措施，内容很丰富</p>
<p>选项字段的长度可变，从 1 个字节到 40
个字节不等，取决于所选择的项目</p>
<p>增加首部的可变部分是为了增加 IP 数据报的功能，但这同时也使得 IP
数据报的首部长度成为可变的。这就增加了每一个路由器处理数据报的开销</p>
<p>实际上这些选项<strong>很少被使用</strong></p>
<h2 id="ip层转发分组的过程-1">IP层转发分组的过程</h2>
<h3 id="基于终点的转发">基于终点的转发</h3>
<p>分组在互联网中是<strong>逐跳转发</strong>的</p>
<p>基于终点的转发：基于分组首部中的<strong>目的地址</strong>传送和转发</p>
<p>为了压缩转发表的大小，转发表中最主要的路由是<strong>（目的网络地址，下一跳地址）</strong>
，而不是（目的地址，下一跳地址）</p>
<p><strong>查找转发表的过程就是逐行寻找前缀匹配</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211158281.png" class title="image-20230516211158281">
<p>举例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211550164.png" class title="image-20230516211550164">
<p>主机 H1 发送出的、目的地址是 128.1.2.132 的分组是如何转发的？</p>
<p>1.H1 首先检查 128.1.2.132
是否连接在<strong>本网络</strong>上，如果是，则直接交付；否则，就送交路由器
R1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211613257.png" class title="image-20230516211613257">
<p>2.路由器 R1 收到分组后查找转发表，先检查第 1 行</p>
<p>255.255.255.192 AND 128.1.2.132 = 128.1.2.128 /26，不匹配</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211802090.png" class title="image-20230516211802090">
<p>3.再检查第二行</p>
<p>255.255.255.128 AND 128.1.2.132 = 128.1.2.128 /25，匹配</p>
<p>进行分组的直接交付（通过路由器 R1 的接口 1）</p>
<h3 id="最长前缀匹配">最长前缀匹配</h3>
<p>使用 CIDR
时，在查找转发表时可能会得到<strong>不止一个匹配结果</strong></p>
<p><strong>最长前缀匹配</strong> (longest-prefix matching)
原则：选择<strong>前缀最长</strong>的一个作为匹配的前缀</p>
<p>网络前缀越长，其地址块就越小，因而路由就越具体</p>
<p>把前缀最长的排在转发表的第 1 行</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211550164.png" class title="image-20230516211550164">
<p>路由器 R1 如何转发目的地址是 128.1.2.194 的分组？</p>
<p>1.路由器 R1 收到分组后查找转发表，先检查第 1 行</p>
<p>255.255.255.192 AND 128.1.2.194 = 128.1.2.192 /26，匹配</p>
<p>2.接着检查第 2 行</p>
<p>255.255.255.128 AND 128.1.2.194 = 128.1.2.128 /25，匹配</p>
<p>3.接着检查第 3 行</p>
<p>255.255.255.192 AND 128.1.2.194 = 128.1.2.192 /26，不匹配</p>
<p>有两个匹配结果，问题：从哪个接口向外转发分组？</p>
<p>用接口0，即/26的，因为网络前缀长，路由更具体</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516212148591.png" class title="image-20230516212148591">
<h4 id="转发表中的-2-种特殊的路由">转发表中的 2 种特殊的路由</h4>
<p><strong>主机路由 (host route)</strong>
，又叫做<strong>特定主机路由</strong></p>
<p>是对特定目的主机的 IP 地址专门指明的一个路由</p>
<p>网络前缀就是 <strong>a.b.c.d/32</strong></p>
<p>放在转发表的<strong>最前面</strong></p>
<p><br></p>
<p><strong>默认路由 (default route)</strong></p>
<p>不管分组的最终目的网络在哪里，都由指定的路由器 R 来处理</p>
<p>用<strong>特殊前缀 0.0.0.0/0</strong> 表示</p>
<p>默认路由例子：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516213203733.png" class title="image-20230516213203733">
<h4 id="路由器分组转发算法">路由器分组转发算法</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516213234137.png" class title="image-20230516213234137">
<h3 id="使用二叉线索查找转发">使用二叉线索查找转发</h3>
<p><strong>二叉线索</strong> (binary
trie)：一种特殊结构的树，可以快速在转发表中找到匹配的叶节点</p>
<p>从二叉线索的根节点<strong>自顶向下</strong>的深度最多有
<strong>32</strong> 层，每一层对应于 IP 地址中的一位</p>
<p>为简化二叉线索的结构，可以用<strong>唯一前缀</strong> (unique prefix)
来构造二叉线索</p>
<p>为了提高二叉线索的查找速度，广泛使用了各种<strong>压缩</strong>技术</p>
<p>例子：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516213658807.png" class title="image-20230516213658807">
<p>规则：先检查 IP 地址左边的第一位，如为
0，则第一层的节点就在根节点的左下方；如为
1，则在右下方。然后再检查地址的第二位，构造出第二层的节点。依此类推，直到唯一前缀的最后一位。每个叶节点代表一个唯一前缀</p>
<p>为检查网络前缀是否匹配，必须使二叉线索中的每一个叶节点<strong>包含</strong>所对应的网络前缀和子网掩码</p>
<p>若找到了一个叶节点</p>
<p>将目的 IP 地址和该叶节点的子网掩码进行按位 AND
运算，看结果是否与叶节点的网络前缀相匹配</p>
<p>若匹配，就按下一跳的接口转发该分组。否则，就丢弃该分组</p>
<p>若找不到，说明这个地址不在这个二叉线索中</p>
<p>检查是否存在默认路由。若有，把分组传送到指明的默认路由器，否则丢弃该分组</p>
<h2 id="网际控制报文协议icmp">网际控制报文协议ICMP</h2>
<p>ICMP (Internet Control Message Protocol)
允许主机或路由器<strong>报告差错</strong>情况和<strong>提供有关异常情况的报告</strong></p>
<p>ICMP 是互联网的<strong>标准协议</strong></p>
<p>但 ICMP 不是高层协议，而<strong>是 IP 层的协议</strong></p>
<p>ICMP报文装在IP数据报中，算IP数据报的数据部分</p>
<h3 id="icmp-报文的格式">ICMP 报文的格式</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516214058830.png" class title="image-20230516214058830">
<h3 id="icmp报文种类">ICMP报文种类</h3>
<p>（串讲强调）</p>
<p><span class="math inline">\(\color{red}各类型的值要记\)</span></p>
<p>ICMP报文有2 种：差错报告报文，询问报文</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516214229283.png" class title="image-20230516214229283">
<p>差错报告有四种：</p>
<p>终点不可达：路由器或主机不能交付数据报时，向源点发送</p>
<p>时间超过：路由器收到生存时间为0的数据报时，除丢弃以外，还要向源点发送时间超过报文；终点在预定时间内不能收到数据报的全部数据报片时，把已收集的数据报全部丢弃，还要向源点发送时间超过报文</p>
<p>参数问题：路由器或目的主机收到数据报的首部有字段值不正确，丢弃并发送</p>
<p>改变路由：路由器把改变路由报文发给主机</p>
<h4 id="icmp-差错报告报文的数据字段的内容">ICMP
差错报告报文的数据字段的内容</h4>
<p>把收到的需要差错报告的IP数据报<strong>首部和数据字段的前8个字节</strong>提取出来，作为ICMP报文的数据字段，再加上<strong>ICMP差错报告报文的前8个字节</strong>，就构成了ICMP差错报告报文</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516220238455.png" class title="image-20230516220238455">
<p>​</p>
<h4 id="不应发送-icmp-差错报告报文的几种情况">不应发送 ICMP
差错报告报文的几种情况</h4>
<p>对 ICMP 差错报告报文不再发送 ICMP 差错报告报文</p>
<p>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP
差错报告报文</p>
<p>对具有多播地址的数据报都不发送 ICMP 差错报告报文</p>
<p>对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报不发送 ICMP
差错报告报文</p>
<h4 id="常用icmp-询问报文">常用ICMP 询问报文</h4>
<ol type="1">
<li>回送请求和回答</li>
</ol>
<p>由主机或路由器向一个特定的目的主机发出的询问</p>
<p>收到此报文的主机必须给源主机或路由器发送 ICMP 回送回答报文</p>
<p>这种询问报文用来测试目的站是否可达，以及了解其有关状态</p>
<ol start="2" type="1">
<li>时间戳请求和回答：</li>
</ol>
<p>请某台主机或路由器回答当前的日期和时间</p>
<p>时间戳回答报文中有一个 32 位的字段，其中写入的整数代表从1900 年 1 月
1 日起到当前时刻一共有多少秒</p>
<p>时间戳请求与回答可用于时钟同步和时间测量</p>
<h3 id="icmp应用举例">ICMP应用举例</h3>
<p>PING (Packet InterNet Groper) ：分组网间探测</p>
<p>用来测试两个主机之间的<strong>连通性</strong></p>
<p>使用了 <strong>ICMP 回送请求与回送回答报文</strong></p>
<p>是应用层直接使用网络层 ICMP 的例子，没有通过运输层的 TCP 或 UDP</p>
<p>Traceroute</p>
<h2 id="ipv6">IPV6</h2>
<p>了解即可</p>
<p>使用隧道技术进行从 IPv4 到 IPv6 的过渡</p>
<h2 id="互联网的路由选择协议">互联网的路由选择协议</h2>
<h3 id="有关路由选择协议的几个概念">有关路由选择协议的几个概念</h3>
<h4 id="理想的路由算法">理想的路由算法</h4>
<p>算法必须是<strong>正确的和完整的</strong>。分组一定能够到达目的网络和目的主机</p>
<p><strong>算法在计算上应简单</strong> 不应增加太多的额外开销</p>
<p>算法应能适应通信量和网络拓扑的变化
这就是说，要有自适应性，有时也称为<strong>“稳健性”</strong></p>
<p>算法应具有<strong>稳定性</strong></p>
<p>算法应是<strong>公平的</strong></p>
<p>算法应是<strong>最佳的</strong></p>
<p><br></p>
<p>关于“最佳路由”</p>
<p>不存在一种绝对的最佳路由算法</p>
<p>所谓“最佳”只能是相对于某一种特定要求下得出的较为合理的选择而已</p>
<p><br></p>
<p>路由选择非常复杂</p>
<p>需要所有节点共同协调工作的</p>
<p>环境不断变化，而这种变化有时无法事先知道</p>
<p>当网络发生拥塞时，很难获得所需的路由选择信息</p>
<h4 id="路由算法分类">路由算法分类</h4>
<h5 id="静态路由选择策略">静态路由选择策略</h5>
<p>非自适应路由选择</p>
<p>不能及时适应网络状态的变化</p>
<p>简单，开销较小</p>
<h5 id="动态路由选择策略">动态路由选择策略</h5>
<p>自适应路由选择</p>
<p>能较好地适应网络状态的变化</p>
<p>实现较为复杂，开销较大</p>
<h4 id="分层次的路由选择协议">分层次的路由选择协议</h4>
<p>互联网：</p>
<p>采用<strong>自适应的</strong>（即动态的）、分布式路由选择协议</p>
<p>把整个互联网划分为许多较小的自治系统 AS，采用分层次的路由选择协议</p>
<p>分为 2 个层次：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517163100596.png" class title="image-20230517163100596">
<p>自治系统之间的路由选择 或 <strong>域间路由选择</strong> (interdomain
routing)</p>
<p>自治系统内部的路由选择 或 <strong>域内路由选择</strong> (intradomain
routing)</p>
<h5 id="自治系统">自治系统</h5>
<p>自治系统 AS (Autonomous System)
：是在单一技术管理下的许多网络、IP地址以及路由器，而这些路由器使用一种自治系统内部的路由选择协议和共同的度量。每一个
AS 对其他 AS
表现出的是一个<strong>单一的和一致的</strong>路由选择策略</p>
<h5 id="大类路由选择协议">2 大类路由选择协议</h5>
<p>内部网关协议 IGP</p>
<p>Interior Gateway Protocol</p>
<p>在一个自治系统内部使用的路由选择协议</p>
<p>常用：<strong>RIP</strong>，<strong>OSPF</strong></p>
<p>外部网关协议 EGP</p>
<p>External Gateway Protocol</p>
<p>在不同自治系统之间进行路由选择时使用的协议</p>
<p>使用最多：<strong>BGP-4</strong></p>
<p>自治系统之间的路由选择也叫做域间路由选择 (interdomain routing)</p>
<p>自治系统内部的路由选择叫做域内路由选择 (intradomain routing)</p>
<h3 id="内部网关协议rip">内部网关协议RIP</h3>
<p>RIP (Routing Information
Protocol)：路由信息协议，是一种<strong>分布式的、基于距离向量</strong>的路由选择协议</p>
<p>互联网的标准协议</p>
<p><strong>最大优点：简单</strong></p>
<p>要求网络中的每个路由器都要<strong>维护</strong>从它自己到其他每一个目的网络的<strong>距离记录</strong></p>
<p>RIP协议，即按固定时间间隔与相邻路由器交换信息，每次发送自己的路由表</p>
<h4 id="协议rip工作原理">协议RIP工作原理</h4>
<h5 id="rip距离的定义">RIP“距离”的定义</h5>
<p>路由器到<strong>直接连接</strong>的网络的距离 = 1</p>
<p>路由器到<strong>非直接连接</strong>的网络的距离 = 所经过的路由器数 +
1</p>
<p>RIP 协议中的“距离”也称为<strong>“跳数”</strong>(hop
count)，每经过一个路由器，跳数就加 1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517163541304.png" class title="image-20230517163541304">
<p>好路由 = “距离短”的路由</p>
<p><strong>最佳路由 =
“距离最短”的路由</strong>（如上图，最佳路由为A-B-E）</p>
<p>一条路径<strong>最多只能包含 15</strong> 个路由器</p>
<p>“距离”的<strong>最大值</strong>为 16
时即相当于<strong>不可达</strong></p>
<p>RIP
<strong>不能</strong>在两个网络之间同时使用多条路由，<strong>只选择</strong>距离最短的路由</p>
<h5 id="rip-协议的三个特点">RIP 协议的三个特点</h5>
<p>仅和<strong>相邻</strong>路由器交换信息</p>
<p>交换的信息是当前本路由器所知道的<strong>全部</strong>信息，即自己的路由表</p>
<p>按<strong>固定时间间隔</strong>交换路由信息，例如，每隔 30
秒。当网络拓扑发生变化时，路由器也及时向相邻路由器通告拓扑变化后的路由信息</p>
<h5 id="路由表的建立">路由表的建立</h5>
<p>路由器在刚刚开始工作时，路由表是空的</p>
<p>然后，得到<strong>直接连接</strong>的网络的距离（<strong>此距离定义为
1</strong>）</p>
<p>之后，每一个路由器也只和数目非常有限的相邻路由器<strong>交换并更新</strong>路由信息</p>
<p>经过若干次更新后，所有的路由器<strong>最终</strong>都会知道到达本自治系统中任何一个网络的最短距离和下一跳路由器的地址</p>
<p>RIP 协议的<strong>收敛</strong> (convergence)
过程较快。“收敛”就是在自治系统中所有的结点都得到正确的路由选择信息的过程</p>
<h5 id="路由表主要信息">路由表主要信息</h5>
<p>目的网络、距离（最短）、下一跳地址</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517164343872.png" class title="image-20230517164343872">
<h5 id="路由表更新规则">路由表更新规则</h5>
<p>使用<strong>距离向量算法</strong>找出到达每个目的网络的<strong>最短距离</strong></p>
<h4 id="距离向量算法">距离向量算法</h4>
<p>对<strong>每个相邻路由器</strong>（假设其地址为 X）发送过来的 RIP
报文，路由器：</p>
<ol type="1">
<li><p>修改此 RIP
报文中的<strong>所有项目</strong>：把“下一跳”字段中的地址都改为
X，并把所有的“距离”字段的值加
1。每一个项目都有三个关键数据：到目的网络N，距离是d，下一跳路由器是X</p></li>
<li><p>对修改后的RIP报文中每一个项目，进行以下步骤：</p></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(原来的路由表中没有目的网络N)</span><br><span class="line">&#123;</span><br><span class="line">    把该项目添加到路由表中</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>	<span class="comment">//即路由表中有目的网络N</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(下一跳路由器地址是X)</span><br><span class="line">    &#123;</span><br><span class="line">        把收到的项目替换原路由表中的项目</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>	<span class="comment">//即到目的网络N，但是下一跳不是X</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(收到的项目中距离d小于路由表中的距离)</span><br><span class="line">        &#123;</span><br><span class="line">            更新</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            什么也不做</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结一下：</p>
<p>先把发来的路由表全部距离+1，并且下一跳地址改为发来的路由器，即X</p>
<p>若发来的路由表中包含自己路由表<strong>没有的目的网络</strong>，则直接添加到自己的路由表中</p>
<p>若发来的路由表中含有自己路由表<strong>已有的目的网络</strong>，并且<strong>自己路由表中到这个目的网络的下一跳地址也是X</strong>，则直接更新自己的路由表（因为这是最新的消息，要以最新的消息为准，到，目的网络的距离可能增大，可能减小，也可能不变）</p>
<p>若下一跳地址不是X，则比较距离，更新表项为最小的距离对应的项目（若距离相同，则不更新）</p>
<p><br></p>
<ol start="3" type="1">
<li><p>若三分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达的路由器，即把距离设置为16</p></li>
<li><p>返回</p></li>
</ol>
<p>例子：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517171755700.png" class title="image-20230517171755700">
<h5 id="rip2报文">RIP2报文</h5>
<p>现在较新的RIP版本是RIP2</p>
<p>RIP2 支持无分类域间路由选择 CIDR，提供简单的鉴别，支持多播</p>
<p>RIP2报文格式：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517172049217.png" class title="image-20230517172049217">
<p>组成：<strong>首部和路由</strong> 2 个部分</p>
<p>路由部分：由若干个路由信息组成。每个路由信息共 20 个字节</p>
<p>地址族标识符（又称为地址类别）字段用来标志所使用的地址协议</p>
<p>路由标记填入自治系统的号码</p>
<p>后面为具体路由，指出某个网络地址、该网络的子网掩码、下一跳路由器地址以及到此网络的距离</p>
<p><br></p>
<p>首部4字节，路由部分最多20*25个字节</p>
<p>即RIP报文<strong>最大长度</strong>为4+20*25=504字节，如果超过，则必须再用一个RIP报文传送</p>
<p><br></p>
<p>RIP2 具有简单的鉴别功能</p>
<h4 id="坏消息传得慢">坏消息传得慢</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517173441298.png" class title="image-20230517173441298">
<p>正常情况：</p>
<p>R1到网 1 的距离是 1，是直接交付</p>
<p>R2到网 1 的距离是2，经过R1交付</p>
<p>当网1出现故障：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517173539484.png" class title="image-20230517173539484">
<p>R1更新路由表，把到网1的距离设置为16，即不可到达</p>
<p>但R2的路由表还是到网1经过R1，距离2</p>
<p>R2会将这个路由表用RIP发给路由器R1，R1更新自己的路由表，循环到16</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517173731614.png" class title="image-20230517173731614">
<p>坏消息传的慢是RIP的一个主要缺点</p>
<h4 id="rip协议优缺点">RIP协议优缺点</h4>
<p>优点：</p>
<p>实现简单，开销较小</p>
<p>缺点：</p>
<p>网络<strong>规模有限</strong>。最大距离为 15（16 表示不可达）</p>
<p>交换的路由信息为完整路由表，<strong>开销较大</strong></p>
<p>坏消息传播得慢，<strong>收敛时间过长</strong></p>
<h3 id="内部网关协议ospf">内部网关协议OSPF</h3>
<p>开放最短路径优先 OSPF (Open Shortest Path First)是为克服 RIP 的缺点在
1989 年开发出来的</p>
<p><strong>原理很简单，但实现很复杂</strong></p>
<p>使用了 <strong>Dijkstra</strong> 提出的最短路径算法 SPF</p>
<p>采用<strong>分布式的链路状态协议</strong> (link state protocol)</p>
<p>现在使用 OSPFv2</p>
<h4 id="ospf工作原理">OSPF工作原理</h4>
<h5 id="ospf三个主要特点">OSPF三个主要特点</h5>
<p>采用<strong>洪泛法</strong>
(flooding)，向本自治系统中<strong>所有路由器</strong>发送信息</p>
<p>发送的信息是与本路由器相邻的所有路由器的<strong>链路状态</strong>，但这只是路由器所知道的部分信息</p>
<p><strong>链路状态</strong>：说明本路由器都和哪些路由器相邻，以及该链路的<strong>度量</strong>
(metric)</p>
<p>当<strong>链路状态发生变化</strong>或<strong>每隔一段时间</strong>（如30分钟），路由器才用洪泛法向所有路由器发送此信息</p>
<h5 id="链路状态数据库-link-state-database">链路状态数据库 (link-state
database)</h5>
<p>每个路由器最终都能建立</p>
<p><strong>全网的拓扑结构图</strong></p>
<p><strong>在全网范围内是一致的</strong>（这称为链路状态数据库的同步）</p>
<p>每个路由器使用链路状态数据库中的数据构造自己的路由表（例如，使用Dijkstra的最短路径路由算法）</p>
<p>链路状态数据库能较快地进行更新，使各个路由器能及时更新其路由表</p>
<p><strong>重要优点：OSPF 更新过程收敛速度快</strong></p>
<h5 id="划分区域">划分区域</h5>
<p>OSPF 将自治系统划分为<strong>两种</strong>不同的区域 (area)</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517202017472.png" class title="image-20230517202017472">
<p>主干区域 (backbone area) <strong>标识符</strong>= 0.0.0.0</p>
<p><strong>作用</strong>：用来连通其他下层区域</p>
<h6 id="分层次划分区域好处">分层次划分区域好处</h6>
<p>使每一个区域内部交换路由信息的通信量大大减小，因而使 OSPF
协议能够用于规模很大的自治系统中</p>
<h6 id="划分区域优缺点">划分区域优缺点</h6>
<p>优点：</p>
<p>减少了整个网络上的通信量</p>
<p>减少了需要维护的状态数量</p>
<p><br></p>
<p>缺点：</p>
<p>交换信息的种类增多了</p>
<p>使 OSPF 协议更加复杂了</p>
<h5 id="ospf其他特点">OSPF其他特点</h5>
<p>对于不同类型的业务可计算出<strong>不同的路由</strong></p>
<p>可实现多路径间的<strong>负载均衡</strong>（load balancing）</p>
<p>所有在 OSPF 路由器之间交换的分组都具有<strong>鉴别</strong>的功能</p>
<p>支持可变长度的子网划分和无分类编址 CIDR</p>
<p>32 位的序号，序号越大状态就越新。全部序号空间在 600
年内不会产生重复号</p>
<h4 id="ospf五种分组类型">OSPF五种分组类型</h4>
<p>问候 (Hello) 分组</p>
<p>数据库描述 (Database Description) 分组</p>
<p>链路状态请求 (Link State Request) 分组</p>
<p>链路状态更新 (Link State Update) 分组</p>
<p>链路状态确认 (Link State Acknowledgment) 分组</p>
<h4 id="ospf分组用ip数据报传送">OSPF分组用IP数据报传送</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517204422346.png" class title="image-20230517204422346">
<p>其 IP 数据报首部的协议字段值为 <strong>89</strong></p>
<h4 id="ospf工作过程">OSPF工作过程</h4>
<p>1.确定邻站可达</p>
<p>相邻路由器<strong>每隔 10 秒钟</strong>要交换一次问候分组</p>
<p>若有 40
秒钟没有收到某个相邻路由器发来的问候分组，则可认为该相邻路由器是<strong>不可达</strong>的</p>
<p>2.同步链路状态数据库</p>
<p><strong>同步</strong>：指不同路由器的<strong>链路状态数据库的内容</strong>是一样的</p>
<p>两个同步的路由器叫做<strong>完全邻接</strong>的 (fully adjacent)
路由器</p>
<p>不是完全邻接的路由器：它们虽然在物理上是相邻的，但其<strong>链路状态数据库并没有达到一致</strong></p>
<p>3.更新链路状态</p>
<p>只要链路状态发生变化，路由器就使用链路状态更新分组，采用<strong>可靠的洪泛法</strong>向全网更新链路状态</p>
<p>为确保链路状态数据库与全网的状态保持一致，OSPF
还规定：每隔一段时间，如 30 分钟，要刷新一次数据库中的链路状态</p>
<p>OSPF
链路状态只涉及相邻路由器，与整个互联网的规模并无直接关系，因此当互联网规模很大时，OSPF
协议要比距离向量协议 RIP 好得多。OSPF
没有“坏消息传播得慢”的问题，收敛数度快</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517204954240.png" class title="image-20230517204954240">
<h4 id="指定的路由器dr">指定的路由器DR</h4>
<p>多点接入的局域网采用了<strong>指定的路由器 DR</strong> (designated
router) 的方法，使<strong>广播的信息量大大减少</strong></p>
<p>指定的路由器<strong>代表</strong>该局域网上所有的链路向连接到该网络上的各路由器发送状态信息</p>
<h3 id="外部网关协议bgp">外部网关协议BGP</h3>
<p>主要特点</p>
<p>用于自治系统 AS 之间的路由选择</p>
<p>只能是力求选择出一条能够到达目的网络且比较好的路由（不能兜圈子），而并非要计算出一条最佳路由</p>
<p>互联网的规模太大，使得自治系统AS之间路由选择非常困难</p>
<p>自治系统AS之间的路由选择必须考虑有关策略</p>
<p>采用了路径向量 (path vector) 路由选择协议</p>
<h3 id="路由器构成">路由器构成</h3>
<p>路由器工作在网络层，用于互连网络</p>
<p>是互联网中的关键设备</p>
<p><strong>路由器的主要工作：转发分组</strong></p>
<p>把从某个输入端口收到的分组，按照分组要去的目的地（即目的网络），把该分组从路由器的某个合适的输出端口转发给下一跳路由器</p>
<p><br></p>
<p>网络层后面自学</p>
<h2 id="ip多播">IP多播</h2>
<h2 id="虚拟专用网vpn和网络地址转换nat">虚拟专用网VPN和网络地址转换NAT</h2>
<h2 id="多协议标签交换mpls">多协议标签交换MPLS</h2>
<h2 id="软件定义网络sdn简介">软件定义网络SDN简介</h2>
<h1 id="传输层">传输层</h1>
<h2 id="运输层协议概述">运输层协议概述</h2>
<h3 id="进程间的通信">进程间的通信</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517210733840.png" class title="image-20230517210733840">
<p>网络层作用：为主机之间的通信提供服务</p>
<p>运输层作用：为<strong>应用层进程</strong>之间的通信提供服务，提供应用进程间的<strong>逻辑通信</strong></p>
<p>运输层向高层用户<strong>屏蔽</strong>了下面网络核心的细节（如网络拓扑、所采用的路由选择协议等），使应用进程看见的就是好像在两个运输层实体之间有一条<strong>端到端的逻辑通信信道</strong></p>
<p>面向连接协议：全双工可靠信道，如TCP</p>
<p>无连接协议：不可靠信道，如UDP</p>
<h3 id="运输层两个主要协议">运输层两个主要协议</h3>
<h4 id="互联网的正式标准">互联网的正式标准</h4>
<p>用户数据报协议 <strong>UDP</strong> (User Datagram Protocol)</p>
<p>传输控制协议 <strong>TCP</strong> (Transmission Control Protocol)</p>
<h4 id="运输协议数据单元">运输协议数据单元</h4>
<p>两个对等运输实体在通信时传送的数据单位叫作<strong>运输协议数据单元
TPDU</strong> (Transport Protocol Data Unit)</p>
<p>TCP 传送的数据单位协议是 <strong>TCP 报文段</strong> (segment)</p>
<p>UDP 传送的数据单位协议是 <strong>UDP
报文</strong>或<strong>用户数据报</strong></p>
<h4 id="udp与tcp的区别">UDP与TCP的区别</h4>
<h5 id="udp">UDP</h5>
<p>传送数据之前不需要先建立连接</p>
<p>收到 UDP 报后，不需要给出任何确认</p>
<p>不提供可靠交付，但是一种最有效的工作方式</p>
<h5 id="tcp">TCP</h5>
<p>提供可靠的、面向连接的运输服务（面向连接三个阶段：建立、维持、释放）</p>
<p>不提供广播或多播服务</p>
<p>开销较多</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517211932817.png" class title="image-20230517211932817">
<h3 id="运输层端口">运输层端口</h3>
<p>运输层的分用和复用</p>
<h4 id="复用">复用</h4>
<p>在发送方不同的应用进程都可以使用同一个运输层协议传送数据（加上适当的首部）</p>
<p>应用进程都可以通过运输层再传送到 IP 层（网络层）</p>
<h4 id="分用">分用</h4>
<p>接收方的运输层在剥去报文的首部后能够把这些数据正确交付目的应用进程</p>
<p>运输层从 IP
层收到发送给应用进程的数据后，必须分别交付给<strong>指明的</strong>各应用进程</p>
<h4 id="需要考虑的问题">需要考虑的问题</h4>
<p>进程的创建和撤销都是<strong>动态</strong>的，因此发送方几乎无法识别其他机器上的进程</p>
<p>我们往往需要利用<strong>目的主机</strong>提供的功能来<strong>识别终点</strong>，而不需要知道具体实现这个功能的进程是哪一个</p>
<p>有时我们会<strong>改换</strong>接收报文的进程，但并不需要通知所有的发送方</p>
<h4 id="端口号">端口号</h4>
<p>解决方法：在运输层使用<strong>协议端口号</strong> (protocol port
number)，或通常简称为端口
(port)，<strong>把端口设为通信的抽象终点</strong></p>
<h4 id="软件端口和硬件端口">软件端口和硬件端口</h4>
<p>软件端口</p>
<p>协议栈层间的<strong>抽象</strong>的协议端口</p>
<p>是应用层的各种协议<strong>进程</strong>与运输<strong>实体</strong>进行层间<strong>交互</strong>的地点</p>
<p>不同系统实现端口的方法可以不同</p>
<p><br></p>
<p>硬件端口</p>
<p>不同<strong>硬件设备</strong>进行<strong>交互</strong>的接口</p>
<h4 id="tcpip-运输层端口的标志">TCP/IP 运输层端口的标志</h4>
<p>端口用一个 <strong>16 位端口号</strong>进行标志，允许有 65,535
个不同的端口号</p>
<p>端口号只具有<strong>本地意义</strong>，只是为了标志<strong>本计算机应用层中的各进程</strong></p>
<p>在互联网中，不同计算机的相同端口号没有联系</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517213534351.png" class title="image-20230517213534351">
<h4 id="两大类三种类型的端口">两大类、三种类型的端口</h4>
<p>服务器端使用的端口号（熟知端口号或系统端口号）：0-1023</p>
<p>登记端口号：1024-49151</p>
<p>客户端使用的端口号（短暂端口号）：49152-65535</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517213649232.png" class title="image-20230517213649232">
<h4 id="常用的熟知端口">常用的熟知端口</h4>
<p>（串讲强调）</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517213901278.png" class title="image-20230517213901278">
<p>FTP: 21</p>
<p>TELNET: 23</p>
<p>SMTP: 25</p>
<p>HTTP: 80</p>
<p>DNS: 53</p>
<h2 id="用户数据报协议-udp">用户数据报协议 UDP</h2>
<h3 id="udp概述">UDP概述</h3>
<p>UDP 只在 IP 的数据报服务之上增加了一些功能：</p>
<p>复用和分用</p>
<p>差错检测</p>
<h4 id="udp主要特点">UDP主要特点</h4>
<p><strong>UDP 通信的特点：简单方便，但不可靠</strong></p>
<p><strong>无连接</strong>。发送数据之前不需要建立连接</p>
<p><strong>使用尽最大努力交付</strong>。即不保证可靠交付</p>
<p><strong>面向报文</strong>。UDP 一次传送和交付一个完整的报文</p>
<p><strong>没有拥塞控制</strong>。网络出现的拥塞不会使源主机的发送速率降低。很适合多媒体通信的要求</p>
<p>支持<strong>一对一、一对多、多对一、多对多</strong>等交互通信</p>
<p><strong>首部开销小</strong>，只有 8 个字节</p>
<h4 id="udp面向报文">UDP面向报文</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517214827348.png" class title="image-20230517214827348">
<p>发送方：UDP 对应用层交下来的报文，既不合并，也不拆分，按照样发送</p>
<p>接收方：UDP 对 IP 层交上来的 UDP
用户数据报，去除首部后就原封不动地交付上层的应用进程，一次交付一个完整的报文</p>
<p>故应用程序必须选择<strong>合适大小</strong>的报文</p>
<p>若报文太长，IP 层在传送时可能要进行分片，降低 IP 层的效率</p>
<p>若报文太短，会使 IP 数据报的首部的相对长度太大，降低 IP 层的效率</p>
<h4 id="udp-通信和端口号的关系">UDP 通信和端口号的关系</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517215331696.png" class title="image-20230517215331696">
<p>复用：将 UDP 用户数据报组装成不同的 IP 数据报，发送到互联网</p>
<p>分用：根据 UDP
用户数据报首部中的目的端口号，将数据报分别传送到相应的端口，以便应用进程到端口读取数据</p>
<h3 id="udp首部格式">UDP首部格式</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517215659991.png" class title="image-20230517215659991">
<p>首部字段：8 个字节，4 个字段，每个字段为 2 个字节</p>
<ol type="1">
<li><p>源端口：源端口号。在需要对方回信时选用。不需要时可用全0</p></li>
<li><p>目的端口：目的端口号。终点交付报文时必须使用</p></li>
<li><p>长度：UDP 用户数据报的长度，其最小值是 8（仅有首部）</p></li>
<li><p>检验和：检测 UDP 用户数据报在传输中是否有错。有错就丢弃</p></li>
</ol>
<h4 id="udp基于端口的分用">UDP基于端口的分用</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517215803027.png" class title="image-20230517215803027">
<p>接收方 UDP
根据首部中的目的端口号，把报文通过相应的端口上交给应用进程</p>
<p>如果接收方 UDP
发现收到的报文中的目的端口号不正确（即不存在对应于该端口号的应用进程），<strong>就丢弃该报文</strong>，并由
ICMP 发送“端口不可达”差错报文给发送方</p>
<h4 id="计算udp检验和">计算UDP检验和</h4>
<p>在计算检验和时，<strong>临时</strong>把 12
字节的“<strong>伪首部</strong>”和 UDP 用户数据报连接在一起</p>
<p>伪首部仅仅是为了计算检验和</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517220025372.png" class title="image-20230517220025372">
<p>计算方法与IP数据报首部检验类似</p>
<p>但UDP检验和是<strong>把首部和数据部分一起检验</strong>，而IP只检验首部</p>
<p>UDP伪首部第三个字段全0</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517220318105.png" class title="image-20230517220318105">
<h2 id="传输控制协议-tcp-概述">传输控制协议 TCP 概述</h2>
<h3 id="tcp最主要的特点">TCP最主要的特点</h3>
<p>TCP 是<strong>面向连接</strong>的运输层协议，在无连接的、不可靠的 IP
网络服务基础之上提供<strong>可靠交付</strong>的服务。为此，在 IP
的数据报服务基础之上，增加了保证可靠性的一系列措施</p>
<p>TCP 是<strong>面向连接</strong>的运输层协议</p>
<p>每一条 TCP 连接<strong>只能有两个端点</strong> (endpoint)，每一条 TCP
连接只能是<strong>点对点的（一对一）</strong></p>
<p>TCP 提供<strong>可靠交付</strong>的服务</p>
<p>TCP 提供<strong>全双工</strong>通信</p>
<p><br></p>
<p><strong>面向字节流</strong></p>
<p>TCP 中的“流”(stream)
指的是流入或流出进程的<strong>字节序列</strong></p>
<p>面向字节流：虽然应用程序和 TCP 的交互是一次一个数据块，但 TCP
把应用程序交下来的数据看成仅仅是一连串<strong>无结构的字节流</strong></p>
<h4 id="tcp面向流的概念">TCP面向流的概念</h4>
<p>TCP
<strong>不保证</strong>接收方应用程序所收到的数据块和发送方应用程序所发出的数据块具有对应大小的关系</p>
<p>但接收方应用程序<strong>收到的字节流</strong>必须和发送方应用程序<strong>发出的字节流完全一样</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518150424585.png" class title="image-20230518150424585">
<p>TCP 不关心应用进程一次把多长的报文发送到 TCP 缓存</p>
<p>TCP
根据对方给出的<strong>窗口值</strong>和<strong>当前网络拥塞程度</strong>来决定一个报文段应包含多少个字节，形成
TCP 报文段</p>
<h3 id="tcp的连接">TCP的连接</h3>
<p>TCP 把连接作为<strong>最基本的抽象</strong></p>
<p>TCP 连接的端点：套接字 (socket) 或插口</p>
<p>每一条 TCP 连接有<strong>两个端点</strong></p>
<h4 id="套接字socket">套接字（socket）</h4>
<p>套接字 socket = (IP地址 : 端口号)</p>
<p>例如(192.169.1.20 : 2028)</p>
<p>每一条 TCP
连接<strong>唯一地</strong>被通信两端的两个端点（即<strong>两个套接字</strong>）所确定</p>
<p>TCP 连接 ::= {socket1, socket2} = {(IP1: port1)，(IP2: port2)}</p>
<h4 id="tcp连接">TCP连接</h4>
<p>TCP 连接就是由协议软件所提供的一种<strong>抽象</strong></p>
<p>TCP 连接的端点是抽象的<strong>套接字</strong>，即（IP
地址：端口号）</p>
<p>同一个 IP 地址可以有<strong>多个不同</strong>的 TCP 连接</p>
<p>同一个端口号也可以出现在多个<strong>不同</strong>的 TCP 连接中</p>
<h2 id="可靠传输的工作原理">可靠传输的工作原理</h2>
<h3 id="理想传输条件的特点">理想传输条件的特点</h3>
<p>传输信道不产生差错</p>
<p>不管发送方以多快的速度发送数据，接收方总是来得及处理收到的数据</p>
<p><br></p>
<p>在理想传输条件下，不需要采取任何措施就能够实现可靠传输</p>
<p><strong>但实际网络都不具备理想传输条件</strong>。必须使用一些可靠传输协议，在不可靠的传输信道实现可靠传输</p>
<h3 id="停止等待协议">停止等待协议</h3>
<p>每发送完一个分组就<strong>停止</strong>发送，<strong>等待</strong>对方的确认。在收到确认后再发送下一个分组</p>
<p>全双工通信的双方既是发送方也是接收方</p>
<p>假设仅考虑 A 发送数据，而 B 接收数据并发送确认。因此 A 叫做发送方，而
B 叫做接收方</p>
<h4 id="无差错情况">无差错情况</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518151218176.png" class title="image-20230518151218176">
<h4 id="出现差错情况">出现差错情况</h4>
<p>两种情况：</p>
<p>B 接收 M1 时<strong>检测出了差错</strong>，就丢弃
M1，其他什么也不做（不通知 A 收到有差错的分组）</p>
<p>M1 在传输过程中<strong>丢失了</strong>，这时 B
当然什么都不知道，也什么都不做</p>
<p>在这两种情况下，<strong>B 都不会发送任何信息</strong></p>
<p><br></p>
<p>问题：A 如何知道 B 是否正确收到了 M1 呢？</p>
<p><strong>解决方法：超时重传</strong></p>
<p>A 为每一个已发送的分组设置一个<strong>超时计时器</strong></p>
<p>A
只要在超时计时器到期之前收到了相应的确认，就撤销该超时计时器，<strong>继续</strong>发送下一个分组
M2</p>
<p>若 A 在超时计时器规定时间内没有收到 B
的确认，就认为分组错误或丢失，就<strong>重发</strong>该分组</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518151512624.png" class title="image-20230518151512624">
<h4 id="确认丢失和确认迟到">确认丢失和确认迟到</h4>
<h5 id="确认丢失">确认丢失</h5>
<p>若 B 所发送的对 M1 的<strong>确认丢失了</strong>，那么 A
在设定的超时重传时间内将不会收到确认，因此 A
在超时计时器到期后<strong>重传</strong> M1</p>
<p>假定 B 正确收到了 <strong>A 重传</strong>的分组 M1。这时 B
应采取两个行动：</p>
<ol type="1">
<li><p><strong>丢弃</strong>这个重复的分组 M1，不向上层交付</p></li>
<li><p><strong>向 A 发送确认</strong></p></li>
</ol>
<h5 id="确认迟到">确认迟到</h5>
<p>B 对分组 M1 的确认迟到了，因此 A
在超时计时器到期后<strong>重传</strong> M1</p>
<p>B 会收到重复的 M1，<strong>丢弃</strong>重复的
M1，并<strong>重传确认分组</strong></p>
<p>A 会收到重复的确认。对重复的确认的处理：<strong>丢弃</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518151745547.png" class title="image-20230518151745547">
<h4 id="信道利用率">信道利用率</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518152020958.png" class title="image-20230518152020958">
<p>假设A发送分组的时间是<span class="math inline">\(T_D\)</span>,
B发送确认分组需要时间<span class="math inline">\(T_A\)</span></p>
<p><span class="math inline">\(RTT\)</span>即往返时间</p>
<p>信道利用率: <span class="math display">\[
\begin{align*}
U=\frac{T_D}{T_D+RTT+T_A}
\end{align*}
\]</span></p>
<p>当往返时间 RTT 远大于分组发送时间 TD 时，信道的利用率会非常低</p>
<h4 id="停止等待协议优缺点">停止等待协议优缺点</h4>
<p>优点：简单</p>
<p>缺点：信道利用率太低</p>
<h4 id="停止等待协议要点">停止等待协议要点</h4>
<p><strong>停止等待</strong>。发送方每次只发送一个分组。在收到确认后再发送下一个分组</p>
<p><strong>暂存</strong>：在发送完一个分组后，发送方必须暂存已发送的分组的副本，以备重发</p>
<p><strong>编号</strong>。对发送的每个分组和确认都进行编号</p>
<p><strong>超时重传</strong>。发送方为发送的每个分组设置一个超时计时器。若超时计时器超时位收到确认，发送方会<strong>自动</strong>超时重传分组</p>
<p>超时计时器的重传时间应当<strong>比数据在分组传输的平均往返时间更长一些</strong>，防止不必要的重传</p>
<p><strong>简单，但信道利用率太低</strong></p>
<p><br></p>
<h4 id="流水线传输">流水线传输</h4>
<p>提高传输效率：流水线传输</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518152658294.png" class title="image-20230518152658294">
<p><strong>流水线传输：在收到确认之前，发送方连续发出多个分组</strong></p>
<p>由于信道上一直有数据不间断地传送，流水线传输可获得很高的信道利用率</p>
<p>连续 ARQ 协议和滑动窗口协议采用流水线传输方式</p>
<h3 id="连续arq协议">连续ARQ协议</h3>
<p><strong>发送窗口</strong>：发送方维持一个发送窗口，位于发送窗口内的分组都可被<strong>连续发送</strong>出去，而不需要等待对方的确认</p>
<p><strong>发送窗口滑动</strong>：发送方每收到一个确认，就把<strong>发送窗口向前滑动一个分组</strong>的位置</p>
<p><strong>累积确认</strong>：接收方对<strong>按序到达</strong>的<strong>最后</strong>一个分组发送确认，表示：到这个分组为止的所有分组都已正确收到了</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518153054228.png" class title="image-20230518153054228">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518153505420.png" class title="image-20230518153505420">
<h4 id="累积确认">累积确认</h4>
<p>优点：容易实现，即使确认丢失也不必重传</p>
<p>缺点：不能向发送方反映出接收方已经正确收到的所有分组的信息</p>
<p><br></p>
<p>连续 ARQ 协议采用 Go-back-N（回退N）</p>
<p><strong>Go-back-N（回退N）</strong>：表示需要再<strong>退回来重传</strong>已发送过的
N 个分组</p>
<p>当通信线路质量不好时，连续 ARQ 协议会带来负面的影响</p>
<h2 id="tcp-报文段的首部格式">TCP 报文段的首部格式</h2>
<p>TCP 虽然是面向字节流的，但 TCP
传送的数据单元却是<strong>报文段</strong></p>
<p>一个 TCP 报文段分为首部和数据两部分，而 <strong>TCP
的全部功能都体现在它首部中各字段的作用</strong></p>
<p>TCP 报文段首部的前 20 个字节是固定的，后面有 4n
字节是根据需要而增加的选项 (n 是整数)</p>
<p><strong>因此 TCP 首部的最小长度是 20 字节</strong></p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518153906346.png" class title="image-20230518153906346">
<p>源端口和目的端口字段：各占2字节。端口是运输层与应用层的服务接口，运输层的复用和分用功能都要通过端口才能实现</p>
<p>序号字段：占4字节。TCP连接中传送的数据流中的<strong>每一个字节</strong>都编上一个序号。首部序号字段的值则指的是<strong>本报文段所发送的数据的第一个字节</strong>的序号，例如：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518154257987.png" class title="image-20230518154257987">
<p><br></p>
<p>确认号字段：占4字节，是<strong>期望收到对方的下一个报文段的数据的第一个字节的序号</strong></p>
<p>数据偏移（即首部长度）：占4位，它指出TCP报文段的数据起始处距离TCP报文段的起始处有多远，这个字段实际上是指出<strong>TCP报文段的首部</strong>长度。“数据偏移”的单位是32位字（以4字节为计算单位）</p>
<p>保留字段：占6位，保留为今后使用，但目前应置为0</p>
<p>紧急URG：当URG=1时，表明紧急指针字段有效。它告诉系统此报文段中有紧急数据，应尽快传送(相当于高优先级的数据)</p>
<p>确认ACK：<strong>只有当ACK=1时确认号字段才有效</strong>。当ACK=0
时，确认号无效</p>
<p>推送PSH(PuSH)：接收TCP收到PSH=1的报文段，就<strong>尽快地交付接收应用进程</strong>，而不再等到整个缓存都填满了后再向上交付</p>
<p>复位RST(ReSeT)：当RST=1时，表明TCP连接中出现严重差错（如由于主机崩溃或其他原因），必须释放连接，然后再重新建立运输连接</p>
<p>同步SYN：同步SYN=1表示这是一个<strong>连接请求或连接接受报文</strong></p>
<p>终止FIN(FINis)：用来释放一个连接。FIN=1表明此报文段的发送端的数据已发送完毕，并要求释放运输连接</p>
<p>窗口字段：占2字节，用来让对方设置发送窗口的依据，单位为字节</p>
<p>检验和：占2字节。检验和字段检验的范围包括<strong>首部和数据这两部分</strong>。在计算检验和时，要在TCP报文段的前面加上<strong>12字节的伪首部</strong></p>
<p>紧急指针字段：占 16
位，指出在本报文段中紧急数据共有多少个字节（紧急数据放在本报文段数据的<strong>最前面</strong>）</p>
<p><br></p>
<p>选项字段：长度可变。TCP最初只规定了一种选项，即<strong>最大报文段长度MSS</strong>。MSS告诉对方TCP：“我的缓存所能接收的报文段的数据字段的最大长度是MSS个字节。”</p>
<p>（MSS (Maximum Segment Size)是 TCP
报文段中的<strong>数据字段</strong>的最大长度，数据字段加上 TCP
首部才等于整个的 TCP 报文段）</p>
<p>其他选项：</p>
<p>窗口扩大选项：占3字节，其中有一个字节表示移位值S。新的窗口值等于TCP首部中的窗口位数增大到(16+S)，相当于把窗口值向左移动S位后获得实际的窗口大小</p>
<p>时间戳选项：占10字节，其中最主要的字段时间戳值字段（4字节）和时间戳回送回答字段（4字节）</p>
<p>选择确认选项：在后面的5.6.3 节介绍</p>
<p><br></p>
<p>填充字段：这是为了使整个首部长度是4字节的整数倍</p>
<h2 id="tcp-可靠传输的实现">TCP 可靠传输的实现</h2>
<h3 id="以字节为单位的滑动窗口">以字节为单位的滑动窗口</h3>
<p>TCP 使用流水线传输和滑动窗口协议实现高效、可靠的传输</p>
<p>TCP 的滑动窗口是<strong>以字节为单位</strong>的</p>
<p>发送方 A 和接收方 B
分别维持一个<strong>发送窗口</strong>和一个<strong>接收窗口</strong></p>
<p>发送窗口：在没有收到确认的情况下，发送方可以<strong>连续</strong>把窗口内的数据<strong>全部发送</strong>出去。凡是已经发送过的数据，在未收到确认之前都必须<strong>暂时保留</strong>，以便在超时重传时使用</p>
<p>接收窗口：只允许<strong>接收落入窗口内</strong>的数据</p>
<h4 id="发送窗口">发送窗口</h4>
<p>A 根据 B 给出的窗口值，构造出自己的发送窗口</p>
<p>发送窗口里面的<strong>序号</strong>表示允许发送的序号</p>
<p>窗口越大，发送方就可以在收到对方确认之前连续发送更多的数据，因而可能获得更高的传输效率</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518155452492.png" class title="image-20230518155452492">
<p>假定 A 发送了序号为 31 ~ 41 共 11 个字节的数据：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518155644588.png" class title="image-20230518155644588">
<p>P1 = 后沿，P2 = 当前，P3 = 前沿</p>
<p>P3 – P1 = A 的发送窗口（又称为<strong>通知窗口</strong>）</p>
<p>P2 – P1 = 已发送但尚未收到确认的字节数</p>
<p>P3 – P2 =
允许发送但尚未发送的字节数（又称为<strong>可用窗口</strong>）</p>
<h4 id="接收窗口">接收窗口</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518160806823.png" class title="image-20230518160806823">
<p>B 收到了序号为 32 和 33 的数据，但未收到序号为 31
的数据。因此，因此发送的确认报文段中的确认号是
31（即期望收到的序号）</p>
<h4 id="窗口的滑动">窗口的滑动</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518160851587.png" class title="image-20230518160851587">
<p>A收到以后再给B</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518160941925.png" class title="image-20230518160941925">
<p>此时B收到31,32,33，接收窗口前移，发送窗口还没移动</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518161025182.png" class title="image-20230518161025182">
<p>A收到确认号为34时，这个是累积确认，于是发送窗口前移至34，并给B发送序号34</p>
<p><br></p>
<p>如果发送窗口的可用窗口=0，即已发送但未确认的字节占满了整个发送窗口，则原因可能有：</p>
<p>1.B未发送确认</p>
<p>2.B已发送，但是未到达A</p>
<p>为保证可靠传输，A 只能认为 B 还没有收到这些数据</p>
<p>A
经过一段时间后（由超时计时器控制）就<strong>重传</strong>这部分数据，重新设置超时计时器，直到收到
B 的确认为止</p>
<p>如果 A 按序收到落在发送窗口内的确认号，
就使发送窗口向前滑动，并发送新的数据</p>
<h4 id="发送缓存与发送窗口">发送缓存与发送窗口</h4>
<p>发送方的应用进程把字节流写入 TCP 发送缓存</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518162234967-16843981559601.png" class title="image-20230518162234967">
<p>暂时存放：</p>
<ol type="1">
<li><p>发送应用程序传送给发送方 TCP
<strong>准备发送</strong>的数据</p></li>
<li><p>TCP <strong>已发送出但尚未收到确认</strong>的数据</p></li>
</ol>
<p><br></p>
<p>发送方应用程序不能发送太快，否则发送缓存会溢出</p>
<p>缓存中的字节数 = 发送应用程序最后写入缓存的字节 -
最后被确认的字节</p>
<h4 id="接收缓存与接收窗口">接收缓存与接收窗口</h4>
<p>接收方的应用进程从 TCP 接收缓存中读取尚未被读取的字节</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518162452030.png" class title="image-20230518162452030">
<p>暂时存放：</p>
<ol type="1">
<li><p>按序到达的、但<strong>尚未被接收应用程序读取</strong>的数据</p></li>
<li><p><strong>未按序到达</strong>的数据</p></li>
</ol>
<p><br></p>
<p>若不能及时读取，缓存最终会被填满，使接收窗口减小到零</p>
<p>如果能够及时读取，接收窗口就可以增大，但最大不能超过接收缓存的大小</p>
<h4 id="三点注意">三点注意</h4>
<p>第一，发送窗口是根据接收窗口设置的，但在同一时刻，<strong>发送窗口并不总是和接收窗口一样大</strong>（因为有一定的时间滞后）</p>
<p>第二，TCP
标准<strong>没有规定</strong>对不按序到达的数据应如何处理。通常是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，<strong>再按序交付上层</strong>的应用进程</p>
<p>第三，TCP
要求接收方必须有<strong>累积确认</strong>的功能，以减小传输开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便<strong>捎带</strong>上。但接收方<strong>不应过分推迟发送确认</strong>，否则会导致发送方不必要的重传，捎带确认实际上并不经常发生</p>
<h3 id="超时重传时间的选择">超时重传时间的选择</h3>
<p>TCP 发送方在规定的时间内没有收到确认就要重传已发送的报文段</p>
<p>但<strong>重传时间的选择</strong>是 TCP 最复杂的问题之一</p>
<p>互联网环境复杂，IP 数据报所选择的路由变化很大，导致运输层的往返时间
(RTT) 的变化也很大</p>
<h4 id="tcp-超时重传时间设置">TCP 超时重传时间设置</h4>
<p>不能太短，否则会引起很多报文段的不必要的重传，使网络负荷增大</p>
<p>不能过长，会使网络的空闲时间增大，降低了传输效率</p>
<p>TCP
采用了一种<strong>自适应算法</strong>，它记录一个报文段发出的时间，以及收到相应确认的时间</p>
<p>这两个时间<strong>之差</strong>就是报文段的<strong>往返时间
RTT</strong></p>
<h4 id="加权平均往返时间-rtt_s">加权平均往返时间 <span class="math inline">\(RTT_S\)</span></h4>
<p>加权平均往返时间 <span class="math inline">\(RTT_S\)</span>
又称为<strong>平滑的往返时间</strong> <span class="math display">\[
\begin{align*}
新的RTT_S=(1-\alpha)\times(旧的RTT_S)+\alpha\times(新的RTT_S样本)
\end{align*}
\]</span> 其中，0≤α＜1</p>
<p>若α→0，表示RTT值更新较慢</p>
<p>若α→1，表示RTT值更新较快</p>
<p>RFC 6298推荐的α值为1/8，即0.125</p>
<h4 id="超时重传时间rto">超时重传时间RTO</h4>
<h4 id="karn算法">Karn算法</h4>
<h3 id="选择确认sack">选择确认SACK</h3>
<h2 id="tcp-的流量控制">TCP 的流量控制</h2>
<h3 id="利用滑动窗口实现流量控制">利用滑动窗口实现流量控制</h3>
<p><strong>流量控制 (flow control)
：让发送方的发送速率不要太快，使接收方来得及接收</strong></p>
<p>利用<strong>滑动窗口机制</strong>可以很方便地在 TCP
连接上实现对发送方的流量控制</p>
<p>TCP窗口单位是<strong>字节</strong>，不是报文段</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518164918369.png" class title="image-20230518164918369">
<p>rwnd为0时就不再接收了</p>
<p>如果此时B又有了一些空间，给A发送rwnd=100，但是传送过程中丢失了</p>
<p>A一直在等B的非零窗口通知，B一直等A的数据，就死锁了</p>
<p>解决方法如下</p>
<h4 id="持续计时器">持续计时器</h4>
<p>持续计时器 (persistence timer)：只要 TCP
连接的一方收到对方的<strong>零窗口</strong>通知，就启动该持续计时器</p>
<p>若持续计时器设置的时间到期，就发送一个<strong>零窗口探测报文段</strong>（仅携带
1 字节的数据），对方在确认这个探测报文段时给出当前窗口值</p>
<p>若窗口仍然是零，收到这个报文段的一方就重新设置持续计时器</p>
<p>若窗口不是零，则死锁的僵局就可以打破了</p>
<h3 id="tcp的传输效率">TCP的传输效率</h3>
<p>控制TCP发送报文段的时机：三种机制</p>
<p>TCP 维持一个变量，它等于最大报文段长度 MSS。只要缓存中存放的数据达到
MSS 字节时，就组装成一个 TCP 报文段发送出去</p>
<p>由发送方的应用进程指明要求发送报文段，即 TCP 支持的推送 (push)
操作</p>
<p>发送方的一个计时器期限到了，这时就把当前已有的缓存数据装入报文段（但长度不能超过
MSS）发送出去</p>
<h2 id="tcp-的拥塞控制">TCP 的拥塞控制</h2>
<h3 id="拥塞控制的一般原理">拥塞控制的一般原理</h3>
<p>在某段时间，若对网络中<strong>某资源的需求超过了该资源所能提供的可用部分，网络的性能就要明显变坏，</strong>整个网络的吞吐量将随输入负荷的增大而下降。这种现象称为<strong>拥塞</strong>
(congestion)</p>
<p>最坏结果：<strong>系统崩溃</strong></p>
<h4 id="拥塞产生原因">拥塞产生原因</h4>
<p>由许多因素引起。例如：</p>
<p>节点缓存容量太小</p>
<p>链路容量不足</p>
<p>处理机处理速率太慢</p>
<p>拥塞本身会进一步加剧拥塞</p>
<p><br></p>
<p>出现网络拥塞的条件： <span class="math display">\[
\begin{align*}
\sum对资源需求 &gt; 可用资源
\end{align*}
\]</span></p>
<h4 id="增加资源不能解决拥塞">增加资源不能解决拥塞</h4>
<p><strong>增加资源不能解决拥塞，而且还可能使网络的性能更坏</strong></p>
<p>例如：</p>
<p>增大缓存，但未提高输出链路的容量和处理机的速度，排队等待时间将会大大增加，引起大量超时重传，解决不了网络拥塞</p>
<p>提高处理机处理的速率会将瓶颈转移到其他地方</p>
<p>拥塞引起的重传并不会缓解网络的拥塞，反而会加剧网络的拥塞</p>
<h4 id="拥塞控制与流量控制区别">拥塞控制与流量控制区别</h4>
<h5 id="拥塞控制">拥塞控制</h5>
<p>防止过多的数据注入到网络中，避免网络中的路由器或链路过载</p>
<p>是一个<strong>全局性</strong>的过程，涉及到所有的主机、路由器，以及与降低网络传输性能有关的所有因素</p>
<h5 id="流量控制">流量控制</h5>
<p>抑制发送端发送数据的速率，以使接收端来得及接收</p>
<p>点对点通信量的控制，是个<strong>端到端</strong>的问题</p>
<h4 id="拥塞控制起到的作用">拥塞控制起到的作用</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518200444637.png" class title="image-20230518200444637">
<h4 id="拥塞控制的一般原理-1">拥塞控制的一般原理</h4>
<p><strong>拥塞控制的前提</strong>：网络能够<strong>承受</strong>现有的网络负荷</p>
<p>实践证明，拥塞控制是很难设计的，因为它是一个<strong>动态问题</strong></p>
<p>分组的丢失是网络发生拥塞的<strong>征兆</strong>，而不是原因</p>
<p>在许多情况下，甚至正是<strong>拥塞控制本身</strong>成为引起网络性能恶化、甚至发生死锁的原因</p>
<h4 id="开环控制和闭环控制">开环控制和闭环控制</h4>
<h5 id="开环控制">开环控制</h5>
<p>在设计网络时，事先<strong>考虑周全</strong>，力求工作时不发生拥塞</p>
<p>思路：力争<strong>避免</strong>发生拥塞</p>
<p>但一旦整个系统运行起来，就不再中途进行改正了</p>
<h5 id="闭环控制">闭环控制</h5>
<p>基于反馈环路的概念</p>
<p>根据网络<strong>当前运行状态</strong>采取相应控制措施</p>
<p>思路：在发生拥塞后，采取措施进行控制，<strong>消除拥塞</strong></p>
<h4 id="闭环控制措施">闭环控制措施</h4>
<p>监测<span class="math inline">\(\rightarrow\)</span>传送<span class="math inline">\(\rightarrow\)</span>调整</p>
<h5 id="监测">监测</h5>
<p>监测网络系统，检测拥塞在何时、何处发生</p>
<p>主要指标有：</p>
<p>由于缺少缓存空间而被丢弃的分组的百分数</p>
<p>平均队列长度</p>
<p>超时重传的分组数</p>
<p>平均分组时延</p>
<p>分组时延的标准差，等等</p>
<p><strong>这些指标的上升都标志着拥塞的增长</strong></p>
<h5 id="传送">传送</h5>
<p>将拥塞发生的信息传送到可采取行动的地方</p>
<p>将拥塞发生的信息传送到产生分组的<strong>源站</strong></p>
<p>在路由器转发的分组中保留一个比特或字段，<strong>用该比特或字段的值</strong>表示网络没有拥塞或产生了拥塞</p>
<p><strong>周期性</strong>地发出探测分组等</p>
<h5 id="调整">调整</h5>
<p>调整网络系统的运行以解决出现的问题</p>
<p>过于频繁，会使系统产生不稳定的振荡</p>
<p>过于迟缓，不具有任何实用价值</p>
<p><strong>选择正确的时间常数是相当困难的</strong></p>
<h3 id="tcp拥塞控制方法">TCP拥塞控制方法</h3>
<p>TCP
采用基于<strong>滑动窗口</strong>的方法进行拥塞控制，属于<strong>闭环控制</strong>方法</p>
<p>TCP 发送方维持一个<strong>拥塞窗口 cwnd</strong> (Congestion
Window)</p>
<p>拥塞窗口的大小取决于网络的拥塞程度，并且是<strong>动态变化</strong>的</p>
<p>发送端利用<strong>拥塞窗口</strong>根据网络的拥塞情况调整发送的数据量</p>
<p>发送窗口大小不仅取决于接收方窗口，还取决于网络的拥塞状况</p>
<p><strong>真正的发送窗口值：</strong> <span class="math display">\[
\begin{align*}
真正的发送窗口值 = Min (接收方通知的窗口值，拥塞窗口值)
\end{align*}
\]</span>
即发送端的发送窗口不能超过拥塞窗口cwnd和接收端窗口rwnd中的最小值</p>
<h4 id="控制拥塞窗口变化的原则">控制拥塞窗口变化的原则</h4>
<p>只要网络没有出现拥塞，拥塞窗口就可以再增大一些，以便把更多的分组发送出去，提高网络的利用率</p>
<p>但只要网络出现拥塞或有可能出现拥塞，就必须把拥塞窗口减小一些，以减少注入到网络中的分组数，缓解网络出现的拥塞</p>
<h4 id="发送方判断拥塞的方法隐式反馈">发送方判断拥塞的方法：隐式反馈</h4>
<p>因传输出差错而丢弃分组的概率很小（远小于1 %）</p>
<p><strong>因此，发送方在超时重传计时器启动时，就判断网络出现了拥塞</strong></p>
<h4 id="四种拥塞控制算法">四种拥塞控制算法</h4>
<h5 id="慢开始-slow-start">慢开始 (slow-start)</h5>
<p>目的：探测网络的负载能力或拥塞程度</p>
<p>算法：由小到大逐渐增大注入到网络中的数据字节，即：由小到大<strong>逐渐增大拥塞窗口</strong>数值</p>
<p><br></p>
<h6 id="个控制变量">2 个控制变量</h6>
<p>拥塞窗口cwnd</p>
<p>初始值：2 种设置方法</p>
<p>1 至 2 个最大报文段 MSS （旧标准）</p>
<p>2 至 4 个最大报文段 MSS（RFC 5681）</p>
<p><br></p>
<p>慢开始门限 ssthresh</p>
<p>防止拥塞窗口增长过大引起网络拥塞</p>
<p><br></p>
<h6 id="慢开始方法">慢开始方法</h6>
<p>发送方<strong>每收到一个对新报文段的确认</strong>（重传的不算在内）就使
cwnd 加 1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518202035521.png" class title="image-20230518202035521">
<p>每经过一个传输轮次，拥塞窗口就加倍</p>
<p>窗口大小按指数增加，并不慢</p>
<p><br></p>
<h6 id="传输轮次">传输轮次</h6>
<p><strong>一个传输轮次所经历的时间其实就是往返时间RTT</strong></p>
<p>传输轮次强调：把拥塞窗口 cwnd
所允许发送的报文段都连续发送出去，并收到了对已发送的最后一个字节的确认</p>
<p>例如：拥塞窗口 cwnd = 4，这时的往返时间 RTT 就是发送方连续发送 4
个报文段，并收到这 4 个报文段的确认，总共经历的时间</p>
<h6 id="慢开始门限ssthresh">慢开始门限ssthresh</h6>
<p>防止拥塞窗口 cwnd 增长过大引起网络拥塞</p>
<p>用法：</p>
<p>当 cwnd &lt; ssthresh 时，使用慢开始算法</p>
<p>当 cwnd &gt; ssthresh 时，停止使用慢开始算法，改用拥塞避免算法</p>
<p>当 cwnd = ssthresh 时，既可使用慢开始算法，也可使用拥塞避免算法</p>
<h5 id="拥塞避免-congestion-avoidance">拥塞避免 (congestion
avoidance)</h5>
<p>目的：让拥塞窗口 cwnd
<strong>缓慢地增大</strong>，<strong>避免</strong>出现拥塞</p>
<p>拥塞窗口 cwnd 增大：<strong>每经过一个往返时间
RTT</strong>（不管在此期间收到了多少确认），发送方的拥塞窗口 cwnd = cwnd
+ 1</p>
<p>具有<strong>加法增大 AI</strong> (Additive Increase) 特点：使拥塞窗口
cwnd 按<strong>线性</strong>规律缓慢增长</p>
<p>注意：</p>
<p>拥塞避免并非完全避免拥塞，而是让拥塞窗口增长得缓慢些，使网络不容易出现拥塞</p>
<h6 id="拥塞避免方法">拥塞避免方法</h6>
<p>每经过一个往返时间 RTT，发送方就把拥塞窗口 cwnd 加 1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518202655263.png" class title="image-20230518202655263">
<h6 id="当网络出现拥塞时">当网络出现拥塞时</h6>
<p>无论在慢开始阶段还是在拥塞避免阶段，只要发送方判断网络出现拥塞（<strong>重传定时器超时</strong>）：</p>
<p>1.ssthresh = max (cwnd/2，2)</p>
<p>2.cwnd = 1</p>
<p>3.执行慢开始算法</p>
<p><strong>目的</strong>：迅速减少主机发送到网络中的分组数，使得发生拥塞的路由器有足够时间把队列中积压的分组处理完毕</p>
<h6 id="慢开始和拥塞避免算法的实现举例">慢开始和拥塞避免算法的实现举例</h6>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518202942678.png" class title="image-20230518202942678">
<p>当TCP连接进行<strong>初始化</strong>时，将<strong>拥塞窗口置为1</strong>。图中的窗口单位不使用字节而使用<strong>报文段</strong></p>
<p>慢开始门限的初始值设置为16个报文段，即ssthresh=16</p>
<p><strong>发送端的发送窗口不能超过拥塞窗口cwnd和接收端窗口rwnd中的最小值</strong></p>
<p>我们假定接收端窗口足够大，因此现在发送窗口的数值等于拥塞窗口的数值</p>
<p>在执行慢开始算法时，拥塞窗口cwnd的初始值为1，发送第一个报文段M0</p>
<p>发送端每收到一个确认，就把cwnd加1，于是发送端可以接着发送M1和M2两个报文段</p>
<p>接收端共发回两个确认。发送端每收到一个对新报文段的确认，就把发送端的cwnd加1。现在cwnd从2增大到4，并可接着发送后面的4个报文段</p>
<p>指数增长到慢开始门限：16，然后采用拥塞避免算法，即每个RTT后cwnd自增</p>
<p>假定拥塞窗口的数值增长到24时，网络出现超时，表明网络拥塞了（只要超时，就设置ssthresh
= max (cwnd/2，2)，cwnd设置1）</p>
<p>更新后的ssthresh值变为12（即发送窗口数值24的一半），拥塞窗口再重新设置为1，并执行慢开始算法</p>
<h5 id="快重传-fast-retransmit">快重传 (fast retransmit)</h5>
<p>目的：让发送方<strong>尽早</strong>知道发生了个别报文段的丢失</p>
<p>发送方只要连续收到<strong>三个重复的确认</strong>，就<strong>立即进行重传</strong>（即“快重传”），这样就不会出现超时</p>
<p>使用快重传可以使整个网络的吞吐量提高约 20%</p>
<p>快重传算法<strong>要求接收方立即发送确认</strong>，<strong>即使收到了失序的报文段，也要立即发出对已收到的报文段的重复确认</strong>（应该是没有累积确认）</p>
<p>注意：</p>
<p>快重传并非取消重传计时器，而是在某些情况下可以<strong>更早地（更快地）</strong>重传丢失的报文段</p>
<h6 id="快重传举例">快重传举例</h6>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518204119898.png" class title="image-20230518204119898">
<h5 id="快恢复-fast-recovery">快恢复 (fast recovery)</h5>
<p>当发送端收到连续三个重复的确认时，<strong>不执行</strong>慢开始算法，而是<strong>执行快恢复算法
FR (Fast Recovery)</strong> 算法：</p>
<p>慢开始门限 ssthresh = 当前拥塞窗口 cwnd / 2</p>
<p><strong>乘法减小 MD</strong> (Multiplicative Decrease)
拥塞窗口，即新拥塞窗口 cwnd = 慢开始门限 ssthresh</p>
<p>即新拥塞窗口 cwnd = 当前拥塞窗口 cwnd / 2 = 慢开始门限 ssthresh</p>
<p>执行拥塞避免算法，使拥塞窗口缓慢地线性增大（加法增大 AI）</p>
<p>二者合在一起就是所谓的 <strong>AIMD</strong> 算法，使 TCP
性能有明显改进</p>
<p>例子：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518211324887.png" class title="image-20230518211324887">
<p>当拥塞窗口 cwnd = 16 时，发送方连续收到 3
个对同一个报文段的重复确认（记为
3-ACK）。发送方改为执行<strong>快重传和快恢复</strong>算法</p>
<p>执行快重传和快恢复算法：发送方调整门限值 ssthresh = cwnd / 2 =
8，设置拥塞窗口 <strong>cwnd = ssthresh</strong> =
8，开始执行拥塞避免算法</p>
<h4 id="tcp拥塞控制流程">TCP拥塞控制流程</h4>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518211423273.png" class title="image-20230518211423273">
<h4 id="发送窗口上限">发送窗口上限</h4>
<p>发送窗口的上限值 = Min [rwnd, cwnd]</p>
<p>当 rwnd &lt; cwnd 时，是接收方的接收能力限制发送窗口的最大值</p>
<p>当 cwnd &lt; rwnd 时，是网络拥塞限制发送窗口的最大值</p>
<h3 id="主动队列管理aqm">主动队列管理AQM</h3>
<p>自学</p>
<h2 id="tcp-的运输连接管理">TCP 的运输连接管理</h2>
<h3 id="tcp的连接建立">TCP的连接建立</h3>
<p>TCP 是面向连接的协议</p>
<p>TCP 连接有<strong>三个阶段：</strong></p>
<p>连接建立</p>
<p>数据传送</p>
<p>连接释放</p>
<p>TCP 的连接管理就是使 TCP 连接的建立和释放都能正常地进行</p>
<h4 id="tcp-连接建立过程中要解决的三个问题">TCP
连接建立过程中要解决的三个问题</h4>
<p>要使每一方能够确知对方的<strong>存在</strong></p>
<p>要允许双方<strong>协商</strong>一些参数（如最大窗口值、是否使用窗口扩大选项和时间戳选项以及服务质量等）</p>
<p>能够对运输实体资源（如缓存大小、连接表中的项目等）进行<strong>分配</strong></p>
<p>TCP 连接的建立采用客户服务器方式</p>
<p>主动发起连接建立的应用进程叫做客户 (client)</p>
<p>被动等待连接建立的应用进程叫做服务器 (server)</p>
<p>TCP 建立连接的过程叫做握手</p>
<p>采用三报文握手：在客户和服务器之间交换三个 TCP
报文段，以防止已失效的连接请求报文段突然又传送到了，因而产生 TCP
连接建立错误</p>
<h4 id="三次握手">三次握手</h4>
<p>假设A为客户端，B为服务器端</p>
<p>B 的 TCP 服务器进程先创建传输控制块
TCB，准备接受客户进程的连接请求</p>
<p><br></p>
<p>第一次握手：A 的 TCP 向 B
主动发出连接请求报文段，其首部中的<strong>同步位 SYN =
1</strong>，并选择序号 seq = x，表明传送数据时的第一个数据字节的序号是
x</p>
<p>注意：TCP规定，SYN 报文段（即SYN =
1的报文段）<strong>不能携带数据，但要消耗掉一个序号</strong></p>
<p><br></p>
<p>B 的 TCP 收到连接请求报文段后，如同意，则发回确认</p>
<p>第二次握手：B 在确认报文段中应使 SYN = 1，使 ACK = 1，其确认号 ack =
x + 1，自己选择的序号 seq = y</p>
<p>这个报文段也不能携带数据，但同样要消耗掉一个序号</p>
<p><br></p>
<p>第三次握手：A 收到此报文段后向 B 给出确认，其 ACK = 1，确认号 ack = y
+ 1</p>
<p>A 的 TCP 通知上层应用进程，连接已经建立</p>
<p>TCP 标准规定：ACK 报文段可以携带数据</p>
<p>但如果不携带数据，则不消耗序号。下一个数据报文段的序号仍是 seq = x +
1</p>
<p>B 的 TCP 收到主机 A 的确认后，也通知其上层应用进程：TCP
连接已经建立。双方可以开始数据传送</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518214114580.png" class title="image-20230518214114580">
<h3 id="tcp的连接释放">TCP的连接释放</h3>
<p>TCP 连接释放过程比较复杂</p>
<p>数据传输结束后，通信的<strong>双方</strong>都可释放连接</p>
<p>TCP 连接释放过程是四报文握手</p>
<h4 id="四次挥手">四次挥手</h4>
<p>假设A为客户端，B为服务器端</p>
<p>第一次挥手：A 的应用进程先向其 TCP
发出连接释放报文段，并停止再发送数据，<strong>主动关闭</strong> TCP
连接</p>
<p>A 把连接释放报文段首部的 FIN = 1，其序号seq = u，等待 B 的确认</p>
<p>TCP规定：FIN 报文段即使不携带数据，也消耗掉一个序号</p>
<p><br></p>
<p>第二次挥手：B 发出确认，ACK=1，确认号 ack = u+1，这个报文段的序号 seq
= v</p>
<p>TCP 服务器进程通知高层应用进程</p>
<p>从 A 到 B 这个方向的连接就释放了，TCP 连接处于<strong>半关闭
(half-close)</strong> 状态。<strong>B 若发送数据，A
仍要接收</strong></p>
<p><br></p>
<p>第三次挥手：若 B 已经没有要向 A 发送的数据，其应用进程就通知 TCP
释放连接</p>
<p>FIN=1，ACK=1，确认号 ack = u+1</p>
<p><br></p>
<p>第四次挥手： A 收到连接释放报文段后，必须发出确认</p>
<p>ACK=1，确认号 ack=w+1，自己的序号 seq = u + 1</p>
<p>请注意：此时 TCP
连接还没有释放掉。必须经过<strong>时间等待计时器</strong> (TIME-WAIT
timer) 设置的时间 <strong>2MSL</strong> 后，A 才释放 TCP 连接</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518214945121.png" class title="image-20230518214945121">
<h4 id="必须等待2msl时间">必须等待2MSL时间</h4>
<p>第一，保证发送的<strong>最后一个 ACK</strong> 报文段能够到达 B</p>
<p>第二，防止“<strong>已失效的连接请求报文段</strong>”出现在本连接中</p>
<h4 id="保活计时器">保活计时器</h4>
<p>用来<strong>防止</strong>在 TCP
连接出现<strong>长时期空闲</strong></p>
<p>通常设置为 2 小时</p>
<p>若服务器过了 2
小时还没有收到客户的信息，它就发送<strong>探测</strong>报文段</p>
<p>若发送了 10 个探测报文段（每一个相隔 75
秒）还没有响应，就假定客户出了故障，因而就<strong>终止</strong>该连接</p>
<h3 id="tcp的有限状态机">TCP的有限状态机</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518215104230.png" class title="image-20230518215104230">
<h1 id="应用层-1">应用层</h1>
<p>精确定义不同主机中的多个应用进程之间的通信规则</p>
<h2 id="dns">DNS</h2>
<p>使用UDP通信</p>
<p>域名采用<strong>层次树状结构</strong>的命名方法</p>
<p>任何一个连接在互联网上的主机或路由器，都有一个唯一的层次结构的名字，即域名</p>
<p>域名结构：层次结构。由标号 (label)
序列组成，各标号之间用点（.）隔开，各标号分别代表不同级别的域名</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518215617894.png" class title="image-20230518215617894">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518215847704.png" class title="image-20230518215847704">
<p>DNS
是一个联机分布式数据库系统，采用<strong>客户服务器</strong>方式</p>
<p>域名到 IP
地址的解析是由若干个<strong>域名服务器程序</strong>共同完成</p>
<p>域名服务器程序在专设的结点上运行，运行该程序的机器称为域名服务器</p>
<h3 id="域名服务器类型">域名服务器类型</h3>
<p>根据所起的作用，分为四种类型：</p>
<p>根域名服务器</p>
<p>顶级域名服务器</p>
<p>权限域名服务器</p>
<p>本地域名服务器</p>
<h3 id="域名解析过程">域名解析过程</h3>
<p>递归查询</p>
<p>迭代查询</p>
<h2 id="ftp">FTP</h2>
<p>文件传送协议 FTP (File Transfer Protocol)
是互联网上使用得最广泛的文件传送协议</p>
<p>提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限</p>
<p>屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件</p>
<p>是文件共享协议的一个大类</p>
<p>只提供文件传送的一些基本服务，它使用 TCP 可靠的运输服务</p>
<p><br></p>
<p>主要功能：减少或消除在不同操作系统下处理文件的不兼容性</p>
<p>使用客户服务器方式</p>
<p>一个 FTP 服务器进程可同时为多个客户进程提供服务</p>
<p><strong>FTP 的服务器进程由两大部分组成：</strong></p>
<p>一个<strong>主进程</strong>，负责接受新的请求，端口21</p>
<p>若干个<strong>从属进程</strong>，负责处理单个请求，端口20</p>
<h2 id="www">WWW</h2>
<p>以<strong>客户服务器</strong>方式工作</p>
<p>访问方法：链接</p>
<p>提供分布式服务</p>
<p>是超文本 (hypertext) 系统的扩充</p>
<p>超文本：由多个信息源链接成。是万维网的基础</p>
<p>超媒体与超文本的区别：文档内容不同</p>
<h3 id="万维网必须解决的问题">万维网必须解决的问题</h3>
<ol type="1">
<li>怎样标志分布在整个互联网上的万维网文档？</li>
</ol>
<p>使用<strong>统一资源定位符 URL</strong> (Uniform Resource
Locator)</p>
<p>使每一个文档在整个互联网的范围内具有<strong>唯一</strong>的标识符
URL</p>
<ol start="2" type="1">
<li>用什么协议来实现万维网上的各种链接？</li>
</ol>
<p>使用<strong>超文本传送协议 HTTP</strong> (HyperText Transfer
Protocol)</p>
<p>HTTP 是一个应用层协议，使用 <strong>TCP</strong>
连接进行可靠的传送</p>
<p>超文本传输协议HTTP，协议本身无连接的，无状态的</p>
<ol start="3" type="1">
<li>怎样使不同作者创作的不同风格的万维网文档都能在互联网上的各种主机上显示出来，同时使用户清楚地知道在什么地方存在着链接？</li>
</ol>
<p>使用<strong>超文本标记语言 HTML</strong> (HyperText Markup
Language)</p>
<ol start="4" type="1">
<li>怎样使用户能够很方便地找到所需的信息？</li>
</ol>
<p>使用各种的搜索工具（即搜索引擎）</p>
<h3 id="url格式">URL格式</h3>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518220510200.png" class title="image-20230518220510200">
<h2 id="电子邮件">电子邮件</h2>
<p>邮件发送和读取使用不同的协议</p>
<p>简单邮件发送协议 SMTP：用于在用户代理向邮件服务器 或
邮件服务器之间发送邮件</p>
<p>邮局协议 POP3：用于用户代理从邮件服务器读取邮件</p>
<p>邮件服务器必须能够同时充当客户和服务器</p>
<p>SMTP 和 POP3（或 IMAP）都使用 TCP 连接可靠地传送邮件</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518220654447.png" class title="image-20230518220654447">
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230518220711630.png" class title="image-20230518220711630">
<h3 id="smtp">SMTP</h3>
<h3 id="pop">POP</h3>
<h1 id="总结">总结</h1>
<h2 id="串讲强调内容">串讲强调内容</h2>
<h3 id="概述-1">概述</h3>
<p>互联网组成（工作方式上分类）：边缘部分，核心部分</p>
<p>边缘部分：主机</p>
<p>主机之间通信方式：对等方式，客户与服务器模式</p>
<p>交换方式：电路交换，分组交换，报文交换</p>
<p>核心部分：路由器</p>
<p>IP数据报转发交换方式：直接交换（与路由器直接连接的网络），间接交换（先交给下一个路由器，然后再交给下一个路由器）</p>
<p>计算机网络性能指标（计算题）：带宽、时延、时延带宽积（信道容量，信道里bit的总数）</p>
<p>体系结构（五层体系结构，OSI/RM七层体系结构，TCP/IP四层体系结构 ）</p>
<p>五层体系结构：物理层，数据链路层，网络层，运输层，应用层</p>
<p>OSI七层体系结构：物理层，数据链路层，网络层，运输层，会话层，表示层，应用层（把五层体系结构的应用层分为会话层，表示层，应用层）</p>
<p>TCP/IP四层体系结构：网络接口层，网际层，运输层，应用层（把五层体系结构的物理层和数据链路层合成网络接口层）</p>
<p>沙漏计时器形状的TCP/IP协议族</p>
<p>协议三要素：语法，语义，同步</p>
<p>应用层协议</p>
<p>运输层两个协议：TCP（三次握手，四次挥手）, UDP</p>
<p>SYN=1：请求连接建立或接受连接请求报文</p>
<p>控制字段6个控制位</p>
<p>面向连接三个阶段：连接建立阶段、连接维持阶段（传输数据阶段）、连接释放阶段</p>
<p>网络层：路由，网络互连</p>
<p>与IP协议配合使用的协议：ARP(地址解析协议)，ICMP(报文只能作为IP数据报的数据部分，不能单独传输)，IGMP</p>
<h3 id="物理层-2">物理层</h3>
<p>物理接口四个特性：机械特性，电气特性，功能特性，过程特性</p>
<p>通信基本模型：源系统、传输系统、目的系统</p>
<p>常用编码方式：不归零，归零，曼彻斯特，差分曼彻斯特</p>
<p>以太网里的编码主要是曼彻斯特编码</p>
<p>物理层下面的传输媒体：导引型，非导引型</p>
<p>有线：双绞线（568-A, 568-B），光纤，同轴电缆</p>
<p>信道复用技术（为了提高信道利用率）：频分，时分，波分，码分</p>
<p>信道极限传输速率和两个定理：奈氏准则和香农定理</p>
<p>常用宽带接入技术：ADSL（非对称用户数据线，对电话线改造）、有线电视网改造（光纤同步混合网）、FTTx</p>
<h3 id="数据链路层-2">数据链路层</h3>
<p>数据链路层以帧为单位</p>
<p>链路：从一个节点到相邻节点的一段物理线路（有线或无线），中间没有任何其他交换节点</p>
<p>数据链路：把实现控制数据传输协议的硬件和软件加到链路上，构成了数据链路</p>
<p>信道两类：点对点，广播信道</p>
<p>数据链路层解决三个基本问题：封装成帧，透明传输，差错检测</p>
<p>透明传输两种：字符填充，0比特填充</p>
<p>0比特填充（0比特插入或删除）：发送端对数据帧的数据部分扫描，发现5个连续1就在后面加0，接收端先确定完整数据帧（通过标志字段），扫描数据部分，5个连续1，后面0删掉，如果是5个连续1，后面还是1，就是标志字段</p>
<p>差错检测：CRC循环冗余码（只有数据链路层加尾部）</p>
<p>两个主要协议：PPP（帧的格式，首部4个字段5个字节，尾部2个字段3个字节，数据部分最大长度1500字节，看清问题），CSMA/CD（工作原理：先听后发，边听边发，冲突停止，延迟重发）</p>
<p>CSMA/CD：发送数据首先通过网卡，首先封装成帧，放进缓存里，等待发送；对信道进行监听，直到信道空闲；发送过程继续监听看是否冲突；如果冲突是在<span class="math inline">\(2\tau\)</span>时间内就失败，不然就成功；出现冲突时发送人为干扰信号加强冲突，等随机时间（二进制指数退避算法）重传</p>
<p>局域网底两层：LLC（逻辑电路控制子层），MAC（介质访问控制子层）</p>
<p>MAC地址48位二进制数</p>
<p>MAC帧格式：首部（3个字段14个字节），尾部（1个字段4个字节），数据部分（最小长度46字节，最大长度1500字节），即有效MAC帧长度最小46+18=64字节，最大1500+18=1518字节</p>
<p>CSMA/CD协议发送MAC帧</p>
<p>收到MAC帧首先检查帧的长度，如果小于64字节就直接丢弃，然后看目的MAC地址，如果与本机相同就接受，如果不同就丢弃</p>
<p>扩展以太网：</p>
<p>物理层扩展（集线器，是冲突域也是广播域，多个集线器连起来就将多个较小冲突域变成较大冲突域）</p>
<p>数据链路层扩展（以太网交换机（多端口网桥），作用是扩大以太网，对数据帧有转发和过滤作用）</p>
<p>交换机与集线器差异很大，交换机任意两个端口都可以构成逻辑电路，而且是无碰撞传输，交换机每个端口都有缓存</p>
<p>以太网交换机对数据转发，通过转发表，转发表的构造通过自学习算法（端口收到数据帧，首先取出原地址，看看转发表有没有原地址对应的端口，如果没有就写进去，再取出目的端口地址，在转发表中找，如果有，转到相应端口去；如果没有，除了进入的端口以外，广播到所有的端口上去；最后构成完整转发表）</p>
<p>生成树：防止环路兜圈子，只保留一条链路</p>
<p>实验做了端口聚合，将多个物理端口聚合为一个逻辑端口，具有负载均衡</p>
<p>虚拟局域网，不是特殊局域网，是局域网的应用，对工作组重新划分，主要针对交换机（用交换机端口来划分）</p>
<p>实习做过单交换机、跨交换机（交换机必须连通）</p>
<p>高速以太网，3个物理层的规范：100BASE-TX（铜缆，最大100m）,
100BASE-T4（铜缆，最大100m）, 100BASE-FX（光纤，最大2000m）</p>
<p>千兆以太网，4种</p>
<h3 id="网络层-2">网络层</h3>
<p>网络层提供的两种服务：虚电路服务，数据报服务</p>
<p>虚拟互联网</p>
<p>IP协议屏蔽了各种异构网络之间的差异</p>
<p>标准分类的IP地址，使用的只有ABC类，D类是广播地址</p>
<p>标准分类IP地址：网络号，主机号</p>
<p>1-127：A类</p>
<p>128-191：B类</p>
<p>192-223：C类</p>
<p>特殊IP地址：</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">网络号</th>
<th style="text-align: center;">主机号</th>
<th style="text-align: center;">代表的意思</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">在本网络上的本主机</td>
</tr>
<tr class="even">
<td style="text-align: center;">0</td>
<td style="text-align: center;">host-id</td>
<td style="text-align: center;">在本网络上的某台主机</td>
</tr>
<tr class="odd">
<td style="text-align: center;">全1</td>
<td style="text-align: center;">全1</td>
<td style="text-align: center;">只在本网络上广播</td>
</tr>
<tr class="even">
<td style="text-align: center;">net-id</td>
<td style="text-align: center;">全1</td>
<td style="text-align: center;">对net-id上所有主机广播</td>
</tr>
<tr class="odd">
<td style="text-align: center;">127</td>
<td style="text-align: center;">非全0或全1的任何数</td>
<td style="text-align: center;">用于本地软件环回测试</td>
</tr>
</tbody>
</table>
<p>广播地址就是主机号全为1</p>
<p>无分类编址技术CIDR：构造超网</p>
<p>地址块：网络前缀相同的所有连续IP地址</p>
<p>划分子网（大的网络化为小的网络，从主机号里从左向右依次取若干位做子网号），构成超网（将多个小的C类网络合并成逻辑的B类网络，从网络号从右往左取若干位）</p>
<p>将一个网络划分成6个子网：从主机号开始从左向右划分3位</p>
<p>网络号不能全取0，主机号也不能取全0</p>
<p>划分子网：把两级地址结构化为三级：网络号，子网号，主机号</p>
<p>子网掩码：网络号，子网号位取1，主机号位取0</p>
<p>网络层转发分组的过程：基于终点（根据网络号）的转发，最长前缀匹配</p>
<p>ARP协议（将IP地址映射成MAC地址）</p>
<p>ICMP协议，两类报文：ICMP差错报告报文，ICMP询问报文</p>
<p>差错报告报文：终点不可达，时间超过，参数问题，改变路由（重定向）</p>
<p>询问报文：回送回答（ping应用，检查可达性），时间戳回答</p>
<p>互联网路由选择协议：IGP(内部网关协议，自治系统内部)，EGP(外部网关协议，自治系统之间)</p>
<p>内部网关协议：RIP, OSPF</p>
<p>路由协议解决三个问题：和谁交换信息，交换谁的信息，怎么交换</p>
<p>RIP：只与相邻路由器交换，交换整个路由表，每间隔一段时间交换</p>
<p>OSPF：洪泛法，广播方式，交换部分信息（链路状态），链路状态变化时或每隔一段时间才交换</p>
<p>外部网关协议BGP：基于路径向量（主要考内部网关协议）</p>
<h3 id="运输层-1">运输层</h3>
<p>端口号：熟知端口号，系统端口号，短暂端口号</p>
<p>常用的熟知端口号：FTP(21), TELNET(23), SMTP(25), HTTP(80),
DNS(53)</p>
<p>两个协议：UDP，TCP</p>
<p>UDP无连接，不可靠，尽最大努力交付</p>
<p>UDP报文格式：首部（4个字段，8个字节），数据部分</p>
<p>首部校验和计算时，要加12个字节的伪首部，不使用CRC，搞清楚计算过程</p>
<p>目的端口号要是熟知端口号，就是从客户端发往服务器端</p>
<p>源端口号要是熟知端口号，就是从服务器发往客户端</p>
<p>TCP协议，面向连接，可靠协议</p>
<p>可靠传输工作原理：停止等待协议</p>
<p>TCP实现可靠传输：滑动窗口</p>
<p>TCP面向字节流，可能合并也可能拆分，一个TCP报文段的数据可能是一个应用进程的数据，也可能是多个应用进程的数据，有也可能是一个应用进程数据的一部分，受发送窗口制约</p>
<p>发送窗口受接收窗口制约，拥塞控制以后，发送窗口值取通知窗口与拥塞窗口的最小值</p>
<p>四种拥塞控制算法：慢开始（慢开始门限，并不慢，一个传输轮次就加倍，只是开始比较少，开始为1），拥塞避免（每一个传输轮次后+1，出现拥塞时，修改慢开始门限变量，为拥塞时拥塞窗口值的一半，再慢开始，拥塞窗口设为1），快重传（让发送方尽早知道丢失），快恢复（3个重复，慢开始门限设为当前拥塞窗口的一半，将拥塞窗口设为慢开始门限变量，并执行拥塞避免算法）</p>
<p>流量控制：滑动窗口</p>
<p>三次握手，四次挥手</p>
<p>累积确认，选择确认</p>
<h3 id="应用层-2">应用层</h3>
<p>DNS</p>
<p>域名解析过程：通过域名服务器</p>
<p>域名服务器分为四类：根域名服务器，顶级域名服务器，权限域名服务器，本地域名服务器</p>
<p>域名解析过程分为两种：递归，迭代</p>
<p>文件传输两个熟知端口号：21（建立控制连接，是主进程的端口号），20（建立数据连接，是从属进程的端口号）</p>
<p>WWW</p>
<p>HTTP</p>
<p>电子邮件SMTP, POP</p>
<h2 id="各种协议">各种协议</h2>
<p>协议三要素：语法，语义，同步</p>
<p>对等层之间传输的数据单位为“协议数据单元”</p>
<h3 id="点对点协议ppp">点对点协议PPP</h3>
<p>不可靠协议，只检错，不纠错</p>
<p>PPP协议帧格式</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511200459250.png" class title="image-20230511200459250">
<p>首部：4个字段，5个字节</p>
<p>数据部分：最多不超过1500字节</p>
<p>尾部：2个字段，3个字节</p>
<p>PPP协议最长：5+1500+3=1508字节</p>
<p><br></p>
<p>透明传输：字节填充和零比特填充</p>
<p>PPP协议工作状态：</p>
<p>链路控制协议 LCP，网络控制协议 NCP</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511201259892.png" class title="image-20230511201259892">
<h3 id="csmacd协议">CSMA/CD协议</h3>
<p>CSMA/CD传输的MAC帧</p>
<p>MAC帧格式</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511230128229.png" class title="image-20230511230128229">
<p>首部3个字段14个字节</p>
<p>数据部分46-1500个字节</p>
<p>尾部1个字段4个字节</p>
<p>有效MAC帧长度：64-1518个字节</p>
<p><br></p>
<p>CSMA/CD工作流程：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511203533432.png" class title="image-20230511203533432">
<p>碰撞后的重传时机由“二进制指数退避算法”决定</p>
<p>基本退避时间：<span class="math inline">\(2\tau\)</span></p>
<p>重传时机举例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230511204325857.png" class title="image-20230511204325857">
<h3 id="生成树协议">生成树协议</h3>
<p>用于以太网交换机之间，防止形成环路</p>
<h3 id="网际协议ip-1">网际协议IP</h3>
<p>IP数据报格式</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516204237576.png" class title="image-20230516204237576">
<p>首部：固定部分20字节</p>
<p>数据部分：长度人为规定</p>
<p><br></p>
<p>转发IP分组的过程：基于终点（根据网络号）的转发，最长前缀匹配</p>
<p>举例：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211550164.png" class title="image-20230516211550164">
<p>主机 H1 发送出的、目的地址是 128.1.2.132 的分组是如何转发的？</p>
<p>1.H1 首先检查 128.1.2.132
是否连接在<strong>本网络</strong>上，如果是，则直接交付；否则，就送交路由器
R1</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211613257.png" class title="image-20230516211613257">
<p>2.路由器 R1 收到分组后查找转发表，先检查第 1 行</p>
<p>255.255.255.192 AND 128.1.2.132 = 128.1.2.128 /26，不匹配</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516211802090.png" class title="image-20230516211802090">
<p>3.再检查第2行</p>
<p>255.255.255.128 AND 128.1.2.132 = 128.1.2.128 /25，匹配</p>
<p>进行分组的直接交付（通过路由器 R1 的接口 1）</p>
<p>要是有两个匹配结果，就用网络前缀长的，因为路由更具体（最长前缀匹配）</p>
<h3 id="地址解析协议arp-1">地址解析协议ARP</h3>
<p>ARP作用：从 IP 地址解析出 MAC 地址</p>
<p>ARP工作：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230516202827317.png" class title="image-20230516202827317">
<p>例如主机A查找主机B的MAC地址：</p>
<p>若两台主机在同一个局域网：</p>
<p>主机A在本局域网上广播发送ARP请求分组，然后主机B单播给主机A对应的MAC地址</p>
<p>若两台主机不在同一个局域网：</p>
<p>A先广播ARP，找路由器</p>
<p>路由器单播A，告知路由器的MAC地址</p>
<p>路由器在另一个网络广播ARP找B</p>
<p>B单播路由器，给出对应MAC地址</p>
<p><br></p>
<p>使用ARP的四种情况：</p>
<p>发送方是<strong>主机</strong>，要把 IP
数据报发送到<strong>本网络上的另一个主机</strong>。这时用 ARP
找到目的主机的硬件地址</p>
<p>发送方是<strong>主机</strong>，要把 IP
数据报发送到<strong>另一个网络上的一个主机</strong>。这时用 ARP
找到<strong>本网络上的一个路由器</strong>的硬件地址。剩下的工作由这个路由器来完成</p>
<p>发送方是<strong>路由器</strong>，要把 IP
数据报转发到<strong>本网络上的一个主机</strong>。这时用 ARP
找到目的主机的硬件地址</p>
<p>发送方是<strong>路由器</strong>，要把 IP
数据报转发到<strong>另一个网络上的一个主机</strong>。这时用 ARP
找到本网络上另一个路由器的硬件地址。剩下的工作由这个路由器来完成</p>
<h3 id="网际控制报文协议icmp-1">网际控制报文协议ICMP</h3>
<p>两种ICMP协议报文：差错报告报文、询问报文</p>
<p>差错报告报文有：时间不可达（3），时间超过（11），参数问题（12），重定向（5）</p>
<p>询问报文有：回送请求或回答（8或0），时间戳请求或回答（13或14）</p>
<p>应用：PING</p>
<h3 id="内部网关协议rip-1">内部网关协议RIP</h3>
<p>三个特点：只与相邻路由器交换信息，交换整张路由表，每间隔一段时间交换</p>
<p>距离向量算法：</p>
<p>对<strong>每个相邻路由器</strong>（假设其地址为 X）发送过来的 RIP
报文，路由器：</p>
<ol type="1">
<li><p>修改此 RIP
报文中的<strong>所有项目</strong>：把“下一跳”字段中的地址都改为
X，并把所有的“距离”字段的值加
1。每一个项目都有三个关键数据：到目的网络N，距离是d，下一跳路由器是X</p></li>
<li><p>对修改后的RIP报文中每一个项目，进行以下步骤：</p></li>
</ol>
<p>先把发来的路由表全部距离+1，并且下一跳地址改为发来的路由器，即X</p>
<p>若发来的路由表中包含自己路由表<strong>没有的目的网络</strong>，则直接添加到自己的路由表中</p>
<p>若发来的路由表中含有自己路由表<strong>已有的目的网络</strong>，并且<strong>自己路由表中到这个目的网络的下一跳地址也是X</strong>，则直接更新自己的路由表（因为这是最新的消息，要以最新的消息为准，到，目的网络的距离可能增大，可能减小，也可能不变）</p>
<p>若下一跳地址不是X，则比较距离，更新表项为最小的距离对应的项目（若距离相同，则不更新）</p>
<p><br></p>
<ol start="3" type="1">
<li><p>若三分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达的路由器，即把距离设置为16</p></li>
<li><p>返回</p></li>
</ol>
<p>例子：</p>
<img src="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230517171755700.png" class title="image-20230517171755700">
<p><br></p>
<p>坏消息传的慢</p>
<h3 id="内部网关协议ospf-1">内部网关协议OSPF</h3>
<p>三个特点：洪泛法，交换部分信息（链路状态），链路改变或间隔一段时间发送消息</p>
<h3 id="tcp协议">TCP协议</h3>
<h3 id="udp协议">UDP协议</h3>
<h2 id="英文简写">英文简写</h2>
<p>Internet：互联网</p>
<p>ISP (Internet Service Provider)：互联网服务提供者</p>
<p>IXP (Internet eXchange Point)：互联网交换点</p>
<p>WWW(World Wide Web)：万维网</p>
<p>RFC（Request For Comments）：请求评论</p>
<p>C/S（Client / Server）：客户/服务器方式</p>
<p>P2P（Peer to Peer）：对等方式</p>
<p>WAN (Wide Area Network)：广域网（远程网）</p>
<p>MAN (Metropolitan Area Network)：城域网</p>
<p>LAN (Local Area Network) ：局域网</p>
<p>PAN (Personal Area Network) ：个人区域网</p>
<p>AN (Access Network)：接入网</p>
<p>RTT (Round-Trip Time)：往返时间</p>
<p>SNA (System Network Architecture) ：系统网络体系结构</p>
<p>ISO (International Organization for
Standardization)：国际标准化组织</p>
<p>OSI/RM (Open Systems Interconnection Reference
Model)：开放系统互连参考模型</p>
<p>TCP（Transmission Control Protocol）：传输控制协议</p>
<p>UDP（User Datagram Protocol）：用户数据报协议</p>
<p>IP (Internet Protocol) ：网际协议</p>
<p>PDU (Protocol Data Unit)：协议数据单元</p>
<p>SAP (Service Access Point)：服务访问点</p>
<p>SDU (Service Data Unit)：服务数据单元</p>
<p>UTP (Unshielded Twisted Pair)：非屏蔽双绞线</p>
<p>STP (Shielded Twisted Pair)：屏蔽双绞线</p>
<p>FDM (Frequency Division Multiplexing)：频分复用</p>
<p>TDM (Time Division Multiplexing)：时分复用</p>
<p>FDMA (Frequency Division Multiple Access)：频分多址接入</p>
<p>TDMA (Time Division Multiple Access)：时分多址接入</p>
<p>WDM (Wavelength Division Multiplexing) ：波分复用</p>
<p>CDM (Code Division Multiplexing) ：码分复用</p>
<p>CDMA (Code Division Multiple Access)：码分多址</p>
<p>SONET (Synchronous Optical Network) ：同步光纤网</p>
<p>SDH (Synchronous Digital Hierarchy) ：同步数字系列</p>
<p>ADSL (Asymmetric Digital Subscriber Line)：非对称数字用户线</p>
<p>DMT（Discrete Multi-Tone）：离散多音调</p>
<p>DSLAM（DSL Access Multiplexer）：数字用户线接入复用器</p>
<p>HFC (Hybrid Fiber Coax) ：光纤同轴混合网</p>
<p>FTTx (Fiber To The…)：多种宽带光纤接入方式</p>
<p>ODN (Optical Distribution Network)：光配线网</p>
<p>PON (Passive Optical Network)：无源光网络</p>
<p>MTU (Maximum Transfer Unit)：最大传送单元</p>
<p>SOH (Start Of Header) ：控制字符，帧开始符</p>
<p>EOT (End Of Transmission) ：控制字符，帧结束符</p>
<p>BER (Bit Error Rate)：误码率</p>
<p>CRC (Cyclic Redundancy Check)：循环冗余检验</p>
<p>FCS (Frame Check Sequence)：帧检验序列</p>
<p>PPP (Point-to-Point Protocol)：点对点协议</p>
<p>LCP (Link Control Protocol): 链路控制协议</p>
<p>NCP (Network Control Protocol): 网络控制协议</p>
<p>LLC (Logical Link Control): 逻辑链路控制</p>
<p>MAC (Medium Access Control): 媒体接入控制</p>
<p>CSMA/CD (Carrier Sense Multiple Access with Collision Detection)
：载波监听多点接入 / 碰撞检测</p>
<p>OUI (Organizationally Unique Identifier)：组织唯一标识符</p>
<p>CAM (Content addressable Memory)：内容可寻址存储器</p>
<p>STP (Spanning Tree Protocol) ：生成树协议</p>
<p>VLAN (Virtual LAN)：虚拟局域网</p>
<p>VC (Virtual Circuit)：虚电路</p>
<p>SDN (Software Defined Network)：软件定义网络</p>
<p>ARP (Address Resolution Protocol)：地址解析协议</p>
<p>ICMP (Internet Control Message Protocol)：网际控制报文协议</p>
<p>IGMP (Internet Group Management Protocol)：网际组管理协议</p>
<p>ICANN (Internet Corporation for Assigned Names and
Numbers)：互联网名字和数字分配机构</p>
<p>CIDR (Classless Inter-Domain Routing) ：无分类域间路由选择</p>
<p>TTL (Time To Live): 生存时间</p>
<p>PING (Packet InterNet Groper)：分组网间探测</p>
<p>AS (Autonomous System) : 自治系统</p>
<p>IGP (Interior Gateway Protocol)：内部网关协议</p>
<p>EGP (External Gateway Protocol)：外部网关协议</p>
<p>RIP (Routing Information Protocol)：路由信息协议</p>
<p>OSPF (Open Shortest Path First)：开放最短路径优先</p>
<p>ABR (area border router)：区域边界路由器</p>
<p>BR (backbone router)：主干路由器</p>
<p>ASBR (AS border router)：自治系统边界路由器</p>
<p>DR (designated router) ：指定的路由器</p>
<p>UDP (User Datagram Protocol)：用户数据报协议</p>
<p>TCP (Transmission Control Protocol)：传输控制协议</p>
<p>TPDU (Transport Protocol Data Unit)：运输协议数据单元</p>
<p>ARQ（Automatic Repeat reQuest）：连续自动重传请求协议</p>
<p>MSS(Maximum Segment Size): 最大报文段长度</p>
<p>RTO (Retransmission Time-Out) ：超时重传机制</p>
<p>rwnd (receiver window)：接收窗口</p>
<p>cwnd (Congestion Window)：拥塞窗口</p>
<p>ssthresh：慢开始门限</p>
<p>AI (Additive Increase) ：加法增大</p>
<p>FR (Fast Retransmission) ：快重传</p>
<p>FR (Fast Recovery)：快恢复</p>
<p>DNS (Domain Name System)：域名系统</p>
<p>FTP (File Transfer Protocol) ：文件传输协议</p>
<p>URL (Uniform Resource Locator) ：统一资源定位符</p>
<p>HTTP (HyperText Transfer Protocol)：超文本传送协议</p>
<p>HTML (HyperText Markup Language) ：超文本标记语言</p>
<p><br></p>
<p><br></p>
<p><br></p>
<hr>
<h1 id="参考资料">参考资料</h1>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1V4411Z7VA">CRC校验演示</a></p>
<p>课程PPT</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%8D%E4%B9%A0/">复习</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/20/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%94%B5%E8%B7%AF%E4%B8%8E%E6%A8%A1%E6%8B%9F%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="电路与模拟电子技术复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">电路与模拟电子技术复习整理</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/10/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E5%A4%A9%E6%A2%AF%E8%B5%9B%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95/" title="天梯赛训练记录"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">天梯赛训练记录</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/12/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/Java%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="Java复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-12</div><div class="title">Java复习整理</div></div></a></div><div><a href="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数据库复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-01</div><div class="title">数据库复习整理</div></div></a></div><div><a href="/2023/02/14/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数据结构复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-14</div><div class="title">数据结构复习整理</div></div></a></div><div><a href="/2023/06/03/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数字信号处理复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-03</div><div class="title">数字信号处理复习整理</div></div></a></div><div><a href="/2023/02/16/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="操作系统复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-16</div><div class="title">操作系统复习整理</div></div></a></div><div><a href="/2023/06/05/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="算法分析与设计复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-05</div><div class="title">算法分析与设计复习整理</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/WinkySpeed%20SP%20-%20Repaired.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">WinkySpeed</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/WinkySpeed"><i class="fab fa-github"></i><span>GitHub</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">计算机网络复习整理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">计算机网络在信息时代的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%BF%9E%E7%BD%91%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%87%8D%E8%A6%81%E5%9F%BA%E6%9C%AC%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.1.</span> <span class="toc-text">互连网的两个重要基本特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E6%A6%82%E8%BF%B0"><span class="toc-number">2.2.</span> <span class="toc-text">互联网概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">2.2.1.</span> <span class="toc-text">网络的网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%BF%9E%E7%BD%91%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84%E5%8F%91%E5%B1%95%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">2.2.2.</span> <span class="toc-text">互连网基础结构发展三个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.2.3.</span> <span class="toc-text">互联网的标准化工作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%84%E6%88%90"><span class="toc-number">2.3.</span> <span class="toc-text">互联网组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E8%BE%B9%E7%BC%98%E9%83%A8%E5%88%86"><span class="toc-number">2.3.1.</span> <span class="toc-text">互联网边缘部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%97%B4%E4%B8%A4%E7%A7%8D%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">端系统之间两种通信方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.1.1.1.</span> <span class="toc-text">客户&#x2F;服务器方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.1.1.2.</span> <span class="toc-text">对等方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%BF%9E%E7%BD%91%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">2.3.2.</span> <span class="toc-text">互连网核心部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B8%E5%9E%8B%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">典型交换技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.2.1.1.</span> <span class="toc-text">电路交换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">2.3.2.1.1.1.</span> <span class="toc-text">电路交换的三个阶段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.2.1.1.2.</span> <span class="toc-text">电路交换的特点</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.2.1.2.</span> <span class="toc-text">分组交换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.2.1.2.1.</span> <span class="toc-text">分组交换的主要特点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E7%9A%84%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="toc-number">2.3.2.1.2.2.</span> <span class="toc-text">分组的存储转发过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E4%BC%98%E7%82%B9"><span class="toc-number">2.3.2.1.2.3.</span> <span class="toc-text">分组交换优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%BC%BA%E7%82%B9"><span class="toc-number">2.3.2.1.2.4.</span> <span class="toc-text">分组交换缺点</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.2.1.3.</span> <span class="toc-text">报文交换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">2.3.2.1.4.</span> <span class="toc-text">三种交换技术的比较</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%88%AB"><span class="toc-number">2.4.</span> <span class="toc-text">计算机网络类别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.1.</span> <span class="toc-text">分类方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">按照网络的作用范围进行分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">按照网络的使用者进行分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%9D%A5%E6%8A%8A%E7%94%A8%E6%88%B7%E6%8E%A5%E5%85%A5%E5%88%B0%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">用来把用户接入到互联网的网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">2.5.</span> <span class="toc-text">计算机网络的性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">2.5.1.</span> <span class="toc-text">计算机网络的性能指标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9F%E7%8E%87"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">速率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">吞吐量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.</span> <span class="toc-text">时延</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.1.</span> <span class="toc-text">发送时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E6%92%AD%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.2.</span> <span class="toc-text">传播时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.3.</span> <span class="toc-text">处理时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.4.</span> <span class="toc-text">排队时延</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E6%97%B6%E5%BB%B6"><span class="toc-number">2.5.1.4.5.</span> <span class="toc-text">四种时延</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="toc-number">2.5.1.5.</span> <span class="toc-text">时延带宽积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4-rtt-round-trip-time"><span class="toc-number">2.5.1.6.</span> <span class="toc-text">往返时间 RTT (Round-Trip
Time)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">2.5.1.7.</span> <span class="toc-text">利用率</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.6.</span> <span class="toc-text">计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E5%BD%A2%E6%88%90"><span class="toc-number">2.6.1.</span> <span class="toc-text">计算机网络体系结构的形成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1"><span class="toc-number">2.6.2.</span> <span class="toc-text">协议与划分层次</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%89%E4%B8%AA%E7%BB%84%E6%88%90%E8%A6%81%E7%B4%A0"><span class="toc-number">2.6.2.1.</span> <span class="toc-text">协议三个组成要素：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">2.6.2.2.</span> <span class="toc-text">分层优缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E5%B1%82%E5%AE%8C%E6%88%90%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">2.6.2.3.</span> <span class="toc-text">各层完成的主要功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.2.4.</span> <span class="toc-text">体系结构与实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E6%9C%89%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.6.3.</span> <span class="toc-text">具有五层协议的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E5%B1%82%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%90%84%E5%B1%82"><span class="toc-number">2.6.3.1.</span> <span class="toc-text">五层体系结构各层</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">2.6.3.1.1.</span> <span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">2.6.3.1.2.</span> <span class="toc-text">运输层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">2.6.3.1.3.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">2.6.3.1.4.</span> <span class="toc-text">数据链路层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.6.3.1.5.</span> <span class="toc-text">物理层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%84%E5%B1%82%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93"><span class="toc-number">2.6.3.1.6.</span> <span class="toc-text">各层数据单元总结</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%90%84%E5%B1%82%E4%B9%8B%E9%97%B4%E4%BC%A0%E8%BE%93"><span class="toc-number">2.6.3.1.7.</span> <span class="toc-text">数据在各层之间传输</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E5%B1%82%E4%B8%8E%E5%8D%8F%E8%AE%AE%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83"><span class="toc-number">2.6.3.1.8.</span> <span class="toc-text">对等层与协议数据单元</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%8D%8F%E8%AE%AE%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9"><span class="toc-number">2.6.4.</span> <span class="toc-text">实体、协议、服务和服务访问点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E9%82%BB%E4%B8%A4%E5%B1%82%E4%B9%8B%E9%97%B4%E5%85%B3%E7%B3%BB"><span class="toc-number">2.6.4.1.</span> <span class="toc-text">相邻两层之间关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcpip-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.6.5.</span> <span class="toc-text">TCP&#x2F;IP 的体系结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82-1"><span class="toc-number">3.</span> <span class="toc-text">物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">3.2.</span> <span class="toc-text">数据通信的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.1.</span> <span class="toc-text">数据通信系统的模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%85%B3%E4%BF%A1%E9%81%93%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.2.2.</span> <span class="toc-text">有关信道的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%86%E7%B1%BB"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">信道分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">常用编码方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.2.2.1.</span> <span class="toc-text">编码方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="toc-number">3.2.2.2.2.</span> <span class="toc-text">编码方式对比</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%B8%A6%E9%80%9A%E8%B0%83%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.2.3.</span> <span class="toc-text">基本的带通调制方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text">信道的极限容量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%90%E5%88%B6%E7%A0%81%E5%85%83%E5%9C%A8%E4%BF%A1%E9%81%93%E4%B8%8A%E7%9A%84%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%9B%A0%E7%B4%A0"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">限制码元在信道上的传输速率的两个因素</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87%E7%9A%84%E9%A2%91%E7%8E%87%E8%8C%83%E5%9B%B4"><span class="toc-number">3.2.3.1.1.</span> <span class="toc-text">信道能够通过的频率范围</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%A1%E5%99%AA%E6%AF%94"><span class="toc-number">3.2.3.1.2.</span> <span class="toc-text">信噪比</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%99%E5%86%9C%E5%85%AC%E5%BC%8F"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">香农公式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E9%AB%98%E4%BF%A1%E6%81%AF%E7%9A%84%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.3.3.</span> <span class="toc-text">提高信息的传输速率的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99%E5%92%8C%E9%A6%99%E5%86%9C%E5%85%AC%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="toc-number">3.2.3.4.</span> <span class="toc-text">奈氏准则和香农公式对比</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">3.3.</span> <span class="toc-text">物理层下面的传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">3.3.1.</span> <span class="toc-text">引导型传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BB%9E%E7%BA%BF"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">双绞线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">同轴电缆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">光纤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E6%A8%A1%E5%85%89%E7%BA%A4"><span class="toc-number">3.3.1.3.1.</span> <span class="toc-text">多模光纤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E6%A8%A1%E5%85%89%E7%BA%A4"><span class="toc-number">3.3.1.3.2.</span> <span class="toc-text">单模光纤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%89%E7%BC%86"><span class="toc-number">3.3.1.3.3.</span> <span class="toc-text">光缆</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">3.3.1.3.4.</span> <span class="toc-text">优点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">3.3.2.</span> <span class="toc-text">非导引型传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%BE%84%E6%95%88%E5%BA%94"><span class="toc-number">3.3.2.1.</span> <span class="toc-text">多径效应</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AE%E6%B3%A2%E6%8E%A5%E5%8A%9B"><span class="toc-number">3.3.2.2.</span> <span class="toc-text">微波接力</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%AB%E6%98%9F%E9%80%9A%E4%BF%A1"><span class="toc-number">3.3.2.3.</span> <span class="toc-text">卫星通信</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">3.4.</span> <span class="toc-text">信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.1.</span> <span class="toc-text">频分复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.2.</span> <span class="toc-text">时分复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%91%E5%88%86%E5%A4%9A%E5%9D%80%E4%B8%8E%E6%97%B6%E5%88%86%E5%A4%9A%E5%9D%80"><span class="toc-number">3.4.3.</span> <span class="toc-text">频分多址与时分多址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.4.</span> <span class="toc-text">波分复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.5.</span> <span class="toc-text">码分复用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.5.</span> <span class="toc-text">数字传输系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A9%E6%9C%9F%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">3.5.1.</span> <span class="toc-text">早期数字传输系统的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%85%89%E7%BA%A4%E7%BD%91"><span class="toc-number">3.5.2.</span> <span class="toc-text">同步光纤网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E5%88%97"><span class="toc-number">3.5.3.</span> <span class="toc-text">同步数字系列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5%E6%8A%80%E6%9C%AF"><span class="toc-number">3.6.</span> <span class="toc-text">宽带接入技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#adsl%E6%8A%80%E6%9C%AF"><span class="toc-number">3.6.1.</span> <span class="toc-text">ADSL技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#adsl-%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8"><span class="toc-number">3.6.1.1.</span> <span class="toc-text">ADSL 调制解调器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#adsl%E7%BB%84%E6%88%90"><span class="toc-number">3.6.1.2.</span> <span class="toc-text">ADSL组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#adsl%E5%A5%BD%E5%A4%84"><span class="toc-number">3.6.1.3.</span> <span class="toc-text">ADSL好处</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E5%90%8C%E8%BD%B4%E6%B7%B7%E5%90%88%E7%BD%91hfc-%E7%BD%91"><span class="toc-number">3.6.2.</span> <span class="toc-text">光纤同轴混合网（HFC 网）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%BA%E9%A1%B6%E7%9B%92%E4%B8%8E%E7%94%B5%E7%BC%86%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8set-top-box"><span class="toc-number">3.6.2.1.</span> <span class="toc-text">机顶盒与电缆调制解调器（set-top
box）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fttx%E6%8A%80%E6%9C%AF"><span class="toc-number">3.6.3.</span> <span class="toc-text">FTTx技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E9%85%8D%E7%BA%BF%E7%BD%91-odn-optical-distribution-network"><span class="toc-number">3.6.3.1.</span> <span class="toc-text">光配线网 ODN (Optical
Distribution Network)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-1"><span class="toc-number">4.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E4%BF%A1%E9%81%93%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.</span> <span class="toc-text">数据链路层信道类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%9C%B0%E4%BD%8D"><span class="toc-number">4.2.</span> <span class="toc-text">数据链路层地位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">4.3.</span> <span class="toc-text">使用点对点信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7"><span class="toc-number">4.3.1.</span> <span class="toc-text">数据链路和帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.2.</span> <span class="toc-text">三个基本问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">封装成帧</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%8E%A7%E5%88%B6%E5%AD%97%E7%AC%A6%E4%BD%9C%E4%B8%BA%E5%B8%A7%E5%AE%9A%E7%95%8C%E7%AC%A6"><span class="toc-number">4.3.2.1.1.</span> <span class="toc-text">用控制字符作为帧定界符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">4.3.2.2.</span> <span class="toc-text">透明传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="toc-number">4.3.2.3.</span> <span class="toc-text">差错控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E9%AA%8C-crc-cyclic-redundancy-check-%E5%8E%9F%E7%90%86"><span class="toc-number">4.3.2.3.1.</span> <span class="toc-text">循环冗余检验 CRC
(Cyclic Redundancy Check) 原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#crc%E5%86%97%E4%BD%99%E7%A0%81%E8%AE%A1%E7%AE%97"><span class="toc-number">4.3.2.3.2.</span> <span class="toc-text">CRC冗余码计算</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ppt%E4%B8%8A%E7%9A%84%E8%AE%B2%E6%B3%95"><span class="toc-number">4.3.2.3.2.1.</span> <span class="toc-text">PPT上的讲法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E9%87%8C%E7%9A%84%E8%AE%B2%E6%B3%95"><span class="toc-number">4.3.2.3.2.2.</span> <span class="toc-text">视频里的讲法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.3.2.3.2.3.</span> <span class="toc-text">一个示例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">4.3.2.3.2.4.</span> <span class="toc-text">注意</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp"><span class="toc-number">4.4.</span> <span class="toc-text">点对点协议 PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">4.4.1.</span> <span class="toc-text">PPP协议的特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E9%9C%80%E6%B1%82"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">PPP协议的需求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp-%E5%8D%8F%E8%AE%AE%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">PPP 协议不需要的功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ppp-%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">PPP 协议的组成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.4.2.</span> <span class="toc-text">PPP协议的帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E5%AD%97%E6%AE%B5%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">各字段的意义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">解决透明传输问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="toc-number">4.4.3.</span> <span class="toc-text">PPP协议的工作状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">4.5.</span> <span class="toc-text">使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">4.5.1.</span> <span class="toc-text">局域网的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E4%BF%A1%E9%81%93%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.5.1.1.</span> <span class="toc-text">共享信道带来的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AA%92%E4%BD%93%E5%85%B1%E4%BA%AB%E6%8A%80%E6%9C%AF"><span class="toc-number">4.5.1.2.</span> <span class="toc-text">媒体共享技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%A0%87%E5%87%86"><span class="toc-number">4.5.1.3.</span> <span class="toc-text">以太网的两个标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.5.1.4.</span> <span class="toc-text">适配器的作用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csmacd-%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.5.2.</span> <span class="toc-text">CSMA&#x2F;CD 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E9%87%87%E5%8F%96%E7%9A%84-2-%E7%A7%8D%E9%87%8D%E8%A6%81%E6%8E%AA%E6%96%BD"><span class="toc-number">4.5.2.1.</span> <span class="toc-text">以太网采取的 2 种重要措施</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#csmacd-%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%A6%81%E7%82%B9"><span class="toc-number">4.5.2.2.</span> <span class="toc-text">CSMA&#x2F;CD 协议的要点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E5%88%B0%E7%A2%B0%E6%92%9E%E5%90%8E"><span class="toc-number">4.5.2.3.</span> <span class="toc-text">检测到碰撞后</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#csmacd-%E5%8D%8F%E8%AE%AE%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">4.5.2.4.</span> <span class="toc-text">CSMA&#x2F;CD 协议工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">4.5.2.5.</span> <span class="toc-text">进行碰撞检测的原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%89%E7%94%A8%E6%9C%9F"><span class="toc-number">4.5.2.6.</span> <span class="toc-text">争用期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E%E5%90%8E%E9%87%8D%E4%BC%A0%E7%9A%84%E6%97%B6%E6%9C%BA"><span class="toc-number">4.5.2.7.</span> <span class="toc-text">碰撞后重传的时机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91"><span class="toc-number">4.5.3.</span> <span class="toc-text">使用集线器的星形拓扑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E7%82%B9"><span class="toc-number">4.5.3.1.</span> <span class="toc-text">集线器的一些特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">4.5.4.</span> <span class="toc-text">以太网的信道利用率</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BF%A1%E9%81%93%E8%A2%AB%E5%8D%A0%E7%94%A8%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">4.5.4.1.</span> <span class="toc-text">以太网信道被占用的情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0-a-%E4%B8%8E%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">4.5.4.2.</span> <span class="toc-text">参数 a 与利用率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8F%82%E6%95%B0-a-%E7%9A%84%E8%A6%81%E6%B1%82"><span class="toc-number">4.5.4.3.</span> <span class="toc-text">对以太网参数 a 的要求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC-smax"><span class="toc-number">4.5.4.4.</span> <span class="toc-text">信道利用率的最大值 Smax</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84-mac-%E5%B1%82"><span class="toc-number">4.5.5.</span> <span class="toc-text">以太网的 MAC 层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%B1%82%E7%9A%84%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">4.5.5.1.</span> <span class="toc-text">MAC层的硬件地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%8D%E7%9A%84mac%E5%9C%B0%E5%9D%80"><span class="toc-number">4.5.5.1.1.</span> <span class="toc-text">48位的MAC地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E7%AB%99%E5%9C%B0%E5%9D%80%E7%BB%84%E5%9C%B0%E5%9D%80%E5%B9%BF%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">4.5.5.1.2.</span> <span class="toc-text">单站地址，组地址，广播地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A8%E7%90%83%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86"><span class="toc-number">4.5.5.1.3.</span> <span class="toc-text">全球管理与本地管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E5%85%B7%E6%9C%89%E8%BF%87%E6%BB%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">4.5.5.1.4.</span> <span class="toc-text">适配器具有过滤功能</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%B8%A7%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.5.5.2.</span> <span class="toc-text">MAC帧的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91-v2-%E7%9A%84-mac-%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.5.5.2.1.</span> <span class="toc-text">以太网 V2 的 MAC 帧格式</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.6.</span> <span class="toc-text">扩展的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.6.1.</span> <span class="toc-text">在物理层扩展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">用集线器扩展以太网优缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E%E5%9F%9F"><span class="toc-number">4.6.1.2.</span> <span class="toc-text">碰撞域</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.6.2.</span> <span class="toc-text">在数据链路层扩展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E6%A1%A5%E4%B8%8E%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">网桥与以太网交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E6%A1%A5"><span class="toc-number">4.6.2.1.1.</span> <span class="toc-text">网桥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">4.6.2.1.2.</span> <span class="toc-text">交换机</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">4.6.2.2.</span> <span class="toc-text">以太网交换机的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">4.6.2.3.</span> <span class="toc-text">以太网交换机的优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">4.6.2.4.</span> <span class="toc-text">以太网交换机的交换方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">4.6.2.5.</span> <span class="toc-text">以太网交换机的自学习功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%88%B0%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.6.2.6.</span> <span class="toc-text">从总线以太网到星形以太网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">4.6.3.</span> <span class="toc-text">虚拟局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98"><span class="toc-number">4.6.3.1.</span> <span class="toc-text">以太网存在问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E9%A3%8E%E6%9A%B4"><span class="toc-number">4.6.3.1.1.</span> <span class="toc-text">广播风暴</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-number">4.6.3.1.2.</span> <span class="toc-text">安全问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91-vlan"><span class="toc-number">4.6.3.2.</span> <span class="toc-text">虚拟局域网 VLAN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BC%98%E7%82%B9"><span class="toc-number">4.6.3.3.</span> <span class="toc-text">虚拟局域网优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%92%E5%88%86%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.6.3.4.</span> <span class="toc-text">划分虚拟局域网的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.6.3.5.</span> <span class="toc-text">虚拟局域网使用的以太网帧格式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.7.</span> <span class="toc-text">高速以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#base-t-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.7.1.</span> <span class="toc-text">100BASE-T 以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.7.2.</span> <span class="toc-text">吉比特以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91-10ge-%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">4.7.3.</span> <span class="toc-text">10 吉比特以太网 (10GE)
和更快的以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5"><span class="toc-number">4.7.4.</span> <span class="toc-text">使用以太网进行宽带接入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82-1"><span class="toc-number">5.</span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.</span> <span class="toc-text">网络层提供的两种服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E7%BD%91%E7%BB%9C%E8%B4%9F%E8%B4%A3%E5%8F%AF%E9%9D%A0%E4%BA%A4%E4%BB%98"><span class="toc-number">5.1.1.</span> <span class="toc-text">让网络负责可靠交付</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">虚电路服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8F%90%E4%BE%9B%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.2.</span> <span class="toc-text">网络提供数据报服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.2.1.</span> <span class="toc-text">数据报服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">5.1.3.</span> <span class="toc-text">虚电路服务与数据报服务的对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%B1%82%E9%9D%A2"><span class="toc-number">5.1.4.</span> <span class="toc-text">网络层的两个层面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B1%82%E9%9D%A2"><span class="toc-number">5.1.4.1.</span> <span class="toc-text">数据层面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B1%82%E9%9D%A2"><span class="toc-number">5.1.4.2.</span> <span class="toc-text">控制层面</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEip"><span class="toc-number">5.2.</span> <span class="toc-text">网际协议IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C"><span class="toc-number">5.2.1.</span> <span class="toc-text">虚拟互连网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E4%BA%92%E8%BF%9E%E6%98%AF%E6%8C%87%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">网络互连是指使用路由器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C%E4%B8%8E%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C"><span class="toc-number">5.2.1.2.</span> <span class="toc-text">互连网络与虚拟互连网络</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">5.2.1.3.</span> <span class="toc-text">虚拟互连网络的意义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%9C%A8%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%AD%E7%9A%84%E4%BC%A0%E9%80%81"><span class="toc-number">5.2.1.4.</span> <span class="toc-text">分组在互联网中的传送</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.2.</span> <span class="toc-text">IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%B1%82%E8%BD%AC%E5%8F%91%E5%88%86%E7%BB%84%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">IP层转发分组的过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip-%E5%9C%B0%E5%9D%80%E5%8F%8A%E5%85%B6%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">IP 地址及其表示方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E9%87%87%E7%94%A8%E4%B8%A4%E7%BA%A7%E7%BB%93%E6%9E%84"><span class="toc-number">5.2.2.2.1.</span> <span class="toc-text">IP地址采用两级结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E7%9A%84-ip-%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">分类的 IP 地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%88%86%E7%B1%BB"><span class="toc-number">5.2.2.3.1.</span> <span class="toc-text">标准分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%84%E7%B1%BB-ip-%E5%9C%B0%E5%9D%80%E7%9A%84%E6%8C%87%E6%B4%BE%E8%8C%83%E5%9B%B4"><span class="toc-number">5.2.2.3.2.</span> <span class="toc-text">各类 IP 地址的指派范围</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E7%89%B9%E6%AE%8A-ip-%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.2.3.3.</span> <span class="toc-text">一般不使用的特殊 IP 地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E7%9A%84-ip-%E5%9C%B0%E5%9D%80%E7%9A%84%E4%BC%98%E7%82%B9%E5%92%8C%E7%BC%BA%E7%82%B9"><span class="toc-number">5.2.2.3.4.</span> <span class="toc-text">分类的 IP 地址的优点和缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-1"><span class="toc-number">5.2.2.3.4.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">5.2.2.3.4.2.</span> <span class="toc-text">缺点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80-cidr"><span class="toc-number">5.2.2.4.</span> <span class="toc-text">无分类编址 CIDR</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%89%8D%E7%BC%80"><span class="toc-number">5.2.2.4.1.</span> <span class="toc-text">网络前缀</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E5%9D%97"><span class="toc-number">5.2.2.4.2.</span> <span class="toc-text">地址块</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E6%8E%A9%E7%A0%81"><span class="toc-number">5.2.2.4.3.</span> <span class="toc-text">地址掩码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84cidr%E5%9C%B0%E5%9D%80%E5%9D%97"><span class="toc-number">5.2.2.4.4.</span> <span class="toc-text">三个特殊的CIDR地址块</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88"><span class="toc-number">5.2.2.4.5.</span> <span class="toc-text">路由聚合</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip-%E5%9C%B0%E5%9D%80%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">5.2.2.5.</span> <span class="toc-text">IP 地址的特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E4%B8%8Emac%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.3.</span> <span class="toc-text">IP地址与MAC地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80-1"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">IP地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mac%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">MAC地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-number">5.2.3.3.</span> <span class="toc-text">区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEarp"><span class="toc-number">5.2.4.</span> <span class="toc-text">地址解析协议ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#arp-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98-arp-cache"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">ARP 高速缓存 (ARP cache)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp%E5%B7%A5%E4%BD%9C"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">ARP工作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp-%E6%9F%A5%E6%89%BEip%E5%9C%B0%E5%9D%80%E5%AF%B9%E5%BA%94%E7%9A%84mac%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.4.3.</span> <span class="toc-text">ARP 查找IP地址对应的MAC地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.2.4.4.</span> <span class="toc-text">ARP 高速缓存的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8B%A5%E4%B8%A4%E5%8F%B0%E4%B8%BB%E6%9C%BA%E4%B8%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.2.4.5.</span> <span class="toc-text">若两台主机不在同一个局域网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-arp-%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%85%B8%E5%9E%8B%E6%83%85%E5%86%B5"><span class="toc-number">5.2.4.6.</span> <span class="toc-text">使用 ARP 的四种典型情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E4%B8%A4%E7%A7%8D%E5%9C%B0%E5%9D%80"><span class="toc-number">5.2.4.7.</span> <span class="toc-text">为什么要使用两种地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.2.5.</span> <span class="toc-text">IP数据报格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E9%83%A8%E5%88%86"><span class="toc-number">5.2.5.1.</span> <span class="toc-text">可变部分</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%B1%82%E8%BD%AC%E5%8F%91%E5%88%86%E7%BB%84%E7%9A%84%E8%BF%87%E7%A8%8B-1"><span class="toc-number">5.3.</span> <span class="toc-text">IP层转发分组的过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E7%BB%88%E7%82%B9%E7%9A%84%E8%BD%AC%E5%8F%91"><span class="toc-number">5.3.1.</span> <span class="toc-text">基于终点的转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E9%95%BF%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D"><span class="toc-number">5.3.2.</span> <span class="toc-text">最长前缀匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%A8%E4%B8%AD%E7%9A%84-2-%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">转发表中的 2 种特殊的路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%88%86%E7%BB%84%E8%BD%AC%E5%8F%91%E7%AE%97%E6%B3%95"><span class="toc-number">5.3.2.2.</span> <span class="toc-text">路由器分组转发算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BA%8C%E5%8F%89%E7%BA%BF%E7%B4%A2%E6%9F%A5%E6%89%BE%E8%BD%AC%E5%8F%91"><span class="toc-number">5.3.3.</span> <span class="toc-text">使用二叉线索查找转发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp"><span class="toc-number">5.4.</span> <span class="toc-text">网际控制报文协议ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp-%E6%8A%A5%E6%96%87%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.4.1.</span> <span class="toc-text">ICMP 报文的格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E6%8A%A5%E6%96%87%E7%A7%8D%E7%B1%BB"><span class="toc-number">5.4.2.</span> <span class="toc-text">ICMP报文种类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">ICMP
差错报告报文的数据字段的内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%BA%94%E5%8F%91%E9%80%81-icmp-%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E7%9A%84%E5%87%A0%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-number">5.4.2.2.</span> <span class="toc-text">不应发送 ICMP
差错报告报文的几种情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8icmp-%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87"><span class="toc-number">5.4.2.3.</span> <span class="toc-text">常用ICMP 询问报文</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B"><span class="toc-number">5.4.3.</span> <span class="toc-text">ICMP应用举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv6"><span class="toc-number">5.5.</span> <span class="toc-text">IPV6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.6.</span> <span class="toc-text">互联网的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%85%B3%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5"><span class="toc-number">5.6.1.</span> <span class="toc-text">有关路由选择协议的几个概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E6%83%B3%E7%9A%84%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">5.6.1.1.</span> <span class="toc-text">理想的路由算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB"><span class="toc-number">5.6.1.2.</span> <span class="toc-text">路由算法分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AD%96%E7%95%A5"><span class="toc-number">5.6.1.2.1.</span> <span class="toc-text">静态路由选择策略</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AD%96%E7%95%A5"><span class="toc-number">5.6.1.2.2.</span> <span class="toc-text">动态路由选择策略</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%AC%A1%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.6.1.3.</span> <span class="toc-text">分层次的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F"><span class="toc-number">5.6.1.3.1.</span> <span class="toc-text">自治系统</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%A7%E7%B1%BB%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.6.1.3.2.</span> <span class="toc-text">2 大类路由选择协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AErip"><span class="toc-number">5.6.2.</span> <span class="toc-text">内部网关协议RIP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AErip%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.6.2.1.</span> <span class="toc-text">协议RIP工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rip%E8%B7%9D%E7%A6%BB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">5.6.2.1.1.</span> <span class="toc-text">RIP“距离”的定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rip-%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%B8%89%E4%B8%AA%E7%89%B9%E7%82%B9"><span class="toc-number">5.6.2.1.2.</span> <span class="toc-text">RIP 协议的三个特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B"><span class="toc-number">5.6.2.1.3.</span> <span class="toc-text">路由表的建立</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%BB%E8%A6%81%E4%BF%A1%E6%81%AF"><span class="toc-number">5.6.2.1.4.</span> <span class="toc-text">路由表主要信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%A1%A8%E6%9B%B4%E6%96%B0%E8%A7%84%E5%88%99"><span class="toc-number">5.6.2.1.5.</span> <span class="toc-text">路由表更新规则</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E7%AE%97%E6%B3%95"><span class="toc-number">5.6.2.2.</span> <span class="toc-text">距离向量算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rip2%E6%8A%A5%E6%96%87"><span class="toc-number">5.6.2.2.1.</span> <span class="toc-text">RIP2报文</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9D%8F%E6%B6%88%E6%81%AF%E4%BC%A0%E5%BE%97%E6%85%A2"><span class="toc-number">5.6.2.3.</span> <span class="toc-text">坏消息传得慢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rip%E5%8D%8F%E8%AE%AE%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">5.6.2.4.</span> <span class="toc-text">RIP协议优缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEospf"><span class="toc-number">5.6.3.</span> <span class="toc-text">内部网关协议OSPF</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ospf%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.6.3.1.</span> <span class="toc-text">OSPF工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf%E4%B8%89%E4%B8%AA%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">5.6.3.1.1.</span> <span class="toc-text">OSPF三个主要特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E6%95%B0%E6%8D%AE%E5%BA%93-link-state-database"><span class="toc-number">5.6.3.1.2.</span> <span class="toc-text">链路状态数据库 (link-state
database)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%92%E5%88%86%E5%8C%BA%E5%9F%9F"><span class="toc-number">5.6.3.1.3.</span> <span class="toc-text">划分区域</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%AC%A1%E5%88%92%E5%88%86%E5%8C%BA%E5%9F%9F%E5%A5%BD%E5%A4%84"><span class="toc-number">5.6.3.1.3.1.</span> <span class="toc-text">分层次划分区域好处</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%92%E5%88%86%E5%8C%BA%E5%9F%9F%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">5.6.3.1.3.2.</span> <span class="toc-text">划分区域优缺点</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ospf%E5%85%B6%E4%BB%96%E7%89%B9%E7%82%B9"><span class="toc-number">5.6.3.1.4.</span> <span class="toc-text">OSPF其他特点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ospf%E4%BA%94%E7%A7%8D%E5%88%86%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.6.3.2.</span> <span class="toc-text">OSPF五种分组类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ospf%E5%88%86%E7%BB%84%E7%94%A8ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E4%BC%A0%E9%80%81"><span class="toc-number">5.6.3.3.</span> <span class="toc-text">OSPF分组用IP数据报传送</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ospf%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">5.6.3.4.</span> <span class="toc-text">OSPF工作过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8dr"><span class="toc-number">5.6.3.5.</span> <span class="toc-text">指定的路由器DR</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEbgp"><span class="toc-number">5.6.4.</span> <span class="toc-text">外部网关协议BGP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E6%9E%84%E6%88%90"><span class="toc-number">5.6.5.</span> <span class="toc-text">路由器构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%A4%9A%E6%92%AD"><span class="toc-number">5.7.</span> <span class="toc-text">IP多播</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat"><span class="toc-number">5.8.</span> <span class="toc-text">虚拟专用网VPN和网络地址转换NAT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%8D%8F%E8%AE%AE%E6%A0%87%E7%AD%BE%E4%BA%A4%E6%8D%A2mpls"><span class="toc-number">5.9.</span> <span class="toc-text">多协议标签交换MPLS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9Csdn%E7%AE%80%E4%BB%8B"><span class="toc-number">5.10.</span> <span class="toc-text">软件定义网络SDN简介</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.</span> <span class="toc-text">运输层协议概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">6.1.1.</span> <span class="toc-text">进程间的通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.1.2.</span> <span class="toc-text">运输层两个主要协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%AD%A3%E5%BC%8F%E6%A0%87%E5%87%86"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">互联网的正式标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%8D%8F%E8%AE%AE%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">运输协议数据单元</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E4%B8%8Etcp%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.1.2.3.</span> <span class="toc-text">UDP与TCP的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#udp"><span class="toc-number">6.1.2.3.1.</span> <span class="toc-text">UDP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#tcp"><span class="toc-number">6.1.2.3.2.</span> <span class="toc-text">TCP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3"><span class="toc-number">6.1.3.</span> <span class="toc-text">运输层端口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E7%94%A8"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%94%A8"><span class="toc-number">6.1.3.2.</span> <span class="toc-text">分用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">6.1.3.3.</span> <span class="toc-text">需要考虑的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">6.1.3.4.</span> <span class="toc-text">端口号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%AB%AF%E5%8F%A3%E5%92%8C%E7%A1%AC%E4%BB%B6%E7%AB%AF%E5%8F%A3"><span class="toc-number">6.1.3.5.</span> <span class="toc-text">软件端口和硬件端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcpip-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E7%9A%84%E6%A0%87%E5%BF%97"><span class="toc-number">6.1.3.6.</span> <span class="toc-text">TCP&#x2F;IP 运输层端口的标志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E5%A4%A7%E7%B1%BB%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%AB%AF%E5%8F%A3"><span class="toc-number">6.1.3.7.</span> <span class="toc-text">两大类、三种类型的端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E7%86%9F%E7%9F%A5%E7%AB%AF%E5%8F%A3"><span class="toc-number">6.1.3.8.</span> <span class="toc-text">常用的熟知端口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE-udp"><span class="toc-number">6.2.</span> <span class="toc-text">用户数据报协议 UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E6%A6%82%E8%BF%B0"><span class="toc-number">6.2.1.</span> <span class="toc-text">UDP概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">UDP主要特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E9%9D%A2%E5%90%91%E6%8A%A5%E6%96%87"><span class="toc-number">6.2.1.2.</span> <span class="toc-text">UDP面向报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-%E9%80%9A%E4%BF%A1%E5%92%8C%E7%AB%AF%E5%8F%A3%E5%8F%B7%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">6.2.1.3.</span> <span class="toc-text">UDP 通信和端口号的关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.2.2.</span> <span class="toc-text">UDP首部格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%9F%BA%E4%BA%8E%E7%AB%AF%E5%8F%A3%E7%9A%84%E5%88%86%E7%94%A8"><span class="toc-number">6.2.2.1.</span> <span class="toc-text">UDP基于端口的分用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97udp%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">6.2.2.2.</span> <span class="toc-text">计算UDP检验和</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-tcp-%E6%A6%82%E8%BF%B0"><span class="toc-number">6.3.</span> <span class="toc-text">传输控制协议 TCP 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">6.3.1.</span> <span class="toc-text">TCP最主要的特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E9%9D%A2%E5%90%91%E6%B5%81%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">6.3.1.1.</span> <span class="toc-text">TCP面向流的概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.2.</span> <span class="toc-text">TCP的连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97socket"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">套接字（socket）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">TCP连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">可靠传输的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E6%83%B3%E4%BC%A0%E8%BE%93%E6%9D%A1%E4%BB%B6%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">6.4.1.</span> <span class="toc-text">理想传输条件的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.2.</span> <span class="toc-text">停止等待协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%B7%AE%E9%94%99%E6%83%85%E5%86%B5"><span class="toc-number">6.4.2.1.</span> <span class="toc-text">无差错情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0%E5%B7%AE%E9%94%99%E6%83%85%E5%86%B5"><span class="toc-number">6.4.2.2.</span> <span class="toc-text">出现差错情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E4%B8%A2%E5%A4%B1%E5%92%8C%E7%A1%AE%E8%AE%A4%E8%BF%9F%E5%88%B0"><span class="toc-number">6.4.2.3.</span> <span class="toc-text">确认丢失和确认迟到</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E4%B8%A2%E5%A4%B1"><span class="toc-number">6.4.2.3.1.</span> <span class="toc-text">确认丢失</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E8%BF%9F%E5%88%B0"><span class="toc-number">6.4.2.3.2.</span> <span class="toc-text">确认迟到</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">6.4.2.4.</span> <span class="toc-text">信道利用率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">6.4.2.5.</span> <span class="toc-text">停止等待协议优缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE%E8%A6%81%E7%82%B9"><span class="toc-number">6.4.2.6.</span> <span class="toc-text">停止等待协议要点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%BC%A0%E8%BE%93"><span class="toc-number">6.4.2.7.</span> <span class="toc-text">流水线传输</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BB%ADarq%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.3.</span> <span class="toc-text">连续ARQ协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%AF%E7%A7%AF%E7%A1%AE%E8%AE%A4"><span class="toc-number">6.4.3.1.</span> <span class="toc-text">累积确认</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.5.</span> <span class="toc-text">TCP 报文段的首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.6.</span> <span class="toc-text">TCP 可靠传输的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%AD%97%E8%8A%82%E4%B8%BA%E5%8D%95%E4%BD%8D%E7%9A%84%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-number">6.6.1.</span> <span class="toc-text">以字节为单位的滑动窗口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E7%AA%97%E5%8F%A3"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">发送窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E7%AA%97%E5%8F%A3"><span class="toc-number">6.6.1.2.</span> <span class="toc-text">接收窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E7%9A%84%E6%BB%91%E5%8A%A8"><span class="toc-number">6.6.1.3.</span> <span class="toc-text">窗口的滑动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E7%BC%93%E5%AD%98%E4%B8%8E%E5%8F%91%E9%80%81%E7%AA%97%E5%8F%A3"><span class="toc-number">6.6.1.4.</span> <span class="toc-text">发送缓存与发送窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E7%BC%93%E5%AD%98%E4%B8%8E%E6%8E%A5%E6%94%B6%E7%AA%97%E5%8F%A3"><span class="toc-number">6.6.1.5.</span> <span class="toc-text">接收缓存与接收窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%82%B9%E6%B3%A8%E6%84%8F"><span class="toc-number">6.6.1.6.</span> <span class="toc-text">三点注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">6.6.2.</span> <span class="toc-text">超时重传时间的选择</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.6.2.1.</span> <span class="toc-text">TCP 超时重传时间设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E6%9D%83%E5%B9%B3%E5%9D%87%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4-rtt_s"><span class="toc-number">6.6.2.2.</span> <span class="toc-text">加权平均往返时间 \(RTT_S\)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4rto"><span class="toc-number">6.6.2.3.</span> <span class="toc-text">超时重传时间RTO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#karn%E7%AE%97%E6%B3%95"><span class="toc-number">6.6.2.4.</span> <span class="toc-text">Karn算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4sack"><span class="toc-number">6.6.3.</span> <span class="toc-text">选择确认SACK</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.7.</span> <span class="toc-text">TCP 的流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.7.1.</span> <span class="toc-text">利用滑动窗口实现流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E7%BB%AD%E8%AE%A1%E6%97%B6%E5%99%A8"><span class="toc-number">6.7.1.1.</span> <span class="toc-text">持续计时器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87"><span class="toc-number">6.7.2.</span> <span class="toc-text">TCP的传输效率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.</span> <span class="toc-text">TCP 的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86"><span class="toc-number">6.8.1.</span> <span class="toc-text">拥塞控制的一般原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="toc-number">6.8.1.1.</span> <span class="toc-text">拥塞产生原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E8%B5%84%E6%BA%90%E4%B8%8D%E8%83%BD%E8%A7%A3%E5%86%B3%E6%8B%A5%E5%A1%9E"><span class="toc-number">6.8.1.2.</span> <span class="toc-text">增加资源不能解决拥塞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E5%8C%BA%E5%88%AB"><span class="toc-number">6.8.1.3.</span> <span class="toc-text">拥塞控制与流量控制区别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.1.3.1.</span> <span class="toc-text">拥塞控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.1.3.2.</span> <span class="toc-text">流量控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E8%B5%B7%E5%88%B0%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">6.8.1.4.</span> <span class="toc-text">拥塞控制起到的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86-1"><span class="toc-number">6.8.1.5.</span> <span class="toc-text">拥塞控制的一般原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E7%8E%AF%E6%8E%A7%E5%88%B6%E5%92%8C%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.1.6.</span> <span class="toc-text">开环控制和闭环控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%80%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.1.6.1.</span> <span class="toc-text">开环控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">6.8.1.6.2.</span> <span class="toc-text">闭环控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD"><span class="toc-number">6.8.1.7.</span> <span class="toc-text">闭环控制措施</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%91%E6%B5%8B"><span class="toc-number">6.8.1.7.1.</span> <span class="toc-text">监测</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%A0%E9%80%81"><span class="toc-number">6.8.1.7.2.</span> <span class="toc-text">传送</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E6%95%B4"><span class="toc-number">6.8.1.7.3.</span> <span class="toc-text">调整</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">6.8.2.</span> <span class="toc-text">TCP拥塞控制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3%E5%8F%98%E5%8C%96%E7%9A%84%E5%8E%9F%E5%88%99"><span class="toc-number">6.8.2.1.</span> <span class="toc-text">控制拥塞窗口变化的原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E5%88%A4%E6%96%AD%E6%8B%A5%E5%A1%9E%E7%9A%84%E6%96%B9%E6%B3%95%E9%9A%90%E5%BC%8F%E5%8F%8D%E9%A6%88"><span class="toc-number">6.8.2.2.</span> <span class="toc-text">发送方判断拥塞的方法：隐式反馈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">6.8.2.3.</span> <span class="toc-text">四种拥塞控制算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B-slow-start"><span class="toc-number">6.8.2.3.1.</span> <span class="toc-text">慢开始 (slow-start)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%AA%E6%8E%A7%E5%88%B6%E5%8F%98%E9%87%8F"><span class="toc-number">6.8.2.3.1.1.</span> <span class="toc-text">2 个控制变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E6%96%B9%E6%B3%95"><span class="toc-number">6.8.2.3.1.2.</span> <span class="toc-text">慢开始方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E8%BD%AE%E6%AC%A1"><span class="toc-number">6.8.2.3.1.3.</span> <span class="toc-text">传输轮次</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E9%97%A8%E9%99%90ssthresh"><span class="toc-number">6.8.2.3.1.4.</span> <span class="toc-text">慢开始门限ssthresh</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D-congestion-avoidance"><span class="toc-number">6.8.2.3.2.</span> <span class="toc-text">拥塞避免 (congestion
avoidance)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E6%96%B9%E6%B3%95"><span class="toc-number">6.8.2.3.2.1.</span> <span class="toc-text">拥塞避免方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BD%93%E7%BD%91%E7%BB%9C%E5%87%BA%E7%8E%B0%E6%8B%A5%E5%A1%9E%E6%97%B6"><span class="toc-number">6.8.2.3.2.2.</span> <span class="toc-text">当网络出现拥塞时</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E5%92%8C%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%E7%AE%97%E6%B3%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%BE%E4%BE%8B"><span class="toc-number">6.8.2.3.2.3.</span> <span class="toc-text">慢开始和拥塞避免算法的实现举例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%AB%E9%87%8D%E4%BC%A0-fast-retransmit"><span class="toc-number">6.8.2.3.3.</span> <span class="toc-text">快重传 (fast retransmit)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E4%B8%BE%E4%BE%8B"><span class="toc-number">6.8.2.3.3.1.</span> <span class="toc-text">快重传举例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%AB%E6%81%A2%E5%A4%8D-fast-recovery"><span class="toc-number">6.8.2.3.4.</span> <span class="toc-text">快恢复 (fast recovery)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B"><span class="toc-number">6.8.2.4.</span> <span class="toc-text">TCP拥塞控制流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E7%AA%97%E5%8F%A3%E4%B8%8A%E9%99%90"><span class="toc-number">6.8.2.5.</span> <span class="toc-text">发送窗口上限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86aqm"><span class="toc-number">6.8.3.</span> <span class="toc-text">主动队列管理AQM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">6.9.</span> <span class="toc-text">TCP 的运输连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">6.9.1.</span> <span class="toc-text">TCP的连接建立</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E4%B8%89%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-number">6.9.1.1.</span> <span class="toc-text">TCP
连接建立过程中要解决的三个问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">6.9.1.2.</span> <span class="toc-text">三次握手</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">6.9.2.</span> <span class="toc-text">TCP的连接释放</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">6.9.2.1.</span> <span class="toc-text">四次挥手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%85%E9%A1%BB%E7%AD%89%E5%BE%852msl%E6%97%B6%E9%97%B4"><span class="toc-number">6.9.2.2.</span> <span class="toc-text">必须等待2MSL时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E6%B4%BB%E8%AE%A1%E6%97%B6%E5%99%A8"><span class="toc-number">6.9.2.3.</span> <span class="toc-text">保活计时器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="toc-number">6.9.3.</span> <span class="toc-text">TCP的有限状态机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82-1"><span class="toc-number">7.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#dns"><span class="toc-number">7.1.</span> <span class="toc-text">DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.1.1.</span> <span class="toc-text">域名服务器类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">7.1.2.</span> <span class="toc-text">域名解析过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ftp"><span class="toc-number">7.2.</span> <span class="toc-text">FTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#www"><span class="toc-number">7.3.</span> <span class="toc-text">WWW</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91%E5%BF%85%E9%A1%BB%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">7.3.1.</span> <span class="toc-text">万维网必须解决的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url%E6%A0%BC%E5%BC%8F"><span class="toc-number">7.3.2.</span> <span class="toc-text">URL格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">7.4.</span> <span class="toc-text">电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#smtp"><span class="toc-number">7.4.1.</span> <span class="toc-text">SMTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pop"><span class="toc-number">7.4.2.</span> <span class="toc-text">POP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">8.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%B2%E8%AE%B2%E5%BC%BA%E8%B0%83%E5%86%85%E5%AE%B9"><span class="toc-number">8.1.</span> <span class="toc-text">串讲强调内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">8.1.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82-2"><span class="toc-number">8.1.2.</span> <span class="toc-text">物理层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-2"><span class="toc-number">8.1.3.</span> <span class="toc-text">数据链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82-2"><span class="toc-number">8.1.4.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82-1"><span class="toc-number">8.1.5.</span> <span class="toc-text">运输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82-2"><span class="toc-number">8.1.6.</span> <span class="toc-text">应用层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E7%A7%8D%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.2.</span> <span class="toc-text">各种协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppp"><span class="toc-number">8.2.1.</span> <span class="toc-text">点对点协议PPP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csmacd%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.2.2.</span> <span class="toc-text">CSMA&#x2F;CD协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.2.3.</span> <span class="toc-text">生成树协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEip-1"><span class="toc-number">8.2.4.</span> <span class="toc-text">网际协议IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEarp-1"><span class="toc-number">8.2.5.</span> <span class="toc-text">地址解析协议ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp-1"><span class="toc-number">8.2.6.</span> <span class="toc-text">网际控制报文协议ICMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AErip-1"><span class="toc-number">8.2.7.</span> <span class="toc-text">内部网关协议RIP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEospf-1"><span class="toc-number">8.2.8.</span> <span class="toc-text">内部网关协议OSPF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.2.9.</span> <span class="toc-text">TCP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.2.10.</span> <span class="toc-text">UDP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E6%96%87%E7%AE%80%E5%86%99"><span class="toc-number">8.3.</span> <span class="toc-text">英文简写</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">9.</span> <span class="toc-text">参考资料</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="机器学习复习整理">机器学习复习整理</a><time datetime="2024-01-08T01:40:07.000Z" title="发表于 2024-01-08 09:40:07">2024-01-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/07/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="计算机图形学复习整理">计算机图形学复习整理</a><time datetime="2024-01-07T13:06:54.000Z" title="发表于 2024-01-07 21:06:54">2024-01-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数字图像处理复习整理">数字图像处理复习整理</a><time datetime="2024-01-01T07:03:37.000Z" title="发表于 2024-01-01 15:03:37">2024-01-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/30/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BC%96%E7%A8%8B%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="计算机硬件编程复习整理">计算机硬件编程复习整理</a><time datetime="2023-12-30T11:24:04.000Z" title="发表于 2023-12-30 19:24:04">2023-12-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/28/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E5%80%BC%E5%88%86%E6%9E%90%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数值分析复习整理">数值分析复习整理</a><time datetime="2023-12-28T01:35:05.000Z" title="发表于 2023-12-28 09:35:05">2023-12-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By WinkySpeed</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2d-widget/autoload.js"></script></body></html>