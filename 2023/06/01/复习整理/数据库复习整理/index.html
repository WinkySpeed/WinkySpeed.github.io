<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>数据库复习整理 | WinkySpeed's Blog</title><meta name="author" content="WinkySpeed"><meta name="copyright" content="WinkySpeed"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库复习整理 实验考试复习整理 首先启动Oracle服务 计算机单击右键——管理——服务和应用程序——服务  首先启动TNS监听服务，再启动service服务，这样就能登录了 用sys登录数据库新建用户 连接为选SYSDBA 数据库选ORCL  新建user先赋予DBA权限 数据定义 创建表 可以用GUI创建表，然后用右下角查看SQL复制粘贴    修改表">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库复习整理">
<meta property="og:url" content="http://example.com/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="WinkySpeed&#39;s Blog">
<meta property="og:description" content="数据库复习整理 实验考试复习整理 首先启动Oracle服务 计算机单击右键——管理——服务和应用程序——服务  首先启动TNS监听服务，再启动service服务，这样就能登录了 用sys登录数据库新建用户 连接为选SYSDBA 数据库选ORCL  新建user先赋予DBA权限 数据定义 创建表 可以用GUI创建表，然后用右下角查看SQL复制粘贴    修改表">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/WinkySpeed%20SP%20-%20Repaired.jpg">
<meta property="article:published_time" content="2023-06-01T07:27:31.000Z">
<meta property="article:modified_time" content="2023-06-01T15:41:47.704Z">
<meta property="article:author" content="WinkySpeed">
<meta property="article:tag" content="复习">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="Oracle">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/WinkySpeed%20SP%20-%20Repaired.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库复习整理',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-01 23:41:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/WinkySpeed%20SP%20-%20Repaired.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/33703665_p0.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="WinkySpeed's Blog"><span class="site-name">WinkySpeed's Blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库复习整理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-01T07:27:31.000Z" title="发表于 2023-06-01 15:27:31">2023-06-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-01T15:41:47.704Z" title="更新于 2023-06-01 23:41:47">2023-06-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库复习整理"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="数据库复习整理">数据库复习整理</h1>
<h1 id="实验考试复习整理">实验考试复习整理</h1>
<h2 id="首先启动oracle服务">首先启动Oracle服务</h2>
<p>计算机单击右键——管理——服务和应用程序——服务</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601153501098.png" class title="image-20230601153501098">
<p>首先启动TNS监听服务，再启动service服务，这样就能登录了</p>
<h2 id="用sys登录数据库新建用户">用sys登录数据库新建用户</h2>
<p>连接为选SYSDBA</p>
<p>数据库选ORCL</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601153902785.png" class title="image-20230601153902785">
<p>新建user先赋予DBA权限</p>
<h2 id="数据定义">数据定义</h2>
<h3 id="创建表">创建表</h3>
<p>可以用GUI创建表，然后用右下角查看SQL复制粘贴</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161510050.png" class title="image-20230601161510050">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161529966.png" class title="image-20230601161529966">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161628684.png" class title="image-20230601161628684">
<h3 id="修改表">修改表</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161700071.png" class title="image-20230601161700071">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161730587.png" class title="image-20230601161730587">
<h3 id="删除表">删除表</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161757966.png" class title="image-20230601161757966">
<p>注：drop可以drop表，也可以drop列，但drop列要跟在alter table后</p>
<h2 id="查询语句">查询语句</h2>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601161924901.png" class title="image-20230601161924901">
<h3 id="单表查询">单表查询</h3>
<h4 id="选择表中的若干列">选择表中的若干列</h4>
<p>查询指定列：<code>select sname from s</code></p>
<p>查询全部列：<code>select * from s</code></p>
<p>查询经过计算的值（如查询年龄）：<code>select sname 学生姓名,2023-to_char(sbirth,'yyyy') as 年龄 from s</code></p>
<p>注：</p>
<p><code>to_char()</code>函数有两个参数，第一个参数为进行运算的值，第二个参数是一些设置（如取年月日中的哪一部分，年<code>'yyyy'</code>，月<code>'mm'</code>，日<code>'dd'</code>）</p>
<p>给列起别名有两种：直接加空格，然后写别名，或者as后面跟别名，别名不需要用<code>' '</code>包起来（用单引号引起来的是字符）</p>
<h4 id="选择表中若干元组">选择表中若干元组</h4>
<h5 id="distinct">Distinct</h5>
<p>Distinct关键字：取消取值重复行</p>
<p>如sc表中找学号</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601162919584.png" class title="image-20230601162919584">
<p>会出现重复，所以就要用到Distinct关键字：<code>select distinct sno from sc</code></p>
<h5 id="where">where</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601163111707.png" class title="image-20230601163111707">
<p>注：</p>
<p>等于不是两个等号，是一个等号</p>
<p>比较符号前加not，为取反</p>
<p>确定集合：<code>select * from sc where grade in (60,70,80,90,100)</code>，可以查到成绩在这个集合里的值，比or简单一些</p>
<p><br></p>
<p>字符匹配like</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601163556806.png" class title="image-20230601163556806">
<p>通配符可以代表任意字符：<code>%</code>代表任意长度（包括0）的字符串，<code>_</code>代表任意单个字符</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601163617439.png" class title="image-20230601163617439">
<p>如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> s <span class="keyword">where</span> sname <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span>		<span class="operator">/</span><span class="operator">/</span>找到所有姓张的</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> s <span class="keyword">where</span> sname <span class="keyword">like</span> <span class="string">&#x27;王__&#x27;</span>		<span class="operator">/</span><span class="operator">/</span>找到所有姓王，名字是<span class="number">3</span>个字的</span><br></pre></td></tr></table></figure>
<p>转义字符：当要查找的字符串里本来就含有<code>%或_</code>时，用转义字符</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601164159804.png" class title="image-20230601164159804">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> c <span class="keyword">where</span> cname <span class="keyword">like</span> <span class="string">&#x27;DB/_%i__&#x27;</span> <span class="keyword">escape</span> <span class="string">&#x27;/&#x27;</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>涉及空值，用<code>is null</code>或<code>is not null</code>，不能用<code>= null</code>代替</p>
<h4 id="对查询结果排序">对查询结果排序</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601164628383.png" class title="image-20230601164628383">
<p>ASC: ascend</p>
<p>DESC: descend</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,grade <span class="keyword">from</span> sc <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;003&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> grade <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<h4 id="使用集函数">使用集函数</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601165008797.png" class title="image-20230601165008797">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601165021346.png" class title="image-20230601165021346">
<p>distinct：取消重复行</p>
<h5 id="例题">例题</h5>
<p>COUNT：</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601165150762.png" class title="image-20230601165150762">
<p>考虑到一个学生会选很多门课，所以要加distinct</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> sno) <span class="keyword">from</span> sc</span><br></pre></td></tr></table></figure>
<p>AVG:</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601165327429.png" class title="image-20230601165327429">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(grade) <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;001&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="对查询结果分组">对查询结果分组</h4>
<p>分组：值相等的为一组，分组后可以进一步统计</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601165617757.png" class title="image-20230601165617757">
<p>用到<code>group by</code>后，select后面出现的属性列的列名，只能是分组的列名或集函数</p>
<p>group by字句后，还可以用having字句做进一步筛选</p>
<h5 id="例题-1">例题</h5>
<p>查询各个供应商号及其供应了多少类零件</p>
<p>用sno分组后如图，分为5组：</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601171818181.png" class title="image-20230601171818181">
<p>每组会有相同的sno，但是其他值一般都不同</p>
<p>一个供应商会给不同工程供应相同零件，所以零件种类pno要有distinct</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,<span class="built_in">count</span>(<span class="keyword">distinct</span> pno) <span class="keyword">from</span> spj <span class="keyword">group</span> <span class="keyword">by</span> sno</span><br></pre></td></tr></table></figure>
<p>查询供应了2类以上零件的供应商号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> spj <span class="keyword">group</span> <span class="keyword">by</span> sno <span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> pno)<span class="operator">&gt;</span><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>注：where和having使用的不同</p>
<p>虽然都是用来写条件，where是分组之前，对表中的元组进行筛选，作用对象是基本表；而分组以后的结果进一步筛选，用having</p>
<h3 id="连接查询">连接查询</h3>
<p>同时查阅2个以上的表：连接查询</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601172826587.png" class title="image-20230601172826587">
<h4 id="等值与非等值连接查询">等值与非等值连接查询</h4>
<p>用<code>=</code>实现自然连接</p>
<p>一般来说，两张表先用自然连接，再往后加条件</p>
<h4 id="自身连接查询">自身连接查询</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601173457582.png" class title="image-20230601173457582">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601173511528.png" class title="image-20230601173511528">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.sno <span class="keyword">from</span> sc a, sc b <span class="keyword">where</span> a.sno<span class="operator">=</span>b.sno <span class="keyword">and</span> a.cno<span class="operator">=</span><span class="string">&#x27;001&#x27;</span> <span class="keyword">and</span> b.cno<span class="operator">=</span><span class="string">&#x27;003&#x27;</span></span><br></pre></td></tr></table></figure>
<p>查询每门课的先修课：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> first.cno,second.cpno <span class="keyword">from</span> c <span class="keyword">first</span>, c <span class="keyword">second</span> <span class="keyword">where</span> first.cpno<span class="operator">=</span>second.cno <span class="keyword">and</span> second.cpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br></pre></td></tr></table></figure>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174053591.png" class title="image-20230601174053591">
<h4 id="外连接查询">外连接查询</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174310997.png" class title="image-20230601174310997">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174438207.png" class title="image-20230601174438207">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174513151.png" class title="image-20230601174513151">
<h4 id="复合条件连接查询">复合条件连接查询</h4>
<p>where含有多个条件</p>
<h3 id="集合查询">集合查询</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174651274.png" class title="image-20230601174651274">
<p>Oracle中差操作用到MINUS</p>
<h4 id="并操作">并操作</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174831260.png" class title="image-20230601174831260">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174851300.png" class title="image-20230601174851300">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;001&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="string">&#x27;003&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="交操作">交操作</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601174956720.png" class title="image-20230601174956720">
<h4 id="差操作">差操作</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601175055232.png" class title="image-20230601175055232">
<h2 id="数据更新">数据更新</h2>
<p>如果想立即看到结果，就得加<code>commit;</code>语句，并且语句和<code>commit;</code>之间有分号<code>;</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601191440732.png" class title="image-20230601191440732">
<p>alter
table：主要用于修改表的结构，和表中数据无关（可以加列，加新的完整性约束）</p>
<p>update：修改表中的数据，与表结构无关</p>
<p>drop：对数据类型做删除</p>
<p>delete：删除表中一行数据，不会对表结构造成影响</p>
<h3 id="插入数据">插入数据</h3>
<h4 id="插入单个元组">插入单个元组</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601191734385.png" class title="image-20230601191734385">
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> s <span class="keyword">values</span>(<span class="string">&#x27;04050&#x27;</span>,<span class="string">&#x27;陈东&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,to_date(<span class="string">&#x27;1997/10/01&#x27;</span>,<span class="string">&#x27;yyyy/mm/dd&#x27;</span>),<span class="string">&#x27;信息学院&#x27;</span>) </span><br></pre></td></tr></table></figure>
<p>注：<code>to_date()</code>函数有两个参数：第一个参数是要插入的具体日期，第二个是日期的格式</p>
<p>也可以</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> s(college,ssex,sno,sname,sbirth) </span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;信息学院&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;04050&#x27;</span>,<span class="string">&#x27;陈东&#x27;</span>,to_date(<span class="string">&#x27;1997/10/01&#x27;</span>,<span class="string">&#x27;yyyy/mm/dd&#x27;</span>)) </span><br></pre></td></tr></table></figure>
<h4 id="插入子查询结果">插入子查询结果</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193115918.png" class title="image-20230601193115918">
<h3 id="修改数据">修改数据</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193319414.png" class title="image-20230601193319414">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193346088.png" class title="image-20230601193346088">
<p>例：</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193405891.png" class title="image-20230601193405891">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> s <span class="keyword">set</span> college<span class="operator">=</span><span class="string">&#x27;外语系&#x27;</span> <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;04001&#x27;</span></span><br></pre></td></tr></table></figure>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193627069.png" class title="image-20230601193627069">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> s <span class="keyword">set</span> sbirth<span class="operator">=</span>sbirth<span class="number">-365</span> <span class="keyword">where</span> college<span class="operator">=</span><span class="string">&#x27;信息&#x27;</span></span><br></pre></td></tr></table></figure>
<p>注：日期型可以直接拿来算数运算，以天为单位</p>
<p><br></p>
<p>带子查询的update：</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601193831266.png" class title="image-20230601193831266">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> sc <span class="keyword">set</span> grade<span class="operator">=</span><span class="number">100</span> <span class="keyword">where</span> sc.sno <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> s <span class="keyword">where</span> college<span class="operator">=</span><span class="string">&#x27;信息&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="删除数据">删除数据</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601194129994.png" class title="image-20230601194129994">
<p>注：delete删的是元组</p>
<p><br></p>
<p>例题</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601194207359.png" class title="image-20230601194207359">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sc <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;04009&#x27;</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> s <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;04009&#x27;</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>
<p>但可能会违反参照完整性</p>
<p>所以必须先删除参考表的值</p>
<p><br></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601194522965.png" class title="image-20230601194522965">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sc <span class="keyword">where</span> sno <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> s <span class="keyword">where</span> college<span class="operator">=</span><span class="string">&#x27;信息&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="oracle安全性控制">Oracle安全性控制</h2>
<h3 id="用户管理">用户管理</h3>
<h4 id="创建用户">创建用户</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601194800293.png" class title="image-20230601194800293">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601194902535.png" class title="image-20230601194902535">
<p>注：创建的新用户甚至没有登陆权限</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195013939.png" class title="image-20230601195013939">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> u1</span><br><span class="line">identified <span class="keyword">by</span> <span class="number">123456</span></span><br><span class="line"><span class="keyword">default</span> tablespace users</span><br><span class="line">temporary tablespace temp</span><br></pre></td></tr></table></figure>
<p>但是是不能登录，因为没登录权限</p>
<h4 id="修改用户">修改用户</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195540891.png" class title="image-20230601195540891">
<p>把<code>create</code>换成<code>alter</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195636722.png" class title="image-20230601195636722">
<h4 id="删除用户">删除用户</h4>
<p>需要有<code>drop user</code>权限</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195729928.png" class title="image-20230601195729928">
<p>如果不指定<code>cascade</code>，而且用户已经创建表了之后，会报错：必须指定<code>cascade</code></p>
<h3 id="模式">模式</h3>
<h4 id="模式概念">模式概念</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195951078.png" class title="image-20230601195951078">
<h4 id="模式选择与切换">模式选择与切换</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601195957831.png" class title="image-20230601195957831">
<h4 id="模式对象与非模式对象">模式对象与非模式对象</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601200314016.png" class title="image-20230601200314016">
<h4 id="模式和用户">模式和用户</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601200421105.png" class title="image-20230601200421105">
<h3 id="权限管理">权限管理</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601200648440.png" class title="image-20230601200648440">
<h4 id="系统权限">系统权限</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601201341867.png" class title="image-20230601201341867">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601201505076.png" class title="image-20230601201505076">
<p><code>create session</code>：登录数据库权限</p>
<p><code>create table</code>：创建表</p>
<p><code>create any table</code>：在任何用户模式创建表</p>
<h5 id="授予用户系统权限">授予用户系统权限</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601201122534.png" class title="image-20230601201122534">
<p><code>with admin option</code>: 用户还可以把这个权限授予其他用户</p>
<p>首先得授予用户<code>create session</code>权限</p>
<p>在别的用户模式下建表：表名前加<code>模式名.</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601201827655.png" class title="image-20230601201827655">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> session, <span class="keyword">create</span> <span class="keyword">any</span> <span class="keyword">table</span>, <span class="keyword">select</span> <span class="keyword">any</span> <span class="keyword">table</span> <span class="keyword">to</span> u1</span><br></pre></td></tr></table></figure>
<h5 id="回收用户系统权限">回收用户系统权限</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601201754701.png" class title="image-20230601201754701">
<h4 id="对象权限">对象权限</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601202107163.png" class title="image-20230601202107163">
<h5 id="授予对象权限">授予对象权限</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601202141588.png" class title="image-20230601202141588">
<p>注：对象权限<code>with grant option</code>与系统权限对比：<code>with admin option</code></p>
<p>on后面只能跟一个对象，不能跟多个对象</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601202213822.png" class title="image-20230601202213822">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> s <span class="keyword">to</span> u1,u2</span><br></pre></td></tr></table></figure>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601202526166.png" class title="image-20230601202526166">
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">update</span>(sno) <span class="keyword">on</span> s <span class="keyword">to</span> u3 <span class="keyword">with</span> <span class="keyword">grant</span> option</span><br></pre></td></tr></table></figure>
<h5 id="回收对象权限">回收对象权限</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601202821067.png" class title="image-20230601202821067">
<p>如果授予的时候加了<code>with grant option</code>，收回的时候就要有<code>cascade constraints</code></p>
<h3 id="角色管理">角色管理</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601203047567.png" class title="image-20230601203047567">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601203452565.png" class title="image-20230601203452565">
<h2 id="oracle数据库编程">Oracle数据库编程</h2>
<h3 id="plsql简介">PL/SQL简介</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601204136595.png" class title="image-20230601204136595">
<h4 id="变量及数据类型">变量及数据类型</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601204223860.png" class title="image-20230601204223860">
<p>在Oracle中，赋值为<code>:=</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601204404170.png" class title="image-20230601204404170">
<p>好用的数据类型: <code>%type</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601204637353.png" class title="image-20230601204637353">
<p>例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">	m sc.sno<span class="operator">%</span>type;</span><br><span class="line">	n sc.cno<span class="operator">%</span>type;</span><br><span class="line">	t sc.grade<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	m :<span class="operator">=</span> <span class="string">&#x27;01323&#x27;</span>;</span><br><span class="line">	n :<span class="operator">=</span> <span class="string">&#x27;777&#x27;</span>;</span><br><span class="line">	t :<span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> s <span class="keyword">values</span>(m,n,t);</span><br><span class="line">	<span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<p>注：declare和begin后面无<code>;</code></p>
<p><code>end</code>后面才有<code>;</code></p>
<p>中间每一条语句都有<code>;</code></p>
<h4 id="运算符与表达式">运算符与表达式</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601205426305.png" class title="image-20230601205426305">
<p><code>=&gt;</code>用于给形参赋值</p>
<p><code>..</code>用于for循环</p>
<p><code>||</code>连接字符串</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601205910814.png" class title="image-20230601205910814">
<h4 id="流程控制语句">流程控制语句</h4>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601205941555.png" class title="image-20230601205941555">
<h5 id="条件语句">条件语句</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601210037410.png" class title="image-20230601210037410">
<p>注意：<code>IF</code>后面跟<code>THEN</code>，<code>ELSIF</code>写法，<code>END IF;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">m sc.grade<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">select</span> grade <span class="keyword">into</span> m</span><br><span class="line">	<span class="keyword">from</span> sc</span><br><span class="line">	<span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;04001&#x27;</span> <span class="keyword">and</span> cno<span class="operator">=</span><span class="string">&#x27;003&#x27;</span>;</span><br><span class="line">	if m<span class="operator">&lt;</span><span class="number">60</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;不及格&#x27;</span>);</span><br><span class="line">	elsif m<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">and</span> m<span class="operator">&lt;</span><span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;及格&#x27;</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;100&#x27;</span>);</span><br><span class="line">	<span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<p>注：PL/SQL中的<code>select</code>可以<code>into</code>到变量里</p>
<h5 id="循环语句">循环语句</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211007334.png" class title="image-20230601211007334">
<p>例如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">x number(<span class="number">2</span>):<span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	loop</span><br><span class="line">		x:<span class="operator">=</span>x<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">		dbms_output.put_line(<span class="string">&#x27;x现在的值是&#x27;</span><span class="operator">||</span>x);</span><br><span class="line">		exit <span class="keyword">when</span> x<span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211240874.png" class title="image-20230601211240874">
<h3 id="游标">游标</h3>
<h4 id="概念">概念</h4>
<p>在一段程序中处理所有查询结果</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211806224.png" class title="image-20230601211806224">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211827034.png" class title="image-20230601211827034">
<h4 id="游标使用步骤">游标使用步骤</h4>
<h5 id="声明游标">声明游标</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212037820.png" class title="image-20230601212037820">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212654831.png" class title="image-20230601212654831">
<h5 id="打开游标">打开游标</h5>
<p>执行游标的查询语句，然后存储在内存中</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212227757.png" class title="image-20230601212227757">
<h5 id="提取游标数据">提取游标数据</h5>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212327203.png" class title="image-20230601212327203">
<p><code>fetch</code>关键字，游标下移并取值</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212734826.png" class title="image-20230601212734826">
<p>重复取值：循环</p>
<p>循环结束：<code>c1%notfound</code>（c1为游标名）</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601212519026.png" class title="image-20230601212519026">
<h5 id="关闭游标">关闭游标</h5>
<p><code>close c1</code></p>
<h4 id="例">例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">	v_sno s.sno<span class="operator">%</span>type;</span><br><span class="line">	v_sname s.sname<span class="operator">%</span>type;</span><br><span class="line">	<span class="keyword">cursor</span> c2(v_dept s.college<span class="operator">%</span>type <span class="keyword">default</span> <span class="string">&#x27;信息&#x27;</span>) <span class="keyword">is</span></span><br><span class="line">	<span class="keyword">select</span> sno,sname <span class="keyword">from</span> s <span class="keyword">where</span> college<span class="operator">=</span>v_dept;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">open</span> c2(vdept<span class="operator">=</span><span class="operator">&gt;</span><span class="string">&#x27;植保&#x27;</span>);</span><br><span class="line">	loop</span><br><span class="line">		<span class="keyword">fetch</span> c2 <span class="keyword">into</span> v_sno,v_sname;</span><br><span class="line">		exit <span class="keyword">when</span> c2<span class="operator">%</span>notfound;</span><br><span class="line">		dbms_output.put_line(v_sno<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v_sname);</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line">	<span class="keyword">close</span> c2;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<h3 id="存储过程">存储过程</h3>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211409854.png" class title="image-20230601211409854">
<p>一般都加<code>or replace</code></p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211550373.png" class title="image-20230601211550373">
<p>例题</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601211600518.png" class title="image-20230601211600518">
<p>存储过程中的变量声明在is后begin前</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> TP1 <span class="keyword">is</span></span><br><span class="line">a s.sno<span class="operator">%</span>type;</span><br><span class="line">b s.ssex<span class="operator">%</span>type;</span><br><span class="line">c s.college<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sname,ssex,college</span><br><span class="line">  <span class="keyword">into</span> a,b,c</span><br><span class="line">  <span class="keyword">from</span> s</span><br><span class="line">  <span class="keyword">where</span> sno<span class="operator">=</span><span class="string">&#x27;04001&#x27;</span>;</span><br><span class="line">  dbms_output.put_line(a<span class="operator">||</span>b<span class="operator">||</span>c);</span><br><span class="line"><span class="keyword">end</span> TP1;</span><br></pre></td></tr></table></figure>
<p>调用：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">	TP1;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<p>带参数并用游标的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> TP1(v_col s.college<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">v_sname s.sname<span class="operator">%</span>type;</span><br><span class="line">v_cname c.cname<span class="operator">%</span>type;</span><br><span class="line">v_grade c.grade<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">cursor</span> c1 <span class="keyword">is</span></span><br><span class="line"><span class="keyword">select</span> sname,cname,grade <span class="keyword">from</span> s,sc,c <span class="keyword">where</span> s.sno<span class="operator">=</span>sc.sno <span class="keyword">and</span> c.cno<span class="operator">=</span>sc.cno <span class="keyword">and</span> college<span class="operator">=</span>v_col;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">open</span> c1;</span><br><span class="line">	loop</span><br><span class="line">		<span class="keyword">fetch</span> c1 <span class="keyword">into</span> v_sname,v_cname,v_grade;</span><br><span class="line">		exit <span class="keyword">when</span> c1<span class="operator">%</span>notfound;</span><br><span class="line">		dbms_output.put_line(v_sname<span class="operator">||</span>v_cname<span class="operator">||</span>v_grade);</span><br><span class="line">	<span class="keyword">end</span> loop;</span><br><span class="line">	<span class="keyword">close</span> c1;</span><br><span class="line"><span class="keyword">end</span> TP1;</span><br></pre></td></tr></table></figure>
<p>注意游标的关闭</p>
<h2 id="触发器">触发器</h2>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601225547712.png" class title="image-20230601225547712">
<p>触发事件：insert, delete, update</p>
<p>for each row: 行触发器（修改许多行元组，触发器执行若干次）</p>
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601225932395.png" class title="image-20230601225932395">
<img src="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/image-20230601230010628.png" class title="image-20230601230010628">
<p>例：GPA换算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> t1</span><br><span class="line">  before <span class="keyword">insert</span> <span class="keyword">or</span> <span class="keyword">update</span> <span class="keyword">on</span> sc</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  if :new.grade<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">  :new.gpa:<span class="operator">=</span><span class="number">4.0</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">85</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">89</span> <span class="keyword">then</span></span><br><span class="line">  :new.gpa:<span class="operator">=</span><span class="number">3.7</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">82</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">84</span> <span class="keyword">then</span></span><br><span class="line">  :new.gpa:<span class="operator">=</span><span class="number">3.3</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">78</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">81</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">75</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">77</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">2.7</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">71</span><span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">74</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">2.3</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">68</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">70</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">65</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">67</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">1.7</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">62</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">64</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">1.3</span>;</span><br><span class="line">  elsif :new.grade<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">and</span> :new.grade <span class="operator">&lt;=</span><span class="number">61</span> <span class="keyword">then</span></span><br><span class="line">    :new.gpa:<span class="operator">=</span><span class="number">1.0</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  :new.gpa:<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> t1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>例：当对spj表的供应量qty属性值进行修改时，若供应量的变化范围超过10%，自动将修改的数据情况记录到另一个表spj_tra(sno,pno,jno,b_qty,a_qty)中，其中sno、pno、jno是被修改的元组的供应商号、零件号和工程号，b_qty是修改前的供应量，a_qty是修改后的供应量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">创建spj_tra表格：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> spj_tra(</span><br><span class="line">    sno varchar2(<span class="number">10</span>) ,</span><br><span class="line">    pno varchar2(<span class="number">10</span>) ,</span><br><span class="line">    jno varchar2(<span class="number">10</span>) ,</span><br><span class="line">    b_qty number,</span><br><span class="line">    a_qty number);</span><br><span class="line">    </span><br><span class="line">创建触发器：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> t_track_spj</span><br><span class="line">  after <span class="keyword">update</span> <span class="keyword">on</span> spj </span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  x1 number;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  x1:<span class="operator">=</span><span class="built_in">abs</span>(:new.qty<span class="operator">-</span>:old.qty)<span class="operator">/</span>:old.qty;</span><br><span class="line">  if x1 <span class="operator">&gt;</span><span class="number">0.1</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> spj_tra(sno,pno,jno,b_qty,a_qty)</span><br><span class="line">    <span class="keyword">values</span>(:new.sno,:new.pno,:new.jno,:old.qty,:new.qty);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> t_track_spj;</span><br></pre></td></tr></table></figure>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%8D%E4%B9%A0/">复习</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/Oracle/">Oracle</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/05/30/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="编译原理复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">编译原理复习整理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/12/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/Java%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="Java复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-12</div><div class="title">Java复习整理</div></div></a></div><div><a href="/2023/02/14/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数据结构复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-14</div><div class="title">数据结构复习整理</div></div></a></div><div><a href="/2023/05/30/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="编译原理复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-30</div><div class="title">编译原理复习整理</div></div></a></div><div><a href="/2023/02/16/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="操作系统复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-16</div><div class="title">操作系统复习整理</div></div></a></div><div><a href="/2023/05/20/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%94%B5%E8%B7%AF%E4%B8%8E%E6%A8%A1%E6%8B%9F%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="电路与模拟电子技术复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-20</div><div class="title">电路与模拟电子技术复习整理</div></div></a></div><div><a href="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="计算机网络复习整理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-08</div><div class="title">计算机网络复习整理</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/WinkySpeed%20SP%20-%20Repaired.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">WinkySpeed</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/WinkySpeed"><i class="fab fa-github"></i><span>GitHub</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">数据库复习整理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">实验考试复习整理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E5%90%AF%E5%8A%A8oracle%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.</span> <span class="toc-text">首先启动Oracle服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8sys%E7%99%BB%E5%BD%95%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">2.2.</span> <span class="toc-text">用sys登录数据库新建用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89"><span class="toc-number">2.3.</span> <span class="toc-text">数据定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">2.3.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">2.3.2.</span> <span class="toc-text">修改表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">2.3.3.</span> <span class="toc-text">删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.4.</span> <span class="toc-text">查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.1.</span> <span class="toc-text">单表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8B%A5%E5%B9%B2%E5%88%97"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">选择表中的若干列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E8%A1%A8%E4%B8%AD%E8%8B%A5%E5%B9%B2%E5%85%83%E7%BB%84"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">选择表中若干元组</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#distinct"><span class="toc-number">2.4.1.2.1.</span> <span class="toc-text">Distinct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#where"><span class="toc-number">2.4.1.2.2.</span> <span class="toc-text">where</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">对查询结果排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E5%87%BD%E6%95%B0"><span class="toc-number">2.4.1.4.</span> <span class="toc-text">使用集函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-number">2.4.1.4.1.</span> <span class="toc-text">例题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%88%86%E7%BB%84"><span class="toc-number">2.4.1.5.</span> <span class="toc-text">对查询结果分组</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98-1"><span class="toc-number">2.4.1.5.1.</span> <span class="toc-text">例题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.</span> <span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%80%BC%E4%B8%8E%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">等值与非等值连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E8%BA%AB%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">自身连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.3.</span> <span class="toc-text">外连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.4.</span> <span class="toc-text">复合条件连接查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.3.</span> <span class="toc-text">集合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">并操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">2.4.3.2.</span> <span class="toc-text">交操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">2.4.3.3.</span> <span class="toc-text">差操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0"><span class="toc-number">2.5.</span> <span class="toc-text">数据更新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E5%8D%95%E4%B8%AA%E5%85%83%E7%BB%84"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">插入单个元组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">插入子查询结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.2.</span> <span class="toc-text">修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.3.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#oracle%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6"><span class="toc-number">2.6.</span> <span class="toc-text">Oracle安全性控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">2.6.1.</span> <span class="toc-text">用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7"><span class="toc-number">2.6.1.2.</span> <span class="toc-text">修改用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">2.6.1.3.</span> <span class="toc-text">删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.6.2.</span> <span class="toc-text">模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E6%A6%82%E5%BF%B5"><span class="toc-number">2.6.2.1.</span> <span class="toc-text">模式概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9%E4%B8%8E%E5%88%87%E6%8D%A2"><span class="toc-number">2.6.2.2.</span> <span class="toc-text">模式选择与切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%AF%B9%E8%B1%A1%E4%B8%8E%E9%9D%9E%E6%A8%A1%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.6.2.3.</span> <span class="toc-text">模式对象与非模式对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%92%8C%E7%94%A8%E6%88%B7"><span class="toc-number">2.6.2.4.</span> <span class="toc-text">模式和用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">2.6.3.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.1.</span> <span class="toc-text">系统权限</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%88%E4%BA%88%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.1.1.</span> <span class="toc-text">授予用户系统权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.1.2.</span> <span class="toc-text">回收用户系统权限</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.2.</span> <span class="toc-text">对象权限</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%88%E4%BA%88%E5%AF%B9%E8%B1%A1%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.2.1.</span> <span class="toc-text">授予对象权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E5%AF%B9%E8%B1%A1%E6%9D%83%E9%99%90"><span class="toc-number">2.6.3.2.2.</span> <span class="toc-text">回收对象权限</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86"><span class="toc-number">2.6.4.</span> <span class="toc-text">角色管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B"><span class="toc-number">2.7.</span> <span class="toc-text">Oracle数据库编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#plsql%E7%AE%80%E4%BB%8B"><span class="toc-number">2.7.1.</span> <span class="toc-text">PL&#x2F;SQL简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%8F%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.7.1.1.</span> <span class="toc-text">变量及数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.7.1.2.</span> <span class="toc-text">运算符与表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.7.1.3.</span> <span class="toc-text">流程控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.7.1.3.1.</span> <span class="toc-text">条件语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.7.1.3.2.</span> <span class="toc-text">循环语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87"><span class="toc-number">2.7.2.</span> <span class="toc-text">游标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.7.2.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.7.2.2.</span> <span class="toc-text">游标使用步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%B8%B8%E6%A0%87"><span class="toc-number">2.7.2.2.1.</span> <span class="toc-text">声明游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E6%B8%B8%E6%A0%87"><span class="toc-number">2.7.2.2.2.</span> <span class="toc-text">打开游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E6%B8%B8%E6%A0%87%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.2.2.3.</span> <span class="toc-text">提取游标数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%B8%B8%E6%A0%87"><span class="toc-number">2.7.2.2.4.</span> <span class="toc-text">关闭游标</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B"><span class="toc-number">2.7.2.3.</span> <span class="toc-text">例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">2.7.3.</span> <span class="toc-text">存储过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">2.8.</span> <span class="toc-text">触发器</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/01/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="数据库复习整理">数据库复习整理</a><time datetime="2023-06-01T07:27:31.000Z" title="发表于 2023-06-01 15:27:31">2023-06-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/30/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="编译原理复习整理">编译原理复习整理</a><time datetime="2023-05-30T10:56:01.000Z" title="发表于 2023-05-30 18:56:01">2023-05-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/20/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E7%94%B5%E8%B7%AF%E4%B8%8E%E6%A8%A1%E6%8B%9F%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="电路与模拟电子技术复习整理">电路与模拟电子技术复习整理</a><time datetime="2023-05-20T11:10:22.000Z" title="发表于 2023-05-20 19:10:22">2023-05-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/05/08/%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E6%95%B4%E7%90%86/" title="计算机网络复习整理">计算机网络复习整理</a><time datetime="2023-05-08T04:25:05.000Z" title="发表于 2023-05-08 12:25:05">2023-05-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/10/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E5%A4%A9%E6%A2%AF%E8%B5%9B%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95/" title="天梯赛训练记录">天梯赛训练记录</a><time datetime="2023-04-10T14:25:49.000Z" title="发表于 2023-04-10 22:25:49">2023-04-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By WinkySpeed</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2d-widget/autoload.js"></script></body></html>